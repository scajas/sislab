<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subReporteNoConcepUnidad" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="e040f2df-e590-4546-a1a2-2f75fb452d69">
	<property name="ireport.zoom" value="1.4641000000000035"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Crosstab Data Text" hAlign="Center"/>
	<parameter name="anio" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="mes" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="nombreUsuario" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\edist\\Downloads\\Reporte no Unidad\\"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e,
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Compra' then 'Compra'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Ajuste de inventario (+)' then '' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'L' then 'L' else' ' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
"Laboratorios".tipordeninv toi, usuario us,
"Laboratorios".unidad u, "Laboratorios".grado gr,
"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='L'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='4' OR oi."id_tipordeninv"='6')
AND e.id_existencia = se.id_existencia and se.mes = $P{mes} and se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia", "nombre_gr",
"sigla_um", mi."aux1", se."saldo_e", mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e,
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("nombre_toi") = 'Bajas' then 'Bajas'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'L' then 'L' else' ' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
"Laboratorios".tipordeninv toi, usuario us,
"Laboratorios".unidad u, "Laboratorios".grado gr,
"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='L'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='2' OR oi."id_tipordeninv"='3' OR oi."id_tipordeninv"='8')
AND "cantidad_mov" NOT IN ('0')
AND se.id_existencia = e.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia", "nombre_gr",
"sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e, mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'L' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us,
	"Laboratorios".unidad u, "Laboratorios".grado gr,
	"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='L'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='7')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia", "nombre_gr",
"sigla_um", mi."aux1",se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e, mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Compra' then 'Compra'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Ajuste de inventario (+)' then '' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'kg' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us,
	"Laboratorios".unidad u, "Laboratorios".grado gr,
	"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='kg'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='4' OR oi."id_tipordeninv"='6')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e, mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("nombre_toi") = 'Bajas' then 'Bajas'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'kg' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us,
	"Laboratorios".unidad u, "Laboratorios".grado gr,
	"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='kg'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='2' OR oi."id_tipordeninv"='3' OR oi."id_tipordeninv"='8')
AND cantidad_mov NOT IN ('0')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia", "nombre_gr",
"sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(mi.saldo_e,2) AS Saldo,
	se.saldo_e,
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else' ' end,
	case when ("sigla_um") = 'kg' then 'kg' else' ' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us,
	"Laboratorios".unidad u, "Laboratorios".grado gr,
	"Laboratorios".unidadmedida um, "Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='kg'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='7')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Compra' then 'Compra'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Ajuste de inventario (+)' then '' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'mL' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='mL'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='4' OR oi."id_tipordeninv"='6')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("nombre_toi") = 'Bajas' then 'Bajas'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'mL' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='mL'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='2' OR oi."id_tipordeninv"='3' OR oi."id_tipordeninv"='8')
AND "cantidad_mov" NOT IN ('0')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos ,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000), mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'mL' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='mL'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='7')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Compra' then 'Compra'
		when ("nombre_toi") = 'Ajuste de inventario (+)' then ''
		when ("nombre_toi") = 'Transferencia' then 'Transferencia' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'g' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='g'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='4' OR oi."id_tipordeninv"='6')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("nombre_toi") = 'Bajas' then 'Bajas'
		when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'g' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='g'
AND us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='2' OR oi."id_tipordeninv"='3' OR oi."id_tipordeninv"='8')
AND "cantidad_mov" NOT IN ('0')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT DISTINCT (e."id_existencia"),
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.increm/1000),2) END AS Ingresos,
	CASE nombre_toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(mi.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((mi.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	mi."aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"nombre_toi",
	"nombre_gr",
	"sigla_um",
	case when ("nombre_toi") = 'Transferencia' then 'Transferencia'
		when ("nombre_toi") = 'Consumo' then 'Consumo' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'g' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".movimientosinventario mi,
	"Laboratorios".ordeninventario oi, "Laboratorios".tipoproducto tp,
	"Laboratorios".tipordeninv toi, usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE mi."id_ordeninventario"=oi."id_ordeninventario"
AND mi."id_existencia"=e."id_existencia"
AND e."id_producto"=p."id_producto"
AND Extract(month from "fechaingreso_oi") = $P{mes}
AND Extract(year from "fechaingreso_oi") = $P{anio}
AND pv."id_proveedor"=mi."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND oi."id_tipordeninv"=toi."id_tipordeninv"
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='g' and us."nombre_usuario" = $P{nombreUsuario}
AND (oi."id_tipordeninv"='7')
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
GROUP BY "nombre_pr", "nombre_pv", "nombre_toi", e."id_existencia",
"nombre_gr", "sigla_um", mi."aux1", se.saldo_e, mi.saldo_e

UNION ALL

SELECT e."id_existencia",
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.increm),2) END AS Ingresos,
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(se.saldo_e,2) AS Saldo,
	se.saldo_e,
	"aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"toi",
	"nombre_gr",
	"sigla_um",
	case when ("toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("toi") = 'Transferencia' then 'Transferencia' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'L' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".tipoproducto tp,
	usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE e."id_producto"=p."id_producto"
AND pv."id_proveedor"=e."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='L'
AND us."nombre_usuario" = $P{nombreUsuario}
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
AND e."id_existencia" NOT IN (SELECT e."id_existencia"
				FROM "Laboratorios".existencias e,
					"Laboratorios".movimientosinventario mi, "Laboratorios".ordeninventario oi,
					usuario us, "Laboratorios".unidad u, "Laboratorios".unidadmedida um
				WHERE mi."id_existencia"=e."id_existencia"
				AND Extract(month from "fechaingreso_oi") = $P{mes}
				AND Extract(year from "fechaingreso_oi") = $P{anio}
				AND e."id_tipoprod"='4'
				AND mi.id_ordeninventario = oi.id_ordeninventario
				AND u."id_unidad"=e."id_unidad"
				AND us."id_unidad"=u."id_unidad"
				AND e."id_umedida"=um."id_umedida"
				AND "sigla_um"='L' and us."nombre_usuario" = $P{nombreUsuario}
				AND cantidad_mov NOT IN ('0'))
GROUP BY "nombre_pr", "nombre_pv", e."id_existencia", "nombre_gr", "toi", "sigla_um", "aux1", se.saldo_e

UNION ALL

SELECT e."id_existencia",
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.increm),2) END AS Ingresos,
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.dism), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(se.saldo_e,2) AS Saldo,
	se.saldo_e,
	"aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"toi",
	"nombre_gr",
	"sigla_um",
	case when ("toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("toi") = 'Transferencia' then 'Transferencia' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'kg' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".tipoproducto tp,
	usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE e."id_producto"=p."id_producto"
AND pv."id_proveedor"=e."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='kg'
AND us."nombre_usuario" = $P{nombreUsuario}
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
AND e."id_existencia" NOT IN (SELECT e."id_existencia"
				FROM "Laboratorios".existencias e,
					"Laboratorios".movimientosinventario mi, "Laboratorios".ordeninventario oi,
					usuario us, "Laboratorios".unidad u, "Laboratorios".unidadmedida um
				WHERE mi."id_existencia"=e."id_existencia"
				AND Extract(month from "fechaingreso_oi") = $P{mes}
				AND Extract(year from "fechaingreso_oi") = $P{anio}
				AND e."id_tipoprod"='4'
				AND mi.id_ordeninventario = oi.id_ordeninventario
				AND u."id_unidad"=e."id_unidad"
				AND us."id_unidad"=u."id_unidad"
				AND e."id_umedida"=um."id_umedida"
				AND "sigla_um"='kg'
				AND us."nombre_usuario" = $P{nombreUsuario}
				AND cantidad_mov NOT IN ('0'))
GROUP BY "nombre_pr", "nombre_pv", e."id_existencia", "nombre_gr", "toi", "sigla_um", "aux1", se.saldo_e

UNION ALL

SELECT e."id_existencia",
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.increm/1000),2) END AS Ingresos,
	CASE toi WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND(se.saldo_e/1000,2) AS Saldo,
	(se.saldo_e/1000),
	"aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"toi",
	"nombre_gr",
	"sigla_um",
	case when ("toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("toi") = 'Transferencia' then 'Transferencia' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'mL' then 'L' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".tipoproducto tp,
	usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE e."id_producto"=p."id_producto"
AND pv."id_proveedor"=e."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='mL'
AND us."nombre_usuario" = $P{nombreUsuario}
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
AND e."id_existencia" NOT IN (SELECT e."id_existencia"
				FROM "Laboratorios".existencias e,
					"Laboratorios".movimientosinventario mi, "Laboratorios".ordeninventario oi,
					usuario us, "Laboratorios".unidad u, "Laboratorios".unidadmedida um
				WHERE mi."id_existencia"=e."id_existencia"
				AND Extract(month from "fechaingreso_oi") = $P{mes}
				AND Extract(year from "fechaingreso_oi") = $P{anio}
				AND e."id_tipoprod"='4'
				AND mi.id_ordeninventario = oi.id_ordeninventario
				AND u."id_unidad"=e."id_unidad"
				AND us."id_unidad"=u."id_unidad"
				AND e."id_umedida"=um."id_umedida"
				AND "sigla_um"='mL'
				AND us."nombre_usuario" = $P{nombreUsuario}
				AND cantidad_mov NOT IN ('0'))
GROUP BY "nombre_pr", "nombre_pv", e."id_existencia", "nombre_gr", "toi", "sigla_um", "aux1", se.saldo_e

UNION ALL

SELECT e."id_existencia",
	CASE "toi" WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.increm/1000),2) END AS Ingresos,
	CASE "toi" WHEN 'Transferencia' THEN '0.0000' ELSE ROUND(SUM(e.dism/1000), 2) END AS Egresos,
	"nombre_pr" AS Producto,
	ROUND((se.saldo_e/1000),2) AS Saldo,
	(se.saldo_e/1000),
	"aux1" AS Factura,
	"nombre_pv" AS Proveedor,
	"toi",
	"nombre_gr",
	"sigla_um",
	case when ("toi") = 'Ajuste de inventario (-)' then 'Consumo'
		when ("toi") = 'Transferencia' then 'Transferencia' else '' end,
	case when ("nombre_gr") = 'Analítico' then 'G.R'
		when ("nombre_gr") = 'Técnico' then 'T'
		when ("nombre_gr") = 'USP' then 'USP' else '' end,
	case when ("sigla_um") = 'g' then 'kg' else '' end
FROM "Laboratorios".producto p, "Laboratorios".existencias e,
	"Laboratorios".proveedor pv, "Laboratorios".tipoproducto tp,
	usuario us, "Laboratorios".unidad u,
	"Laboratorios".grado gr, "Laboratorios".unidadmedida um,
	"Laboratorios".saldo_existencia se
WHERE e."id_producto"=p."id_producto"
AND pv."id_proveedor"=e."aux2"
AND e."id_tipoprod"=tp."id_tipoprod"
AND e."id_tipoprod"='4'
AND e."id_grado"=gr."id_grado"
AND u."id_unidad"=e."id_unidad"
AND us."id_unidad"=u."id_unidad"
AND e."id_umedida"=um."id_umedida"
AND "sigla_um"='g'
AND us."nombre_usuario" = $P{nombreUsuario}
AND e.id_existencia = se.id_existencia
AND se.mes = $P{mes}
AND se.anio = $P{anio}
AND e."id_existencia" NOT IN (SELECT e."id_existencia"
				FROM "Laboratorios".existencias e,
					"Laboratorios".movimientosinventario mi, "Laboratorios".ordeninventario oi,
					usuario us, "Laboratorios".unidad u,
					"Laboratorios".unidadmedida um
				WHERE mi."id_existencia"=e."id_existencia"
				AND Extract(month from "fechaingreso_oi") = $P{mes}
				AND Extract(year from "fechaingreso_oi") = $P{anio}
				AND e."id_tipoprod"='4'
				AND mi.id_ordeninventario = oi.id_ordeninventario
				AND u."id_unidad"=e."id_unidad"
				AND us."id_unidad"=u."id_unidad"
				AND e."id_umedida"=um."id_umedida"
				AND "sigla_um"='g'
				AND us."nombre_usuario" = $P{nombreUsuario}
				AND "cantidad_mov" NOT IN ('0'))
GROUP BY "nombre_pr", "nombre_pv", e."id_existencia", "nombre_gr", "toi", "sigla_um", "aux1", se.saldo_e
ORDER BY Producto]]>
	</queryString>
	<field name="id_existencia" class="java.lang.String"/>
	<field name="ingresos" class="java.math.BigDecimal"/>
	<field name="egresos" class="java.math.BigDecimal"/>
	<field name="producto" class="java.lang.String"/>
	<field name="saldo" class="java.math.BigDecimal"/>
	<field name="saldo_e" class="java.math.BigDecimal"/>
	<field name="factura" class="java.lang.String">
		<fieldDescription><![CDATA[campo para saber si el concepto debe ser o no facturado]]></fieldDescription>
	</field>
	<field name="proveedor" class="java.lang.String"/>
	<field name="nombre_toi" class="java.lang.String"/>
	<field name="nombre_gr" class="java.lang.String"/>
	<field name="sigla_um" class="java.lang.String"/>
	<field name="case" class="java.lang.String"/>
	<variable name="sumaProducto" class="java.lang.Double" resetType="Group" resetGroup="Productos" calculation="Sum">
		<variableExpression><![CDATA[$F{saldo}]]></variableExpression>
	</variable>
	<variable name="egresosTotales" class="java.lang.Double" resetType="Group" resetGroup="Productos" calculation="Sum">
		<variableExpression><![CDATA[$F{egresos}]]></variableExpression>
	</variable>
	<variable name="ingresosTotales" class="java.lang.Double" resetType="Group" resetGroup="Productos" calculation="Sum">
		<variableExpression><![CDATA[$F{ingresos}]]></variableExpression>
	</variable>
	<group name="Productos">
		<groupExpression><![CDATA[$F{producto}]]></groupExpression>
	</group>
	<group name="ProductosbySigla">
		<groupExpression><![CDATA[$F{nombre_gr}.equals("Analítico") ? "G.R" :
($F{nombre_gr}.equals("Técnico") ? "T" :
    ($F{nombre_gr}.equals("USP") ? "USP" : "")
)]]></groupExpression>
		<groupFooter>
			<band height="38">
				<textField>
					<reportElement x="0" y="0" width="93" height="38" uuid="d3a4360d-9e6c-4b67-86cc-baf675585c29"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[" "+$F{producto}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="196" y="0" width="90" height="38" uuid="e5358c4a-53e5-4bdf-9b16-da62d2586ea9"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{factura} == null)?"":$F{factura}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="286" y="0" width="91" height="38" uuid="9caf48eb-1af2-492d-aa3c-9ee10daf8821"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{proveedor} == null)?"":$F{proveedor}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="112" y="0" width="84" height="38" uuid="fda539ab-9c3b-4ee6-9331-761de510823d"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{case} == null)?"N/A":$F{case}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="532" y="0" width="23" height="38" uuid="0d56d9f2-23cf-4e69-93d1-ab9896b3db6c"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{sigla_um}.equals("mL") ? "L" :
( $F{sigla_um}.equals("L") ? "L" :
    ($F{sigla_um}.equals("g") ? "kg" :
      ($F{sigla_um}.equals("kg") ? "kg" :
      "")
    )
  )]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="92" y="0" width="20" height="38" uuid="f952c7ef-6de7-4480-868e-8c811fd588b5"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{nombre_gr}.equals("Analítico") ? "G.R" :
($F{nombre_gr}.equals("Técnico") ? "T" :
    ($F{nombre_gr}.equals("USP") ? "USP" : "")
)]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="487" y="0" width="45" height="38" uuid="6906ad30-4225-46e9-a204-dd6682ae2f97"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{sumaProducto}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="377" y="0" width="55" height="38" uuid="7b1323ca-fbcc-4741-822e-f0611dd9ed10"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{ingresosTotales}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="432" y="0" width="55" height="38" uuid="040ea4ac-a9b4-433f-8384-2c931d270e1f"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{egresosTotales}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
</jasperReport>
