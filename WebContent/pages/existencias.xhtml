<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/common.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:v="http://validators.epn.edu.ec.com"
	xmlns:ps="http://primefaces.org/apark">


	<ui:define name="pageTitle">Existencias</ui:define>
	<ui:define name="body">

		<h:head>

			<script type="text/javascript">
	
		//<![CDATA[
		function printDiv(divName){
			var f =new Date();
			var printContents =document.getElementById(divName).innerHTML;
			var originalContents =document.body.innerHTML;
			document.body.innerHTML=printContents;
			window.print();
			document.body.innerHTML=originalContents;
		}

		//]]>

	</script>
		</h:head>


		<h:body>

			<p:growl id="messagesForm" showDetail="true" sticky="false"
				autoupdate="true" life="3000" />

			<h:form id="formprincipal">


				<p:panel>
					<p:fieldset legend="Existencias"
						style="border-radius: 5px 5px 5px 5px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1
	;width: '90%';">
						<br />
						<br />
						<!-- **************************  Boton Nuevos   *************************** -->

						<p:commandLink process="@this" onclick="PF('nuevoEx').show()"
							update=":formNuevoEx,@this">
							<center>
								<h:graphicImage value="/images/archivos/agregar.png"
									title="Agregar" style="border:0px solid #CAD6E0;" width="36"
									height="35" />
							</center>
							<center>
								<h:outputText value="Agregar Nuevo" />
							</center>
						</p:commandLink>
						<br />
						<br />

						<!-- **************************  Tabla existencias   *************************** -->

						<p:dataTable id="tblExistencias"
							value="#{existenciasController.existencias}" var="existencia"
							widgetVar="filterExistenciasTable"
							emptyMessage="No se pudo encontrar ninguna coincidencia"
							filteredValue="#{existenciasController.filtrarExistencias}"
							resizableColumns="true" rows="10" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">

							<p:column headerText="ID-Producto"
								filterBy="#{existencia.producto.idProducto}"
								filterMatchMode="contains">

								<!-- **************************  Boton Ver Detalles Exisencia   *************************** -->

								<p:commandLink update=":formDetalleExistencia,@this"
									process="@this,tblExistencias" icon="ui-icon-check"
									oncomplete="PF('verDetalleExistencia').show();">

									<h:outputText value="#{existencia.producto.idProducto}" />

									<f:setPropertyActionListener
										target="#{existenciasController.existencia}"
										value="#{existencia}">
									</f:setPropertyActionListener>
								</p:commandLink>

							</p:column>

							<p:column headerText="ID-Existencia"
								filterBy="#{existencia.idExistencia}" filterMatchMode="contains">
								<h:outputText value="#{existencia.idExistencia}" />
							</p:column>

							<p:column headerText="Producto"
								filterBy="#{existencia.producto.nombrePr}">
								<h:outputText value="#{existencia.producto.nombrePr}" />
							</p:column>

							<p:column headerText="Grado"
								filterBy="#{existencia.grado.nombreGr}"
								filterMatchMode="contains">
								<h:outputText value="#{existencia.grado.nombreGr}" />
							</p:column>

							<p:column headerText="Concentración"
								filterBy="#{existencia.concentracion.nombreCon}"
								filterMatchMode="contains">
								<h:outputText value="#{existencia.concentracion.nombreCon}" />
							</p:column>

							<p:column headerText="Bodega"
								filterBy="#{existencia.bodega.nombreBg}">
								<h:outputText value="#{existencia.bodega.nombreBg}" />
							</p:column>

							<p:column headerText="Saldo" filterBy="#{existencia.cantidadE}"
								filterMatchMode="contains">
								<h:outputText value="#{existencia.cantidadE}" />
							</p:column>

							<p:column headerText="U.M."
								filterBy="#{existencia.unidadmedida.medidaUm}"
								filterMatchMode="contains">
								<h:outputText value="#{existencia.unidadmedida.siglaUm}" />
							</p:column>

							<p:column headerText="Tipo Producto"
								filterBy="#{existencia.producto.tipoproducto.nombreTprod}">
								<h:outputText
									value="#{existencia.producto.tipoproducto.nombreTprod}" />
							</p:column>
							<!-- **************************  Boton Ver Movimiento Inventario   *************************** -->

							<p:column headerText="Ver M.I.">
								<center>
									<p:commandLink
										action="#{existenciasController.listaMovimientoInventario(existencia.idExistencia)}"
										update=":formMovimientoI,@this" process="@this,tblExistencias"
										icon="ui-icon-check" oncomplete="PF('verMovimientoI').show();">

										<h:graphicImage value="/images/archivos/verMas.png"
											title="Ver Movimiento Existencia"
											style="border:0px solid #CAD6E0;" width="35" height="35" />

										<f:setPropertyActionListener
											target="#{existenciasController.existencia}"
											value="#{existencia}">
										</f:setPropertyActionListener>

									</p:commandLink>
								</center>
							</p:column>


							<!-- **************************  Boton Modificar   *************************** -->

							<p:column headerText="Acciones">
								<center>
									<p:commandLink update=":formModificarEx,@this"
										process="@this,tblExistencias" icon="ui-icon-check"
										oncomplete="PF('modificarEx').show();">

										<h:graphicImage value="/images/archivos/editar.png"
											title="Modificar" style="border:0px solid #CAD6E0;"
											width="35" height="35" />


										<f:setPropertyActionListener
											target="#{existenciasController.existencia}"
											value="#{existencia}">
										</f:setPropertyActionListener>
									</p:commandLink>

									<!-- **************************  Boton Eliminar   *************************** -->


									<p:commandLink process="@this" icon="ui-icon-check"
										onclick="PF('cdEliminarExistencia').show();">

										<h:graphicImage value="/images/archivos/basurero.png"
											title="Eliminar" style="border:0px solid #CAD6E0;" width="35"
											height="35" />


										<f:setPropertyActionListener
											target="#{existenciasController.existencia}"
											value="#{existencia}">
										</f:setPropertyActionListener>
									</p:commandLink>
								</center>
							</p:column>

						</p:dataTable>

					</p:fieldset>
				</p:panel>

			</h:form>

			<!-- **************************  Panel Detalle Existencia   *************************** -->

			<p:dialog id="panelVerDetalleExistencia" resizable="true"
				widgetVar="verDetalleExistencia" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="50%"
				header="Detalles Existencia">


				<h:form id="formDetalleExistencia">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<div class="ui-fluid">
							<p:panel id="producto" header="Producto"
								style="margin-bottom:20px">
								<h:panelGrid columns="1" cellpadding="10">
									<h:outputText
										value="#{existenciasController.existencia.producto.nombrePr}" />
								</h:panelGrid>
							</p:panel>
							<p:panel id="detalles" header="Detalles"
								style="margin-bottom:20px">
								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">


										<p:outputLabel id="lblPresentacion" for="presentacion"
											value="Presentación: " style="color:white!important" />
										<p:outputLabel id="presentacion"
											value="#{existenciasController.existencia.presentacion.nombrePrs}"
											size="31" />

										<p:outputLabel id="lblEstadoProducto" for="estadoProducto"
											value="Estado Producto: " style="color:white!important" />
										<p:outputLabel id="estadoProducto"
											value="#{existenciasController.existencia.estadoproducto.nombreEstp}"
											size="31" />

										<p:outputLabel id="lblGrado" for="grado" value="Grado: "
											style="color:white!important" />
										<p:outputLabel id="grado"
											value="#{existenciasController.existencia.grado.nombreGr}"
											size="31" />

										<p:outputLabel id="lblPosicionGiro" for="posicionGiro"
											value="Posición Giro:  " style="color:white!important" />
										<p:outputLabel id="posicionGiro"
											value="#{existenciasController.existencia.posgiro.nombrePg}"
											size="31" />

										<p:outputLabel id="lblHidratacion" for="hidratacion"
											value="Hidratación " style="color:white!important" />
										<p:outputLabel id="hidratacion"
											value="#{existenciasController.hidratacion(existenciasController.existencia.idHidratacion)}"
											size="31" />

										<p:outputLabel id="lblCaracteristica" for="caracteristica"
											value="Característica:  " style="color:white!important" />
										<p:outputLabel id="caracteristica"
											value="#{existenciasController.existencia.caracteristica.nombreCr}"
											size="31" />

										<p:outputLabel id="lblConcentracion" for="concentracion"
											value="Concentración: " style="color:white!important" />
										<p:outputLabel id="concentracion"
											value="#{existenciasController.existencia.concentracion.nombreCon}"
											size="31" />

										<p:outputLabel id="lblBodega" for="bodega" value="Bodega: "
											style="color:white!important" />
										<p:outputLabel id="bodega"
											value="#{existenciasController.existencia.bodega.nombreBg}"
											size="31" />

										<p:outputLabel id="lblPuntoReorden" for="puntoReorden"
											value="Punto de Reorden: " style="color:white!important" />
										<p:outputLabel id="puntoReorden"
											value="#{existenciasController.existencia.idUnidad}"
											size="31" />

										<p:outputLabel id="lblSaldoNeto" for="saldoNeto"
											value="Saldo Neto: " style="color:white!important" />
										<p:outputLabel id="saldoNeto"
											value="#{existenciasController.existencia.cantidadE}"
											size="31" />

										<p:outputLabel id="lblUnidad" for="unidad" value="Unidad: "
											style="color:white!important" />
										<p:outputLabel id="unidad"
											value="#{existenciasController.existencia.unidadmedida.siglaUm}"
											size="31" />

										<p:outputLabel id="lblUbicacion" for="ubicacion"
											value="Ubicación:  " style="color:white!important" />
										<p:outputLabel id="ubicacion"
											value="#{existenciasController.existencia.ubicaE}" size="31" />

										<p:outputLabel id="lblTipoProducto" for="tipoProducto"
											value="Tipo de Producto: " style="color:white!important" />
										<p:outputLabel id="tipoProducto"
											value="#{existenciasController.existencia.producto.tipoproducto}"
											size="31" />

										<p:outputLabel id="lblPureza" for="pureza" value="Pureza:  "
											style="color:white!important" />
										<p:outputLabel id="pureza"
											value="#{existenciasController.pureza(existenciasController.existencia.purezaE)}"
											size="31" />

										<p:outputLabel id="lblFechaC" for="fechaC"
											value="Fecha Caducidad: " style="color:white!important" />
										<p:outputLabel id="fechaC"
											value="#{existenciasController.existencia.fechacadE}"
											size="31" />

									</p:panelGrid>
								</center>
							</p:panel>
							<center>

								<br />

								<center>

									<h:panelGrid columns="1">



										<p:commandLink onclick="PF('verDetalleExistencia').hide();"
											process="@none">

											<p:graphicImage value="/images/archivos/atras.png" width="35"
												height="36" title="Atrás">
											</p:graphicImage>

										</p:commandLink>

									</h:panelGrid>

								</center>

							</center>
						</div>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Movimientos Inventarios Relacionados   *************************** -->

			<p:dialog id="panelMovimientosInventarios" resizable="true"
				widgetVar="verMovimientoI" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="80%"
				header="Movimientos Inventarios Relacionados">


				<h:form id="formMovimientoI">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<p:dataTable id="tblMInventario"
							value="#{existenciasController.movimientosinventarios}"
							var="movimiento"
							emptyMessage="No se pudo encontrar ninguna coincidencia"
							resizableColumns="true" rows="10" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">

							<p:column headerText="ID Exi.">
								<f:facet name="header">
									<h:outputText value="ID Exi." />
								</f:facet>
								<h:outputText value="#{movimiento.idExistencia}" />
							</p:column>

							<p:column headerText="Orden Inventario">
								<f:facet name="header">
									<h:outputText value="Orden Inventario" />
								</f:facet>
								<h:outputText
									value="#{movimiento.ordeninventario.idOrdeninventario}" />
							</p:column>

							<p:column headerText="Nombre Producto">
								<f:facet name="header">
									<h:outputText value="Nombre Producto" />
								</f:facet>
								<h:outputText value="#{existenciasController.producto(movimiento.idExistencia)}" />
							</p:column>

							<p:column headerText="F. Ingreso">
								<f:facet name="header">
									<h:outputText value="F. Ingreso" />
								</f:facet>
								<h:outputText value="#{movimiento.fechaMi}" />
							</p:column>

							<p:column headerText="Responsable">
								<f:facet name="header">
									<h:outputText value="Responsable" />
								</f:facet>
								<h:outputText
									value="#{movimiento.ordeninventario.responsableOi}" />
							</p:column>

							<p:column headerText="Tipo O.I.">
								<f:facet name="header">
									<h:outputText value="Tipo O.I." />
								</f:facet>
								<h:outputText
									value="#{movimiento.ordeninventario.tipordeninv.nombreToi}" />
							</p:column>

							<p:column headerText="Cantidad Mov.">
								<f:facet name="header">
									<h:outputText value="Cantidad Mov." />
								</f:facet>
								<h:outputText value="#{movimiento.cantidadMov}" />
							</p:column>

							<p:column headerText="Observaciones">
								<f:facet name="header">
									<h:outputText value="Observaciones" />
								</f:facet>
								<h:outputText value="#{movimiento.observacionesMov}" />
							</p:column>

						</p:dataTable>

						<div class="ui-fluid">

							<center>

								<br />

								<center>

									<h:panelGrid columns="1">



										<p:commandLink onclick="PF('verMovimientoI').hide();"
											process="@none">

											<p:graphicImage value="/images/archivos/atras.png" width="35"
												height="36" title="Atrás">
											</p:graphicImage>

										</p:commandLink>

									</h:panelGrid>

								</center>

							</center>
						</div>
					</p:fieldset>
				</h:form>
			</p:dialog>




			<!-- **************************  Panel - Dialogo de Registrar Nuevo   *************************** -->

			<p:dialog id="panelNuevoEx" resizable="true" widgetVar="nuevoEx"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="90%"
				header="Nueva Existencia">


				<h:form id="formNuevoEx">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<!-- **************************  Sub-Panel - Buscar Producto   *************************** -->
						<div class="ui-g">
							<div class="ui-g-4">
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
									legend="ListaProductos">

									<p:dataTable id="tblProducto"
										value="#{existenciasController.productos}" var="pro"
										emptyMessage="No se pudo encontrar ninguna coincidencia"
										rows="10" paginator="true"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
										rowsPerPageTemplate="5,10,15,20,30,50,75,100"
										style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
										paginatorPosition="bottom" rowKey="#{pro.idProducto}"
										selection="#{existenciasController.nuevoExistencia.producto}"
										selectionMode="single">
										<p:ajax event="rowSelect" update=":formNuevoEx" />

										<f:facet name="header">
											<p:outputPanel>
												<h:outputText value="Búsqueda por nombre: " />
												<p:inputText id="globalFilter"
													value="#{existenciasController.nombrePro}"
													style="width:150px" placeholder="Busqueda">
													<p:ajax event="keyup" update="tblProducto"
														listener="#{existenciasController.busquedaGloblal()}" />
												</p:inputText>
											</p:outputPanel>
										</f:facet>

										<p:column headerText="ID">
											<f:facet name="header">
												<h:outputText value="ID" />
											</f:facet>
											<h:outputText value="#{pro.idProducto}" />
										</p:column>

										<p:column headerText="Nombre">
											<f:facet name="header">
												<h:outputText value="NOMBRE" />
											</f:facet>
											<h:outputText value="#{pro.nombrePr}" />
										</p:column>

									</p:dataTable>

								</p:fieldset>
							</div>

							<!-- **************************  Sub-Panel - Registro General  *************************** -->

							<div class="ui-g-8 ui-g-nopad">
								<div class="ui-g-12">
									<!-- **************************  Sub-Panel - Producto  *************************** -->
									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
										-moz-border-radius: 10px 10px 10px 10px;
										-webkit-border-radius: 10px 10px 10px 10px;
										border: 0px solid #000000;
										border-style: double;
										border-width: 1px;
										border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Producto">
										<center>
											<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
												columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

												<p:outputLabel id="lblIdProducto" for="idProducto"
													value="Id Producto: " style="color:white!important" />
												<p:inputText id="idProducto"
													value="#{existenciasController.nuevoExistencia.producto.idProducto}"
													size="24" disabled="true" required="true"
													requiredMessage="Debe seleccionar un Producto de la tabla" />

												<p:outputLabel id="lblNombrePro" for="nombrePro"
													value="Nombre: " style="color:white!important" />
												<p:inputText id="nombrePro"
													value="#{existenciasController.nuevoExistencia.producto.nombrePr}"
													size="24" disabled="true" required="true"
													requiredMessage="Debe seleccionar un Producto de la tabla" />


											</p:panelGrid>
										</center>
									</p:fieldset>
									<br />

									<!-- **************************  Sub-Panel - Informacion Tecnica   *************************** -->
									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Informacion Tecnica">
										<div class="ui-fluid">
											<center>
												<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
													columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

													<p:outputLabel id="lblPresentacion" for="presentacion"
														value="Presentación: " style="color:white!important" />
													<p:selectOneMenu id="presentacion"
														value="#{existenciasController.presentacionSelect}">
														<p:ajax listener="#{existenciasController.changeEmpty}" />
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.presentacion}" />
														<f:selectItems
															value="#{existenciasController.presentaciones}"
															itemLabel="#{presentacion.nombrePrs}"
															itemValue="#{presentacion}" var="presentacion">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblEstadoPro" for="estadoPro"
														value="Estado Producto: " style="color:white!important" />
													<p:selectOneMenu id="estadoPro"
														value="#{existenciasController.estadoProSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.estadoproducto}" />
														<f:selectItems
															value="#{existenciasController.estadoproductos}"
															itemLabel="#{estadoPro.nombreEstp}"
															itemValue="#{estadoPro}" var="estadoPro">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblGrado" for="grado" value="Grado: "
														style="color:white!important" />
													<p:selectOneMenu id="grado"
														value="#{existenciasController.gradoSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.grado}" />
														<f:selectItems value="#{existenciasController.grados}"
															itemLabel="#{grado.nombreGr}" itemValue="#{grado}"
															var="grado">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblPosicionGiro" for="posicionGiro"
														value="Posición Giro: " style="color:white!important" />
													<p:selectOneMenu id="posicionGiro"
														value="#{existenciasController.posGiroSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.posgiro}" />
														<f:selectItems value="#{existenciasController.posgiros}"
															itemLabel="#{posgiro.nombrePg}" itemValue="#{posgiro}"
															var="posgiro">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblHidratacion" for="hidratacion"
														value="Hidratación: " style="color:white!important" />
													<p:selectOneMenu id="hidratacion"
														value="#{existenciasController.hidratacionSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.hidratacion}" />
														<f:selectItems
															value="#{existenciasController.hidrataciones}"
															itemLabel="#{hidratacion.nombreHi}"
															itemValue="#{hidratacion}" var="hidratacion">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblCaracteristica" for="caracteristica"
														value="Característica: " style="color:white!important" />
													<p:selectOneMenu id="caracteristica"
														value="#{existenciasController.caracteristicaSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.caracteristica}" />
														<f:selectItems
															value="#{existenciasController.caracteristicas}"
															itemLabel="#{caracteristica.nombreCr}"
															itemValue="#{caracteristica}" var="caracteristica">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblConcentracion" for="concentracion"
														value="Concentración: " style="color:white!important" />
													<p:selectOneMenu id="concentracion"
														value="#{existenciasController.concentracionSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.concentracion}" />
														<f:selectItems
															value="#{existenciasController.concentracions}"
															itemLabel="#{concentracion.nombreCon}"
															itemValue="#{concentracion}" var="concentracion">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblTipo" for="tipo" value="Tipo: "
														style="color:white!important" />
													<p:selectOneMenu id="tipo"
														value="#{existenciasController.tipoproductoSelect}"
														required="true"
														requiredMessage="Debe selecionar una opción">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="" />
														<f:selectItems
															value="#{existenciasController.tipoproductos}"
															itemLabel="#{tipoPro.nombreTprod}" itemValue="#{tipoPro}"
															var="tipoPro">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblPureza" for="pureza" value="Puerza: "
														style="color:white!important" />
													<p:selectOneMenu id="pureza"
														value="#{existenciasController.purezaSelect}"
														required="true"
														requiredMessage="Debe selecionar una opción">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="" />
														<f:selectItems value="#{existenciasController.purezas}"
															itemLabel="#{pureza.nombrePureza}" itemValue="#{pureza}"
															var="pureza">
														</f:selectItems>
													</p:selectOneMenu>

												</p:panelGrid>
											</center>
										</div>
									</p:fieldset>
									<br />

									<!-- **************************  Sub-Panel - Informacion General   *************************** -->
									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Informacion General">
										<div class="ui-fluid">



											<center>
												<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
													columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

													<p:outputLabel id="lblBodega" for="bodega" value="Bodega: "
														style="color:white!important" />
													<p:selectOneMenu id="bodega"
														value="#{existenciasController.bodegaSelect}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="#{existenciasController.bodega}" />
														<f:selectItems value="#{existenciasController.bodegas}"
															itemLabel="#{bodega.nombreBg}" itemValue="#{bodega}"
															var="bodega">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblFecha" for="fecha"
														value="Fecha de Cducidad: " style="color:white!important" />
													<p:calendar id="fecha"
														value="#{existenciasController.nuevoExistencia.fechacadE}"
														showOn="button" />

													<p:outputLabel id="lblSaldoNeto" for="saldoNeto"
														value="Saldo Neto: " style="color:white!important" />
													<p:inputNumber id="saldoNeto"
														value="#{existenciasController.nuevoExistencia.cantidadE}"
														required="true" requiredMessage="Debe ingresar un saldo"
														size="30" maxlength="100">
													</p:inputNumber>

													<p:outputLabel id="lblUnidadM" for="unidadM"
														value="Unidad Medida: " style="color:white!important" />
													<p:selectOneMenu id="unidadM"
														value="#{existenciasController.unidadmedida2Select}"
														required="true"
														requiredMessage="Debe selecionar una opción">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="" />
														<f:selectItems
															value="#{existenciasController.unidadmedidas}"
															itemLabel="#{unidadM.siglaUm}" itemValue="#{unidadM}"
															var="unidadM">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel id="lblPuntoReorden" for="puntoReorden"
														value="Punto de Reorden: " style="color:white!important" />
													<p:inputNumber id="puntoReorden"
														value="#{existenciasController.nuevoExistencia.tasausoE}"
														size="30" maxlength="100">
													</p:inputNumber>

													<p:outputLabel id="lblUbicacion" for="ubicacion"
														value="Ubicación: " style="color:white!important" />
													<p:inputText id="ubicacion"
														value="#{existenciasController.nuevoExistencia.ubicaE}"
														required="true"
														requiredMessage="Debe ingresar la ubicación" size="30"
														maxlength="100">
													</p:inputText>


												</p:panelGrid>
											</center>
											<br />

										</div>


									</p:fieldset>

								</div>
							</div>

						</div>

						<br />
						<br />


						<center>

							<h:panelGrid columns="2">

								<p:commandLink
									actionListener="#{existenciasController.agregarExistencia}"
									process="@this,formNuevoEx"
									oncomplete="PF('filterExistenciasTable').filter();"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formNuevoEx">

									<center>

										<h:graphicImage value="/images/archivos/guardar.png"
											title="Guardar" style="border:0px solid #CAD6E0;" width="36"
											height="35" />

									</center>

								</p:commandLink>

								<p:commandLink onclick="PF('nuevoEx').hide();" process="@none">

									<p:graphicImage value="/images/archivos/atras.png" width="35"
										height="36" title="Atrás">
									</p:graphicImage>

								</p:commandLink>

							</h:panelGrid>

						</center>



					</p:fieldset>
				</h:form>
			</p:dialog>


			<!-- **************************  Panel de modificar   *************************** -->

			<p:dialog id="panelModificarEx" resizable="true"
				widgetVar="modificarEx" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="60%"
				header="Modificar Norma">


				<h:form id="formModificarEx">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<!-- **************************  Panel - Producto  *************************** -->
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
							legend="Producto">
							<center>
								<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
									columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

									<p:outputLabel id="lblIdProducto" for="idProducto"
										value="Id Producto: " style="color:white!important" />
									<p:inputText id="idProducto"
										value="#{existenciasController.existencia.producto.idProducto}"
										size="24" disabled="true" />

									<p:outputLabel id="lblNombrePro" for="nombrePro"
										value="Nombre: " style="color:white!important" />
									<p:inputText id="nombrePro"
										value="#{existenciasController.existencia.producto.nombrePr}"
										size="24" disabled="true" />


								</p:panelGrid>
							</center>
						</p:fieldset>
						<br />

						<!-- **************************  Panel - Informacion Tecnica   *************************** -->
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
							legend="Informacion Tecnica">
							<div class="ui-fluid">
								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

										<p:outputLabel id="lblPresentacion" for="presentacion"
											value="Presentación: " style="color:white!important" />
										<p:selectOneMenu id="presentacion"
											value="#{existenciasController.existencia.presentacion.idPresentacion}">

											<f:selectItems
												value="#{existenciasController.presentaciones}"
												itemLabel="#{presentacion.nombrePrs}"
												itemValue="#{presentacion.idPresentacion}"
												var="presentacion">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblEstadoPro" for="estadoPro"
											value="Estado Producto: " style="color:white!important" />
										<p:selectOneMenu id="estadoPro"
											value="#{existenciasController.existencia.estadoproducto.idEstadoprod}">

											<f:selectItems
												value="#{existenciasController.estadoproductos}"
												itemLabel="#{estadoPro.nombreEstp}"
												itemValue="#{estadoPro.idEstadoprod}" var="estadoPro">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblGrado" for="grado" value="Grado: "
											style="color:white!important" />
										<p:selectOneMenu id="grado"
											value="#{existenciasController.existencia.grado.idGrado}">

											<f:selectItems value="#{existenciasController.grados}"
												itemLabel="#{grado.nombreGr}" itemValue="#{grado.idGrado}"
												var="grado">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblPosicionGiro" for="posicionGiro"
											value="Posición Giro: " style="color:white!important" />
										<p:selectOneMenu id="posicionGiro"
											value="#{existenciasController.existencia.posgiro.idPosgiro}">

											<f:selectItems value="#{existenciasController.posgiros}"
												itemLabel="#{posgiro.nombrePg}"
												itemValue="#{posgiro.idPosgiro}" var="posgiro">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblHidratacion" for="hidratacion"
											value="Hidratación: " style="color:white!important" />
										<p:selectOneMenu id="hidratacion"
											value="#{existenciasController.existencia.idHidratacion}">

											<f:selectItems value="#{existenciasController.hidrataciones}"
												itemLabel="#{hidratacion.nombreHi}"
												itemValue="#{hidratacion.idHidratacion}" var="hidratacion">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblCaracteristica" for="caracteristica"
											value="Característica: " style="color:white!important" />
										<p:selectOneMenu id="caracteristica"
											value="#{existenciasController.existencia.caracteristica.idCaracteristica}">

											<f:selectItems
												value="#{existenciasController.caracteristicas}"
												itemLabel="#{caracteristica.nombreCr}"
												itemValue="#{caracteristica.idCaracteristica}"
												var="caracteristica">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblConcentracion" for="concentracion"
											value="Concentración: " style="color:white!important" />
										<p:selectOneMenu id="concentracion"
											value="#{existenciasController.existencia.concentracion.idConcentracion}">

											<f:selectItems
												value="#{existenciasController.concentracions}"
												itemLabel="#{concentracion.nombreCon}"
												itemValue="#{concentracion.idConcentracion}"
												var="concentracion">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblTipo" for="tipo" value="Tipo: "
											style="color:white!important" />
										<p:selectOneMenu id="tipo"
											value="#{existenciasController.existencia.tipoproducto.idTipoprod}"
											required="true" requiredMessage="Debe selecionar una opción">

											<f:selectItems value="#{existenciasController.tipoproductos}"
												itemLabel="#{tipoPro.nombreTprod}"
												itemValue="#{tipoPro.idTipoprod}" var="tipoPro">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblPureza" for="pureza" value="Puerza: "
											style="color:white!important" />
										<p:selectOneMenu id="pureza"
											value="#{existenciasController.existencia.purezaE}">

											<f:selectItems value="#{existenciasController.purezas}"
												itemLabel="#{pureza.nombrePureza}"
												itemValue="#{pureza.idPureza}" var="pureza">
											</f:selectItems>
										</p:selectOneMenu>

									</p:panelGrid>
								</center>
							</div>
						</p:fieldset>
						<br />

						<!-- **************************  Panel - Informacion General   *************************** -->
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
							legend="Informacion General">
							<div class="ui-fluid">



								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

										<p:outputLabel id="lblBodega" for="bodega" value="Bodega: "
											style="color:white!important" />
										<p:selectOneMenu id="bodega"
											value="#{existenciasController.existencia.bodega.idBodega}">

											<f:selectItems value="#{existenciasController.bodegas}"
												itemLabel="#{bodega.nombreBg}"
												itemValue="#{bodega.idBodega}" var="bodega">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblFecha" for="fecha"
											value="Fecha de Cducidad: " style="color:white!important" />
										<p:calendar id="fecha"
											value="#{existenciasController.existencia.fechacadE}"
											showOn="button" />

										<p:outputLabel id="lblSaldoNeto" for="saldoNeto"
											value="Saldo Neto: " style="color:white!important" />
										<p:inputNumber id="saldoNeto"
											value="#{existenciasController.existencia.cantidadnetaE}"
											size="30" maxlength="100" required="true"
											requiredMessage="Debe ingresar el saldo">
										</p:inputNumber>

										<p:outputLabel id="lblUnidadM" for="unidadM"
											value="Unidad Medida: " style="color:white!important" />
										<p:selectOneMenu id="unidadM"
											value="#{existenciasController.existencia.unidadmedida.idUmedida}"
											required="true" requiredMessage="Debe selecionar una opción">

											<f:selectItems value="#{existenciasController.unidadmedidas}"
												itemLabel="#{unidadM.siglaUm}"
												itemValue="#{unidadM.idUmedida}" var="unidadM">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblPuntoReorden" for="puntoReorden"
											value="Punto de Reorden: " style="color:white!important" />
										<p:inputNumber id="puntoReorden"
											value="#{existenciasController.existencia.cantidadE}"
											size="30" maxlength="100">
										</p:inputNumber>

										<p:outputLabel id="lblUbicacion" for="ubicacion"
											value="Ubicación: " style="color:white!important" />
										<p:inputText id="ubicacion"
											value="#{existenciasController.existencia.ubicaE}"
											required="true" requiredMessage="Debe ingresar la ubicacion"
											size="30" maxlength="100">
										</p:inputText>


									</p:panelGrid>
								</center>
								<br />

							</div>


						</p:fieldset>

						<center>

							<br /> <br />


							<center>

								<h:panelGrid columns="2">

									<p:commandLink
										actionListener="#{existenciasController.modificarExistencia}"
										process="@this,formModificarEx"
										oncomplete="PF('filterExistenciasTable').filter();"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formModificarEx">

										<center>

											<h:graphicImage value="/images/archivos/guardar.png"
												title="Guardar" style="border:0px solid #CAD6E0;" width="36"
												height="35" />

										</center>

									</p:commandLink>

									<p:commandLink onclick="PF('modificarEx').hide();"
										process="@none">

										<p:graphicImage value="/images/archivos/atras.png" width="35"
											height="36" title="Atrás">
										</p:graphicImage>

									</p:commandLink>

								</h:panelGrid>

							</center>



						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel de Eliminar   *************************** -->

			<h:form id="formEliminarEx">
				<p:confirmDialog
					message="¿Esta seguro(a) que desea eliminar la existencia seleccionada"
					header="Eliminar Existencia" severity="warn"
					widgetVar="cdEliminarExistencia">
					<center>

						<p:commandButton value="Aceptar"
							oncomplete="PF('filterExistenciasTable').filter();"
							onsuccess="PF('cdEliminarExistencia').hide();"
							actionListener="#{existenciasController.eliminarExistencia}"
							update="@([id$=messagesForm],[id$=formprincipal])" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdEliminarExistencia').hide();" type="button" />

					</center>

				</p:confirmDialog>


			</h:form>

		</h:body>


		<script type="text/javascript">
			function start(){
			PF('statusDialog').show();
			} 

			function stop(){
			PF('statusDialog').hide();
			}

		</script>

		<!-- **************************  Scroll en dialogo   *************************** -->
		<style type="text/css">
			.ui-dialog-content {
				max-width: 1500px !important;
				max-height: 500px !important;
				margin-bottom: 5px !important;
			}
		</style>

	</ui:define>
</ui:composition>