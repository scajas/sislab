<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/common.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:v="http://validators.epn.edu.ec.com"
	xmlns:ps="http://primefaces.org/apark"
	xmlns:pe="http://primefaces.org/ui/extensions">


	<ui:define name="pageTitle">Proforma</ui:define>
	<ui:define name="body">

		<h:head>

			<script type="text/javascript">
	
		//<![CDATA[
		function printDiv(divName){
			var f =new Date();
			var printContents =document.getElementById(divName).innerHTML;
			var originalContents =document.body.innerHTML;
			document.body.innerHTML=printContents;
			window.print();
			document.body.innerHTML=originalContents;
		}

		//]]>

	</script>
		</h:head>


		<h:body onload="rc();">

			<p:growl id="messagesForm" showDetail="true" sticky="false"
				autoupdate="true" life="3000" />
			<h:form id="formprincipal">

				<p:remoteCommand name="rc"
					action="#{proformaController.limpiarTodosCampos()}" update="formprincipal" />

				<p:panel>

					<br />

					<!-- Boton De Nuevo -->
					<center>
						<p:commandButton value="Nuevo" icon="fa fa-file"
							title="Registrar Nueva Proforma"
							style="width: 125px; border-radius: 3px 3px 3px 3px;"
							process="@this" onclick="PF('nuevoPro').show()" update="@this,formAgregarPro">

						</p:commandButton>

					</center>
					<p:fieldset legend="Buscar Proformas"
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
						<center>
							<h:form id="formBuscar">
								<div class="ui-fluid">

									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

										<p:outputLabel value="ID Proforma:" for="idProforma"
											style="color:white!important" />
										<p:inputText id="idProforma"
											value="#{proformaController.proformaBuscar.idProforma}"
											size="24" />

										<p:outputLabel value="Estado:" for="estado"
											style="color:white!important" />
										<p:selectOneMenu id="estado"
											value="#{proformaController.proformaBuscar.estadoPo}"
											size="24">
											<f:selectItem itemLabel="Seleccione..." itemValue="" />
											<f:selectItem itemLabel="Aceptada" itemValue="Aceptada" />
											<f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
											<f:selectItem itemLabel="Rechazada" itemValue="Rechazada" />
										</p:selectOneMenu>

										<p:outputLabel value="Cliente:" for="cliente"
											style="color:white!important" />
										<p:inputText id="cliente"
											value="#{proformaController.cliente.nombreCl}" size="24" />

										<p:outputLabel value="RUC/Cédula:" for="ruc_ci"
											style="color:white!important" />
										<p:inputText id="ruc_ci"
											value="#{proformaController.cliente.rucCl}" size="24" />

										<h:outputLabel value="Fecha desde: "
											style="color:white!important; font-size: 17px" />
										<p:calendar id="fechaInicio"
											value="#{proformaController.fechaInicio}"
											pattern="dd/MM/yyyy" locale="es"
											onkeypress="return permite(event, 'none')"
											requiredMessage="Fecha Inicial Requerida" navigator="true"
											effect="fadeIn" effectDuration="100" showOn="button"
											size="24">
											<p:ajax event="dateSelect" update="fechaFinal" />
											<p:ajax event="keyup" update="fechaFinal" />
										</p:calendar>

										<h:outputLabel value="Fecha hasta: "
											style="color:white!important; font-size: 17px" />
										<p:calendar id="fechaFinal"
											disabled="#{proformaController.disabledSelectItem() != true}"
											value="#{proformaController.fechaFinal}"
											mindate="#{proformaController.fechaInicio}"
											pattern="dd/MM/yyyy" locale="es" required="true"
											onkeypress="return permite(event, 'none')"
											requiredMessage="Fecha Final Requerida" navigator="true"
											effect="fadeIn" effectDuration="100" showOn="button"
											size="24">

										</p:calendar>
									</p:panelGrid>

									<br /> <br />


									<center>
										<p:commandLink
											actionListener="#{proformaController.buscarProforma}"
											update="@([id$=tblProforma]),@([id$=messagesForm])"
											process="@this,formBuscar">

											<h:graphicImage value="/images/archivos/busqueda.png"
												class="btn bt-success" title="Buscar"
												style="border:0px solid #CAD6E0;" width="35" height="35 " />
										</p:commandLink>

									</center>

									<br />
								</div>
							</h:form>
						</center>
					</p:fieldset>
					<br />
					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
						<p:dataTable id="tblProforma"
							value="#{proformaController.proformas}" var="proforma"
							emptyMessage="No se pudo encontrar ninguna coincidencia"
							rows="10" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
						-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
						box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">


							<p:column headerText="Id Proforma">
								<h:outputText value="#{proforma.idProforma}" />
							</p:column>

							<p:column headerText="Fecha">
								<h:outputText value="#{proforma.fecha}" />
							</p:column>

							<p:column headerText="Cliente">
								<h:outputText value="#{proforma.cliente.nombreCl}" />
							</p:column>

							<p:column headerText="SubTotal">
								<h:outputText value="#{proforma.subtotalPo}" />
							</p:column>

							<p:column headerText="IVA">
								<h:outputText value="#{proforma.ivaPo}" />
							</p:column>

							<p:column headerText="Total">
								<h:outputText value="#{proforma.totalPo}" />
							</p:column>

							<p:column headerText="Estado">
								<h:outputText value="#{proforma.estadoPo}" />
							</p:column>

							<p:column headerText="Estado">
								<p:commandLink update="@this,formEditarEstado"
									process="@this,tblProforma" icon="ui-icon-check"
									action="#{proformaController.validarEstadoPro(proforma, 'editarEstado')}">

									<h:outputText value="Editar estado" />

									<f:setPropertyActionListener
										target="#{proformaController.proforma}" value="#{proforma}">
									</f:setPropertyActionListener>
								</p:commandLink>

							</p:column>

							<p:column headerText="Detalle">
								<center>

									<p:commandLink update="@this,formVerPro"
										process="@this,tblProforma" icon="ui-icon-check"
										action="#{proformaController.cargarDetalleProforma(proforma.idProforma)}"
										oncomplete="PF('verPro').show();">

										<h:graphicImage value="/images/archivos/verMas.png"
											title="Ver Proforma" style="border:0px solid #CAD6E0;"
											width="35" height="35" />


										<f:setPropertyActionListener
											target="#{proformaController.proforma}" value="#{proforma}">
										</f:setPropertyActionListener>
									</p:commandLink>

								</center>


							</p:column>

							<p:column headerText="Acciones">
								<center>

									<!-- **************************  Boton Editar   *************************** -->
									<p:commandLink icon="ui-icon-check" process="@this,tblProforma"
										action="#{proformaController.cargarDetalleProformaEdit(proforma.idProforma)}"
										oncomplete="PF('editarPro').show();" update="formEditarPro">

										<h:graphicImage value="/images/archivos/editar.png"
											title="Modificar" style="border:0px solid #CAD6E0;"
											width="35" height="35" />

										<f:setPropertyActionListener
											target="#{proformaController.proforma}" value="#{proforma}">
										</f:setPropertyActionListener>


									</p:commandLink>

									<!-- **************************  Boton Eliminar   *************************** -->


									<p:commandLink process="@this,tblProforma" icon="ui-icon-check"
										action="#{proformaController.validarEstadoPro(proforma, 'cdEliminarPro')}">

										<h:graphicImage value="/images/archivos/basurero.png"
											title="Eliminar" style="border:0px solid #CAD6E0;" width="35"
											height="35" />


										<f:setPropertyActionListener
											target="#{proformaController.proforma}" value="#{proforma}">
										</f:setPropertyActionListener>

									</p:commandLink>

								</center>
							</p:column>

						</p:dataTable>
					</p:fieldset>

					<br />
					<br />

				</p:panel>

			</h:form>

			<!-- **************************  Panel - Dialogo de Registrar Nuevo   *************************** -->

			<p:dialog id="panelNuevoPro" resizable="true" widgetVar="nuevoPro"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="70%"
				header="Agregar Movimiento Inventario">


				<h:form id="formAgregarPro">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
							<center>
								<div class="ui-g">
									<div class="ui-g-4"></div>

									<div class="ui-g-4">
										<table>
											<tr>
												<td class="EncabezadoTitulo" align="center" colspan="2">
													<p:outputLabel value="ESCUELA POLITÉCNICA NACIONAL"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 15px; " />
												</td>
											</tr>

											<tr>
												<td class="EncabezadoTitulo2" align="center" colspan="2">
													<p:outputLabel
														value="Campús Politécnico J. Rubén Orellana R."
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel
														value="Ladrón de Guevara E11-253 y Andalucia"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="Telf.: 2976 300"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="P.O. Box: 17-01-2759 / QUITO-ECUADOR"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>

										</table>
									</div>
									<div class="ui-g-4"></div>
								</div>
								<br /> <br />
							</center>

							<!-- Buscar Cliente -->

							<p:accordionPanel>
								<p:tab title="⠀⠀⠀">
									<center>
										<p:fieldset legend="Buscar Cliente"
											style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
											<br />

											<div class="ui-g">
												<div class="ui-g-10">
													<p:panelGrid layout="grid" columns="4"
														styleClass="ui-panelgrid-blank"
														columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
														style="border: solid;border-width: 1px; border-color: #E6E6E6;text-align: left;">

														<p:outputLabel value="Nombre: " for="clienteNom"
															style="color:white!important" />
														<p:inputText id="clienteNom"
															value="#{proformaController.cliente.nombreCl}" size="24" />

														<p:outputLabel value="RUC/Cédula:" for="ruc_ci"
															style="color:white!important" />
														<p:inputText id="ruc_ci"
															value="#{proformaController.cliente.rucCl}" size="24" />

													</p:panelGrid>
												</div>

												<div class="ui-g-2">
													<p:commandButton icon="fa fa-search-plus"
														style="border:none;text-align: left; width: 110px;"
														value="Buscar" process="@this, ruc_ci, clienteNom "
														actionListener="#{proformaController.buscarClientes}"
														onsuccess="PF('listadoCli').show()">
													</p:commandButton>
												</div>
											</div>


											<br />

										</p:fieldset>

										<br />

									</center>

									<!-- Datos de usuario cargado -->
									<center>
										<p:fieldset
											style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

											<p:panelGrid columns="4" layout="grid" style="border:none;">

												<p:outputLabel for="fecha" value="Fecha: "
													style="font-weight:bold" />
												<p:outputLabel id="fecha"
													value="#{proformaController.cambioFecha(proformaController.nuevoProforma.fecha)}" />

											</p:panelGrid>

											<p:panelGrid columns="4" layout="grid"
												styleClass="ui-noborder" style="border:none;">

												<p:outputLabel for="cliente" value="Cliente: "
													style="font-weight:bold" />
												<p:outputLabel id="cliente"
													value="#{proformaController.nuevoProforma.cliente.nombreCl}" />

												<p:outputLabel for="telefono" value="Telefono: "
													style="font-weight:bold" />
												<p:outputLabel id="telefono"
													value="#{proformaController.nuevoProforma.cliente.telefonoCl}" />

												<p:outputLabel for="ruc" value="Ruc: "
													style="font-weight:bold" />
												<p:outputLabel id="ruc"
													value="#{proformaController.nuevoProforma.cliente.rucCl}" />

												<p:outputLabel for="ci" value="CI: "
													style="font-weight:bold" />
												<p:outputLabel id="ci"
													value="#{proformaController.nuevoProforma.cliente.cedula}" />

												<p:outputLabel for="direccion" value="Dirección: "
													style="font-weight:bold" />
												<p:outputLabel id="direccion"
													value="#{proformaController.nuevoProforma.cliente.direccionCl}" />

												<p:outputLabel for="contacto" value="Contacto: "
													style="font-weight:bold" />
												<p:outputLabel id="contacto"
													value="#{proformaController.nuevoProforma.representantePo}" />

											</p:panelGrid>


										</p:fieldset>
									</center>

								</p:tab>
								<br />
								<br />

							</p:accordionPanel>

							<!-- Agregar -->

							<br />
							<center>
								<p:commandButton value="Agregar" icon="fa fa-plus"
									title="Agregar Nuevo Detalle Proforma"
									style="width: 125px; border-radius: 3px 3px 3px 3px;"
									process="@this"
									actionListener="#{proformaController.validarCliente}"
									update="@this,@([id$=messagesForm])">

								</p:commandButton>
							</center>
							<br />
							<center>
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panel id="detallePro" header="Detalle Proforma">
										<p:dataTable id="tblDetallePro"
											value="#{proformaController.detalleProformas}"
											var="detallePro" sortBy="#{detallePro.totalservicioPo}"
											emptyMessage="No se han registrado detalles de proforma, clic en el boton agregar para registrar.">


											<p:column headerText="ID">
												<h:outputText value="#{detallePro.servicio.idServicio}" />
											</p:column>

											<p:column headerText="Servicio">
												<h:outputText value="#{detallePro.servicio.nombreS}" />
											</p:column>

											<p:column headerText="Método">
												<h:outputText value="#{detallePro.metodo.nombreMt}" />
											</p:column>

											<p:column headerText="Unidad/Laboratorio">
												<h:outputText
													value="#{detallePro.servicio.laboratorio.nombreL}" />
											</p:column>

											<p:column headerText="Cantidad">
												<h:outputText value="#{detallePro.cantidadPo}" />
											</p:column>

											<p:column headerText="V. U.">
												<h:outputText value="#{detallePro.servicio.precioS}" />
											</p:column>

											<p:column headerText="T. S.">
												<h:outputText value="#{detallePro.totalservicioPo}" />
											</p:column>

											<p:column headerText="Acciones">
												<center>

													<!-- **************************  Boton Editar   *************************** -->
													<p:commandLink icon="ui-icon-check"
														oncomplete="PF('editarDetallePro').show();"
														action="#{proformaController.guardarTempDetallePro}" actionListener="#{proformaController.cambiarIdTempPanel(0,0)}"
														update="formEditarDetallePro">

														<h:graphicImage value="/images/archivos/editar.png"
															title="Modificar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{proformaController.detalleProforma}"
															value="#{detallePro}">
														</f:setPropertyActionListener>

													</p:commandLink>

													<!-- **************************  Boton Eliminar   *************************** -->


													<p:commandLink process="@this" icon="ui-icon-check"
														onclick="PF('cdEliminarDetallePro').show();"
														actionListener="#{proformaController.cambiarIdTempPanel(0,0)}">

														<h:graphicImage value="/images/archivos/basurero.png"
															title="Eliminar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{proformaController.detalleProforma}"
															value="#{detallePro}">
														</f:setPropertyActionListener>

													</p:commandLink>

												</center>
											</p:column>

											<p:columnGroup type="footer">
												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="Sub Total:" />
													<p:column
														footerText="#{proformaController.nuevoProforma.subtotalPo}" />

												</p:row>

												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="IVA (#{proformaController.nuevoProforma.cliente.tipocliente.ivaTcl} %): " />
													<p:column
														footerText="#{proformaController.nuevoProforma.ivaPo}" />
												</p:row>

												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="Total: " />
													<p:column
														footerText="#{proformaController.nuevoProforma.totalPo}" />
												</p:row>
											</p:columnGroup>
										</p:dataTable>
									</p:panel>


								</p:fieldset>

								<br />

								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panelGrid layout="grid" columns="2"
										styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
										style="border: solid;border-width: 1px; border-color: #E6E6E6;text-align: left;">

										<p:outputLabel value="Observaciones: " for="observaciones"
											style="color:white!important" />
										<p:inputText id="observaciones"
											value="#{proformaController.nuevoProforma.obserPo}" size="24" />

									</p:panelGrid>

								</p:fieldset>
							</center>

							<center>

								<br /> <br />

								<h:panelGrid columns="2">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Confirmar" icon="fa fa-save"
										process="@this,formAgregarPro"
										disabled="#{proformaController.disabledButton() != true}"
										update="formConfirmaNuevaProforma"
										onsuccess="PF('cdConfirmarProforma').show();">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left" onclick="PF('nuevoPro').hide();"
										process="@none" value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>


			<!-- **************************  Panel - Agregar Detalle Proforma  *************************** -->
			<p:dialog id="panelNuevoDetallePro" resizable="true"
				widgetVar="detallePro" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="70%"
				header="Agregar Detalle Proforma">


				<h:form id="formDetallePro">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<!-- **************************  Sub-Panel - Buscar Servicio   *************************** -->
						<div class="ui-g">
							<div class="ui-g-6">
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
									-moz-border-radius: 10px 10px 10px 10px;
									-webkit-border-radius: 10px 10px 10px 10px;
									border: 0px solid #000000;
									border-style: double;
									border-width: 1px;
									border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
									legend="Servicio">

									<p:dataTable id="tblServicio"
										value="#{proformaController.servicios}" var="serv"
										widgetVar="filterServiciosTable"
										emptyMessage="No se pudo encontrar ninguna coincidencia"
										filteredValue="#{proformaController.filtroServicios}" rows="5"
										paginator="true"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
										rowKey="#{serv.idServicio}"
										selection="#{proformaController.nuevodetalleProforma.servicio}"
										selectionMode="single">
										<p:ajax event="rowSelect"
											listener="#{proformaController.validarDetallePro}"
											update="@([id$=messagesForm])" />

										<p:column headerText="ID" filterBy="#{serv.idServicio}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.idServicio}" />
										</p:column>

										<p:column headerText="Nombre" filterBy="#{serv.nombreS}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.nombreS}" />
										</p:column>

										<p:column headerText="Laboratorio"
											filterBy="#{serv.laboratorio.nombreL}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.laboratorio.nombreL}" />
										</p:column>

									</p:dataTable>

								</p:fieldset>
							</div>

							<!-- **************************  Sub-Panel - Registro General  *************************** -->

							<div class="ui-g-6 ui-g-nopad">
								<div class="ui-g-12">
									<!-- **************************  Sub-Panel - Informacion Servicio   *************************** -->
									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
										-moz-border-radius: 10px 10px 10px 10px;
										-webkit-border-radius: 10px 10px 10px 10px;
										border: 0px solid #000000;
										border-style: double;
										border-width: 1px;
										border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Informacion Servicio">

										<div class="ui-fluid">

											<center>
												<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
													columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

													<p:outputLabel for="servicio" value="Servicio: "
														style="color:white!important" />
													<p:outputLabel id="servicio"
														value="#{proformaController.nuevodetalleProforma.servicio.nombreS}"
														size="30" maxlength="100" />


													<p:outputLabel for="metodo" value="Método: "
														style="color:white!important" />
													<p:selectOneMenu id="metodo"
														value="#{proformaController.nuevodetalleProforma.metodo}">
														<f:selectItem itemLabel="Por favor seleccione"
															itemValue="ayuda" />
														<f:selectItems value="#{proformaController.metodos}"
															itemLabel="#{metodo.nombreMt}" itemValue="#{metodo}"
															var="metodo">
														</f:selectItems>
													</p:selectOneMenu>

													<p:outputLabel for="laboratorio" value="Laboratorio: "
														style="color:white!important" />
													<p:outputLabel id="laboratorio"
														value="#{proformaController.nuevodetalleProforma.servicio.laboratorio.nombreL}"
														size="30" maxlength="100" />

													<p:outputLabel for="precio" value="Precio UNIT.: "
														style="color:white!important" />
													<p:outputLabel id="precio"
														value="#{proformaController.nuevodetalleProforma.servicio.precioS}"
														size="30" maxlength="100" />

													<p:outputLabel for="cantidad" value="Cantidad: "
														style="color:white!important" />
													<p:inputNumber id="cantidad"
														value="#{proformaController.nuevodetalleProforma.cantidadPo}"
														required="true" emptyValue="zero"
														requiredMessage="Debe ingresar la cantidad" size="30"
														maxlength="100">
														<p:ajax event="keyup" async="false"
															listener="#{proformaController.calcularTotal}" />
														<p:ajax event="keyup" async="false" update="totalPro" />
													</p:inputNumber>

													<p:outputLabel for="totalPro" value="Total Servicio: "
														style="color:white!important" />
													<h:outputText id="totalPro"
														value="#{proformaController.nuevodetalleProforma.totalservicioPo}" />

												</p:panelGrid>
											</center>
											<br />

										</div>


									</p:fieldset>

								</div>
							</div>

						</div>

						<br />
						<br />


						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{proformaController.agregarDetallePro}"
									process="@this,formDetallePro"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formDetallePro">
								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('detallePro').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>



					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Ver Proforma  *************************** -->
			<p:dialog id="panelVerPro" resizable="true" widgetVar="verPro"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="70%"
				header="Proforma y Detalle Proforma">


				<h:form id="formVerPro">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
							<center>
								<div class="ui-g">
									<div class="ui-g-4"></div>

									<div class="ui-g-4">
										<table>
											<tr>
												<td class="EncabezadoTitulo" align="center" colspan="2">
													<p:outputLabel value="ESCUELA POLITÉCNICA NACIONAL"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 15px; " />
												</td>
											</tr>

											<tr>
												<td class="EncabezadoTitulo2" align="center" colspan="2">
													<p:outputLabel
														value="Campús Politécnico J. Rubén Orellana R."
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel
														value="Ladrón de Guevara E11-253 y Andalucia"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="Telf.: 2976 300"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="P.O. Box: 17-01-2759 / QUITO-ECUADOR"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>

										</table>
									</div>
									<div class="ui-g-4"></div>
								</div>
								<br /> <br />
							</center>



							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Proforma">

								<center>

									<p:panelGrid columns="4" layout="grid" style="border:none;">

										<p:outputLabel for="id" value="ID Proforma: "
											style="font-weight:bold" />
										<p:outputLabel id="id"
											value="#{proformaController.proforma.idProforma}" />

										<p:outputLabel for="fecha" value="Fecha: "
											style="font-weight:bold" />
										<p:outputLabel id="fecha"
											value="#{proformaController.cambioFecha(proformaController.proforma.fecha)}" />

									</p:panelGrid>

									<p:panelGrid columns="4" layout="grid" styleClass="ui-noborder"
										style="border:none;">

										<p:outputLabel for="cliente" value="Cliente: "
											style="font-weight:bold" />
										<p:outputLabel id="cliente"
											value="#{proformaController.proforma.cliente.nombreCl}" />

										<p:outputLabel for="telefono" value="Telefono: "
											style="font-weight:bold" />
										<p:outputLabel id="telefono"
											value="#{proformaController.proforma.cliente.telefonoCl}" />

										<p:outputLabel for="ruc" value="Ruc: "
											style="font-weight:bold" />
										<p:outputLabel id="ruc"
											value="#{proformaController.proforma.cliente.rucCl}" />

										<p:outputLabel for="ci" value="CI: " style="font-weight:bold" />
										<p:outputLabel id="ci"
											value="#{proformaController.proforma.cliente.cedula}" />

										<p:outputLabel for="direccion" value="Dirección: "
											style="font-weight:bold" />
										<p:outputLabel id="direccion"
											value="#{proformaController.proforma.cliente.direccionCl}" />

										<p:outputLabel for="contacto" value="Contacto: "
											style="font-weight:bold" />
										<p:outputLabel id="contacto"
											value="#{proformaController.proforma.representantePo}" />

									</p:panelGrid>
								</center>
							</p:fieldset>


							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Detalle Proforma">


								<p:dataTable id="tblVerDetallePro"
									value="#{proformaController.detalleProformasTemp}"
									var="detallePro" sortBy="#{detallePro.totalservicioPo}"
									emptyMessage="No se han registrado detalles de proforma.">


									<p:column headerText="ID">
										<h:outputText value="#{detallePro.servicio.idServicio}" />
									</p:column>

									<p:column headerText="Servicio">
										<h:outputText value="#{detallePro.servicio.nombreS}" />
									</p:column>

									<p:column headerText="Método">
										<h:outputText value="#{detallePro.metodo.nombreMt}" />
									</p:column>

									<p:column headerText="Unidad/Laboratorio">
										<h:outputText
											value="#{detallePro.servicio.laboratorio.nombreL}" />
									</p:column>

									<p:column headerText="Cantidad">
										<h:outputText value="#{detallePro.cantidadPo}" />
									</p:column>

									<p:column headerText="V. U.">
										<h:outputText value="#{detallePro.servicio.precioS}" />
									</p:column>

									<p:column headerText="Total">
										<center>
											<h:outputText value="#{detallePro.totalservicioPo}" />
										</center>
									</p:column>

									<p:columnGroup type="footer">
										<p:row>
											<p:column colspan="6" style="text-align:right"
												footerText="Sub Total:" />
											<p:column
												footerText="#{proformaController.proforma.subtotalPo}" />

										</p:row>

										<p:row>
											<p:column colspan="6" style="text-align:right"
												footerText="IVA (#{proformaController.proforma.cliente.tipocliente.ivaTcl} %): " />
											<p:column footerText="#{proformaController.proforma.ivaPo}" />
										</p:row>

										<p:row>
											<p:column colspan="6" style="text-align:right"
												footerText="Total: " />
											<p:column footerText="#{proformaController.proforma.totalPo}" />
										</p:row>
									</p:columnGroup>
								</p:dataTable>

							</p:fieldset>

							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

								<p:panelGrid layout="grid" columns="1">

									<p:outputLabel id="observaciones"
										value="#{proformaController.proforma.obserPo}" size="24" />

								</p:panelGrid>

							</p:fieldset>


							<center>

								<br /> <br />

								<h:panelGrid columns="2">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Imprimir" icon="fa fa-save" process="@this"
										update="formConfirmaNuevaProforma"
										onsuccess="PF('cdConfirmarProforma').show();">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left" onclick="PF('verPro').hide();"
										process="@none" value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Editar Proforma   *************************** -->

			<p:dialog id="panelEditarPro" resizable="true" widgetVar="editarPro"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="70%"
				header="Editar Proforma">


				<h:form id="formEditarPro">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

							<!-- Datos de cliente-->

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Editar Proforma">

								<div class="ui-fluid">
									<center>
										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-noborder,pnlGridAjusteDivs"
											style="border:none;">

											<p:outputLabel for="id" value="Id Proforma: "
												style="font-weight:bold" />
											<p:outputLabel id="id"
												value="#{proformaController.proforma.idProforma}" />

											<p:outputLabel for="fecha" value="Fecha: "
												style="font-weight:bold" />
											<p:outputLabel id="fecha"
												value="#{proformaController.cambioFecha(proformaController.proforma.fecha)}" />

											<p:outputLabel for="cliente" value="Cliente: "
												style="font-weight:bold" />
											<p:outputLabel id="cliente"
												value="#{proformaController.proforma.cliente.nombreCl}" />

											<p:outputLabel for="contacto" value="Contacto: "
												style="font-weight:bold" />
											<p:outputLabel id="contacto"
												value="#{proformaController.proforma.representantePo}" />

										</p:panelGrid>
									</center>
								</div>

							</p:fieldset>



							<!-- Agregar -->

							<br />
							<center>
								<p:commandButton value="Agregar" icon="fa fa-plus"
									title="Agregar Nuevo Detalle Proforma"
									actionListener="#{proformaController.cambiarIdTempPanel(1,1)}"
									style="width: 125px; border-radius: 3px 3px 3px 3px;"
									onsuccess="PF('detallePro').show();" process="@this"
									update="@this,@([id$=messagesForm])">

								</p:commandButton>
							</center>
							<br />
							<center>
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panel id="detallePro" header="Detalle Proforma">
										<p:dataTable id="tblDetallePro"
											value="#{proformaController.detalleProformas}"
											var="detallePro" sortBy="#{detallePro.totalservicioPo}"
											emptyMessage="No se han registrado detalles de proforma, clic en el boton agregar para registrar.">


											<p:column headerText="ID">
												<h:outputText value="#{detallePro.servicio.idServicio}" />
											</p:column>

											<p:column headerText="Servicio">
												<h:outputText value="#{detallePro.servicio.nombreS}" />
											</p:column>

											<p:column headerText="Método">
												<h:outputText value="#{detallePro.metodo.nombreMt}" />
											</p:column>

											<p:column headerText="Unidad/Laboratorio">
												<h:outputText
													value="#{detallePro.servicio.laboratorio.nombreL}" />
											</p:column>

											<p:column headerText="Cantidad">
												<h:outputText value="#{detallePro.cantidadPo}" />
											</p:column>

											<p:column headerText="V. U.">
												<h:outputText value="#{detallePro.servicio.precioS}" />
											</p:column>

											<p:column headerText="T. S.">
												<h:outputText value="#{detallePro.totalservicioPo}" />
											</p:column>

											<p:column headerText="Acciones">
												<center>

													<!-- **************************  Boton Editar   *************************** -->
													<p:commandLink icon="ui-icon-check"
														oncomplete="PF('editarDetallePro').show();"
														update="formEditarDetallePro" actionListener="#{proformaController.cambiarIdTempPanel(1,2)}">

														<h:graphicImage value="/images/archivos/editar.png"
															title="Modificar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{proformaController.detalleProforma}"
															value="#{detallePro}">
														</f:setPropertyActionListener>

													</p:commandLink>

													<!-- **************************  Boton Eliminar   *************************** -->


													<p:commandLink process="@this" icon="ui-icon-check"
														action="#{proformaController.cambiarIdTempPanel(1,2)}"
														onclick="PF('cdEliminarDetallePro').show();">

														<h:graphicImage value="/images/archivos/basurero.png"
															title="Eliminar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{proformaController.detalleProforma}"
															value="#{detallePro}">
														</f:setPropertyActionListener>

													</p:commandLink>

												</center>
											</p:column>

											<p:columnGroup type="footer">
												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="Sub Total:" />
													<p:column
														footerText="#{proformaController.proforma.subtotalPo}" />

												</p:row>

												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="IVA (#{proformaController.proforma.cliente.tipocliente.ivaTcl} %): " />
													<p:column footerText="#{proformaController.proforma.ivaPo}" />
												</p:row>

												<p:row>
													<p:column colspan="6" style="text-align:right"
														footerText="Total: " />
													<p:column
														footerText="#{proformaController.proforma.totalPo}" />
												</p:row>
											</p:columnGroup>
										</p:dataTable>
									</p:panel>


								</p:fieldset>

								<br />


							</center>

							<center>

								<br /> <br />

								<h:panelGrid columns="2">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Modificar" icon="fa fa-save"
										process="@this,formEditarPro"
										disabled="#{proformaController.disabledButton() != true}"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formEditarPro" actionListener="#{proformaController.editarPro}"
										onsuccess="PF('editarPro').hide();">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left"
										action="#{proformaController.limpiarTodosCampos}"
										onclick="PF('editarPro').hide();" process="@none"
										value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel -  Editar Detalle Proforma   *************************** -->
			<p:dialog id="panelEditarDetallePro" resizable="true"
				widgetVar="editarDetallePro" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="40%"
				header="Editar Detalle Proforma">


				<h:form id="formEditarDetallePro">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<!-- **************************  Sub-Panel - Buscar Servicio   *************************** -->
						<div class="ui-g">

							<!-- **************************  Sub-Panel - Registro General  *************************** -->

							<div class="ui-g-12">
								<!-- **************************  Sub-Panel - Informacion Servicio   *************************** -->


								<div class="ui-fluid">

									<center>
										<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
											columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

											<p:outputLabel for="servicio" value="Servicio: "
												style="color:white!important" />
											<p:outputLabel id="servicio"
												value="#{proformaController.detalleProforma.servicio.nombreS}"
												size="30" maxlength="100" />

											<p:outputLabel for="metodo" value="Método: "
												style="color:white!important" />
											<p:selectOneMenu id="metodo"
												value="#{proformaController.detalleProforma.metodo}">
												<f:selectItem itemLabel="Por favor seleccione"
													itemValue="ayuda" />
												<f:selectItems value="#{proformaController.metodos}"
													itemLabel="#{metodo.nombreMt}" itemValue="#{metodo}"
													var="metodo">
												</f:selectItems>
											</p:selectOneMenu>

											<p:outputLabel for="laboratorio" value="Laboratorio: "
												style="color:white!important" />
											<p:outputLabel id="laboratorio"
												value="#{proformaController.detalleProforma.servicio.laboratorio.nombreL}"
												size="30" maxlength="100" />

											<p:outputLabel for="precio" value="Precio UNIT.: "
												style="color:white!important" />
											<p:outputLabel id="precio"
												value="#{proformaController.detalleProforma.servicio.precioS}"
												size="30" maxlength="100" />

											<p:outputLabel for="cantidad" value="Cantidad: "
												style="color:white!important" />
											<p:inputNumber id="cantidad"
												value="#{proformaController.detalleProforma.cantidadPo}"
												emptyValue="zero" size="30" maxlength="100"
												validator="#{proformaController.validarCantidad}">

												<p:ajax event="keyup" async="false"
													listener="#{proformaController.calcularTotalEdit}" />
												<p:ajax event="keyup" async="false" update="totalPro" />
											</p:inputNumber>

											<p:outputLabel for="totalPro" value="Total Servicio: "
												style="color:white!important" />
											<h:outputText id="totalPro"
												value="#{proformaController.detalleProforma.totalservicioPo}" />

										</p:panelGrid>
									</center>
									<br />

								</div>

							</div>
						</div>



						<br />
						<br />


						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{proformaController.editarDetallePro()}"
									process="@form,formEditarDetallePro"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formEditarDetallePro">
								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('editarDetallePro').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>



					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Clientes ************************** -->


			<p:dialog id="panelListadoCli" resizable="true"
				widgetVar="listadoCli" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="80%"
				header="Listado de Clientes">


				<h:form id="formListadoCli">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>

							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Clientes" update="@this, tblClientes"
								oncomplete="PF('filterClientesTable').filter();">
							</p:commandButton>

							<br /> <br />

							<div class="ui-fluid" align="center">

								<p:dataTable id="tblClientes"
									value="#{proformaController.clientes}" var="cliente"
									widgetVar="filterClientesTable"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									filteredValue="#{proformaController.filtroClientes}" rows="7"
									paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
									rowKey="#{cliente.idCliente}"
									selection="#{proformaController.selectCliente}"
									selectionMode="single">

									<p:column headerText="Cliente" filterBy="#{cliente.nombreCl}">
										<h:outputText value="#{cliente.nombreCl}" />
									</p:column>

									<p:column headerText="RUC" filterBy="#{cliente.rucCl}"
										filterMatchMode="contains">
										<h:outputText value="#{cliente.rucCl}" />
									</p:column>

									<p:column headerText="Cedula" filterBy="#{cliente.cedula}">
										<h:outputText value="#{cliente.cedula}" />
									</p:column>

									<p:column headerText="Teléfono"
										filterBy="#{cliente.telefonoCl}" filterMatchMode="contains">
										<h:outputText value="#{cliente.telefonoCl}" />
									</p:column>

									<p:column headerText="Contacto"
										filterBy="#{cliente.contactoCl}" filterMatchMode="contains">
										<h:outputText value="#{cliente.contactoCl}" />
									</p:column>

								</p:dataTable>
							</div>
							<br /> <br />

							<center>

								<h:panelGrid columns="1">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,tblClientes"
										action="#{proformaController.seleccionarCliente}"
										update="@([id$=messagesForm],[id$=formAgregarPro])"
										onsuccess="PF('listadoCli').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Editar Estado Proforma ************************** -->
			<p:dialog id="panelEditarEstado" resizable="true"
				widgetVar="editarEstado" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="30%"
				header="Listado de Clientes">


				<h:form id="formEditarEstado">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<br />
						<br />

						<center>
							<div class="ui-fluid">
								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
									columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

									<p:outputLabel for="proforma" value="Proforma: "
										style="color:white!important" />
									<p:outputLabel id="proforma"
										value="#{proformaController.proforma.idProforma}" size="30"
										maxlength="100" />

									<p:outputLabel for="estado" value="Estado: "
										style="color:white!important" />
									<p:selectOneMenu id="estado"
										value="#{proformaController.proforma.estadoPo}">
										<f:selectItem itemLabel="Pendiente" itemValue="Pendiente" />
										<f:selectItem itemLabel="Aceptada" itemValue="Aceptada" />
										<f:selectItem itemLabel="Rechazada" itemValue="Rechazada" />

									</p:selectOneMenu>

									<p:outputLabel id="lvlmotivo" for="motivo" value="Motivo: "
										style="color:white!important" />
									<p:inputTextarea id="motivo"
										value="#{proformaController.proforma.motivoEstadopo}"
										size="24" />

								</p:panelGrid>
							</div>
						</center>

						<br />
						<br />
						<center>



							<br /> <br />

							<center>

								<h:panelGrid columns="2">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,formEditarEstado"
										actionListener="#{proformaController.editarEstado}"
										update="@([id$=messagesForm],[id$=formprincipal])"
										onsuccess="PF('editarEstado').hide()">

									</p:commandButton>

									<p:commandButton icon="fa fa-close" value="Cancelar"
										onclick="PF('editarEstado').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Ver Existencia ************************** -->

			<!-- **************************  Panel - Eliminar Detalle Pro************************** -->
			<h:form id="formEliminarDetallePro">
				<p:confirmDialog
					message="Esta seguro(a) que desea eliminar el detalle proforma"
					header="Eliminar M.I." severity="warn"
					widgetVar="cdEliminarDetallePro">
					<center>

						<p:commandButton value="Aceptar"
							onsuccess="PF('cdEliminarDetallePro').hide();"
							actionListener="#{proformaController.eliminarDetallePro}"
							update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarPro" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdEliminarDetallePro').hide();" type="button" />

					</center>

				</p:confirmDialog>


			</h:form>

			<!-- **************************  Panel - Eliminar Proforma************************** -->
			<h:form id="formEliminarPro">
				<p:confirmDialog
					message="Esta seguro(a) que desea eliminar la proforma"
					header="Eliminar Proforma" severity="warn"
					widgetVar="cdEliminarPro">
					<center>

						<p:commandButton value="Aceptar"
							actionListener="#{proformaController.eliminarProforma}"
							update="@this,@([id$=messagesForm],[id$=formprincipal])"
							onsuccess="PF('cdEliminarPro').hide();" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdEliminarPro').hide();" type="button" />

					</center>

				</p:confirmDialog>


			</h:form>

			<!-- **************************  Panel - Panel de error ************************** -->
			<h:form id="formError">
				<p:confirmDialog message="NO se puede hacer cambios en la Proforma"
					header="Mensaje..." severity="warn" widgetVar="cdPanelError">
					<center>

						<p:commandButton value="Cancelar"
							onclick="PF('cdPanelError').hide();" type="button" />

					</center>

				</p:confirmDialog>

			</h:form>

			<!-- **************************  Panel de vizualizacion - Confirmar Nueva Proforma   ************************** -->

			<p:confirmDialog
				message="Esta seguro(a) que desea guardar la proforma con los siguientes datos: "
				header="Confirmar Proforma." severity="warn"
				widgetVar="cdConfirmarProforma">

				<center>
					<h:form id="formConfirmaNuevaProforma">

						<p:panelGrid columns="2" layout="grid"
							styleClass="ui-panelgrid-blank"
							columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
							style="border:none;">

							<p:outputLabel for="cliente" value="Cliente: "
								style="color:white!important" />
							<p:outputLabel id="cliente"
								value="#{proformaController.nuevoProforma.cliente.nombreCl}" />

							<p:outputLabel for="telefono" value="Telefono: "
								style="color:white!important" />
							<p:outputLabel id="telefono"
								value="#{proformaController.nuevoProforma.cliente.telefonoCl}" />

							<p:outputLabel for="ruc" value="Ruc: "
								style="color:white!important" />
							<p:outputLabel id="ruc"
								value="#{proformaController.nuevoProforma.cliente.rucCl}" />

							<p:outputLabel for="ci" value="CI: "
								style="color:white!important" />
							<p:outputLabel id="ci"
								value="#{proformaController.nuevoProforma.cliente.cedula}" />

							<p:outputLabel for="contacto" value="Contacto: "
								style="color:white!important" />
							<p:outputLabel id="contacto"
								value="#{proformaController.nuevoProforma.cliente.contactoCl}" />

						</p:panelGrid>

						<br />

						<p:commandButton value="Aceptar"
							onsuccess="PF('cdConfirmarProforma').hide();"
							actionListener="#{proformaController.guardarProforma}"
							update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarPro,formDetallePro" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdConfirmarProforma').hide();" type="button" />
					</h:form>
				</center>

			</p:confirmDialog>




		</h:body>

		<script type="text/javascript">
			function start(){
			PF('statusDialog').show();
			} 

			function stop(){
			PF('statusDialog').hide();
			}

			function aiuda(){
			console.log('TIMBREMOS :v');

				}

			PrimeFaces.locales['es'] = {
		            closeText: 'Cerrar',
		            prevText: 'Anterior',
		            nextText: 'Siguiente',
		            monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
		            monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
		            dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
		            dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
		            dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'],
		            weekHeader: 'Semana',
		            firstDayOfWeek: 1,
		            isRTL: false,
		            showMonthAfterYear: false,
		            yearSuffix: '',
		            timeOnlyTitle: 'Sólo hora',
		            timeText: 'Tiempo',
		            hourText: 'Hora',
		            minuteText: 'Minuto',
		            secondText: 'Segundo',
		            currentText: 'Fecha actual',
		            ampm: false,
		            month: 'Mes',
		            week: 'Semana',
		            day: 'Día',
		            allDayText: 'Todo el día'
		        };

		</script>

		<!-- **************************  Scroll en dialogo   *************************** -->
		<style type="text/css">
.ui-dialog-content {
	max-width: 1500px !important;
	max-height: 500px !important;
	margin-bottom: 5px !important;
}
</style>

	</ui:define>
</ui:composition>