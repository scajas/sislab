<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/common.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:v="http://validators.epn.edu.ec.com"
	xmlns:ps="http://primefaces.org/apark">


	<ui:define name="pageTitle">Movimiento Inventaeio</ui:define>
	<ui:define name="body">

		<h:head>

			<script type="text/javascript">
	
		//<![CDATA[
		function printDiv(divName){
			var f =new Date();
			var printContents =document.getElementById(divName).innerHTML;
			var originalContents =document.body.innerHTML;
			document.body.innerHTML=printContents;
			window.print();
			document.body.innerHTML=originalContents;
		}

		//]]>

	</script>
		</h:head>


		<h:body>

			<p:growl id="messagesForm" showDetail="true" sticky="false"
				autoupdate="true" life="3000" />
			<h:form id="formprincipal">

				<p:panel>
					<p:fieldset legend="Movimientos Inventario"
						style="border-radius: 5px 5px 5px 5px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1
	;width: '90%';">
						<br />
						<br />
						<p:commandLink process="@this" onclick="PF('nuevoMI').show()"
							update=":formAgregarMI,@this">
							<center>
								<h:graphicImage value="/images/archivos/agregar.png"
									title="Agregar" style="border:0px solid #CAD6E0;" width="36"
									height="35" />
							</center>
							<center>
								<h:outputText value="Agregar Nuevo" />
							</center>
						</p:commandLink>
						<br />
						<br />

						<p:dataTable id="tblMovimientoI"
							value="#{movimientoInventarioController.movimientoInventarios}"
							var="movimientoI" widgetVar="filterBodegaTable"
							emptyMessage="No se pudo encontrar ninguna coincidencia"
							resizableColumns="true" rows="10" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">

							<p:column headerText="Id: "
								filterBy="#{movimientoI.ordeninventario.idOrdeninventario}"
								filterMatchMode="contains">
								<h:outputText
									value="#{movimientoI.ordeninventario.idOrdeninventario}" />
							</p:column>

							<p:column headerText="Tipo O.I."
								filterBy="#{movimientoI.ordeninventario.tipordeninv.nombreToi}">
								<h:outputText
									value="#{movimientoI.ordeninventario.tipordeninv.nombreToi}" />
							</p:column>

							<p:column headerText="Fecha de Ingreso"
								filterBy="#{movimientoI.ordeninventario.fechaingresoOi}">
								<h:outputText
									value="#{movimientoI.ordeninventario.fechaingresoOi}" />
							</p:column>

							<p:column headerText="Descripción"
								filterBy="#{movimientoI.ordeninventario.descrOi}">
								<h:outputText value="#{movimientoI.ordeninventario.descrOi}" />
							</p:column>

							<!-- **************************  Boton Ver   *************************** -->

							<p:column headerText="Acciones">

								<center>

									<p:commandLink update=":formMostrarMI,@this"
										process="@this,tblMovimientoI" icon="ui-icon-check"
										oncomplete="PF('mostrarMI').show();">

										<h:graphicImage value="/images/archivos/verMas.png"
											title="Ver Detalles" style="border:0px solid #CAD6E0;"
											width="35" height="35" />


										<f:setPropertyActionListener
											target="#{movimientoInventarioController.movimientosinventario}"
											value="#{movimientoI}">
										</f:setPropertyActionListener>
									</p:commandLink>

								</center>

							</p:column>

						</p:dataTable>

					</p:fieldset>
				</p:panel>

			</h:form>

			<!-- **************************  Panel - Dialogo de Registrar Nuevo   *************************** -->

			<p:dialog id="panelNuevoMI" resizable="true" widgetVar="nuevoMI"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="70%"
				header="Agregar Movimiento Inventario">


				<h:form id="formAgregarMI">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

							<p:fieldset legend="Encabezado Orden Inventario"
								style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

										<p:outputLabel id="lblFecha" for="fecha"
											value="Fecha de Ingreso: " style="color:white!important" />
										<p:calendar id="fecha"
											value="#{existenciasController.nuevoExistencia.fechacadE}"
											showOn="button" maxlength="100" size="30" />

										<p:outputLabel id="lblResponsable" for="responsable"
											value="Responsable: " style="color:white!important" />
										<p:inputText id="responsable"
											value="#{existenciasController.nuevoExistencia.ubicaE}"
											disabled="true" required="true"
											requiredMessage="Debe ingresar la ubicación" size="30"
											maxlength="100">
										</p:inputText>

										<p:outputLabel id="lblTipoOrden" for="tipoO"
											value="Tipo Orden de Inventario "
											style="color:white!important" />
										<p:selectOneMenu id="tipoO" size="30" maxlength="100"
											value="#{movimientoInventarioController.tipoOrdenSelect}">
											<p:ajax
												listener="#{movimientoInventarioController.tipoOrdenSelect}" />
											<f:selectItem itemLabel="Por favor seleccione" itemValue="" />
											<f:selectItems
												value="#{movimientoInventarioController.tipordeninvs}"
												itemLabel="#{tipoO.nombreToi}" itemValue="#{tipoO}"
												var="tipoO">
											</f:selectItems>
										</p:selectOneMenu>

										<p:outputLabel id="lblDescripcion" for="descripcion"
											value="Descripción: " style="color:white!important" />
										<p:inputText id="descripcion"
											value="#{existenciasController.nuevoExistencia.ubicaE}"
											disabled="true" required="true"
											requiredMessage="Debe ingresar la ubicación" size="30"
											maxlength="100">
										</p:inputText>

									</p:panelGrid>
								</center>

							</p:fieldset>

							<br />

							<p:fieldset legend="Movimientos Inventario"
								style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

								<div class="ui-fluid">
									<center>
										<h:panelGrid styleClass="ui-panelgrid-blank">

											<p:commandButton process="@this" icon="ui-icon-add"
												actionListener="#{movimientoInventarioController.cambiarPanel}"
												value="Agregar">
											</p:commandButton>

										</h:panelGrid>

										<br />
									</center>
									<p:panel id="existencia"
										header="Existencias Ajuste/Baja de Inventario">
										<p:dataTable id="tblExistenciasMI"
											value="#{movimientoInventarioController.nuevoMovimientoInventarios}"
											var="movimientoI">

											<p:column headerText="ID">
												<h:outputText
													value="#{movimientoInventarioController.cambiarDatosExistencia(movimientoI.idExistencia).idExistencia}" />
											</p:column>

											<p:column headerText="Nombre">
												<h:outputText
													value="#{movimientoInventarioController.cambiarDatosExistencia(movimientoI.idExistencia).producto.nombrePr}" />
											</p:column>

											<p:column headerText="Saldo N.">
												<h:outputText
													value="#{movimientoInventarioController.cambiarDatosExistencia(movimientoI.idExistencia).cantidadE}" />
											</p:column>

											<p:column headerText="Cant. Empleada">
												<h:outputText value="#{movimientoI.cantidadDmt}" />
											</p:column>

											<p:column headerText="UM">
												<h:outputText
													value="#{movimientoInventarioController.cambiarDatosExistencia(movimientoI.idExistencia).unidadmedida.siglaUm}" />
											</p:column>

											<p:column headerText="Bodega">
												<h:outputText
													value="#{movimientoInventarioController.cambiarDatosExistencia(movimientoI.idExistencia).bodega.nombreBg}" />
											</p:column>

											<p:column headerText="Obs.">
												<h:outputText value="#{movimientoI.observacionesMov}" />
											</p:column>

											<p:column headerText="Acciones">
												<center>
													<p:commandLink 
														process="@this,tblExistenciasMI" icon="ui-icon-check"
														oncomplete="PF('ingresarMI').show();">

														<h:graphicImage value="/images/archivos/editar.png"
															title="Modificar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{movimientoInventarioController.movimientosinventario}"
															value="#{movimientoI}">
														</f:setPropertyActionListener>
													</p:commandLink>

													<!-- **************************  Boton Eliminar   *************************** -->


													<p:commandLink process="@this" icon="ui-icon-check"
														onclick="PF('cdEliminarMI').show();">

														<h:graphicImage value="/images/archivos/basurero.png"
															title="Eliminar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{movimientoInventarioController.movimientosinventario}"
															value="#{movimientoI}">
														</f:setPropertyActionListener>
													</p:commandLink>
												</center>
											</p:column>

										</p:dataTable>
									</p:panel>

								</div>


							</p:fieldset>

							<center>

								<br /> <br />


								<center>

									<h:panelGrid columns="3">

										<p:commandLink
											actionListener="#{movimientoInventarioController.agregarMovimiento}"
											oncomplete="PF('nuevoB'); PF('filterBodegaTable').filter();"
											process="@this,formAgregarMI"
											update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarMI">


											<center>

												<h:graphicImage value="/images/archivos/guardar.png"
													title="Guardar" style="border:0px solid #CAD6E0;"
													width="36" height="35" />

											</center>

										</p:commandLink>

										<p:commandLink onclick="PF('nuevoMI').hide();" process="@none">

											<p:graphicImage value="/images/archivos/limpiar.png"
												width="35" height="36" title="Limpiar">
											</p:graphicImage>

										</p:commandLink>

										<p:commandLink onclick="PF('nuevoMI').hide();" process="@none">

											<p:graphicImage value="/images/archivos/atras.png" width="35"
												height="36" title="Atrás">
											</p:graphicImage>

										</p:commandLink>

									</h:panelGrid>

								</center>
							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Detalles de Orden y Movimiento Inventario   *************************** -->

			<p:dialog id="panelmostrarMI" resizable="true" widgetVar="mostrarMI"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="70%"
				header="Detalles de Orden y Movimiento Inventario">


				<h:form id="formMostrarMI">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

							<p:fieldset legend="Encabezado Orden Inventario"
								style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

										<p:outputLabel id="lblFecha" for="fecha"
											value="Fecha de Ingreso: " style="color:white!important" />
										<p:calendar id="fecha" disabled="true"
											value="#{movimientoInventarioController.movimientosinventario.fechaMi}"
											showOn="button" maxlength="100" size="30" />

										<p:outputLabel id="lblResponsable" for="responsable"
											value="Responsable: " style="color:white!important" />
										<p:inputText id="responsable"
											value="#{movimientoInventarioController.movimientosinventario.ordeninventario.responsableOi}"
											disabled="true" required="true"
											requiredMessage="Debe ingresar la ubicación" size="30"
											maxlength="100">
										</p:inputText>

										<p:outputLabel id="lblTipoOrden" for="tipoO"
											value="Tipo Orden de Inventario "
											style="color:white!important" />
										<p:inputText id="tipoO"
											value="#{movimientoInventarioController.movimientosinventario.ordeninventario.tipordeninv.nombreToi}"
											disabled="true" size="30" maxlength="100">
										</p:inputText>

										<p:outputLabel id="lblDescripcion" for="descripcion"
											value="Descripción: " style="color:white!important" />
										<p:inputText id="descripcion"
											value="#{existenciasController.nuevoExistencia.ubicaE}"
											disabled="true" required="true"
											requiredMessage="Debe ingresar la ubicación" size="30"
											maxlength="100">
										</p:inputText>

									</p:panelGrid>
								</center>

							</p:fieldset>

							<br />

							<p:fieldset legend="Movimientos Inventario"
								style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

								<div class="ui-fluid">

									<p:panel id="existencia"
										header="Existencias Ajuste/Baja de Inventario">
										<p:dataTable id="tblMovimientoI"
											value="#{movimientoInventarioController.nuevoMovimientoInventarios}"
											var="movimientoI">

											<p:column headerText="ID">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

											<p:column headerText="Nombre">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

											<p:column headerText="Saldo N.">
												<h:outputText value="#{movimientoI.saldoE}" />
											</p:column>

											<p:column headerText="Cant. Empleada">
												<h:outputText value="#{movimientoI.cantidadDmt}" />
											</p:column>

											<p:column headerText="UM">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

											<p:column headerText="Bodega">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

											<p:column headerText="Obs.">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

											<p:column headerText="Acciones">
												<h:outputText value="#{movimientoI.idExistencia}" />
											</p:column>

										</p:dataTable>
									</p:panel>

								</div>


							</p:fieldset>

							<center>

								<br /> <br />


								<center>

									<h:panelGrid columns="1">



										<p:commandLink onclick="PF('mostrarMI').hide();"
											process="@none">

											<p:graphicImage value="/images/archivos/atras.png" width="35"
												height="36" title="Atrás">
											</p:graphicImage>

										</p:commandLink>

									</h:panelGrid>

								</center>
							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Ingresar Movimiento Inventario   *************************** -->

			<p:dialog id="panelIngresarMI" resizable="true"
				widgetVar="ingresarMI" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="80%"
				header="Ingresar Movimiento Inventario">


				<h:form id="formIngresarMI">

					<p:fieldset legend="Movimientos Inventarios"
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>
							<center>
								<h:panelGrid columns="2">

									<p:commandLink
										onclick="#{movimientoInventarioController.cargarExistencias()}"
										oncomplete="PF('listadoEx').show();" process="@none">

										<p:graphicImage value="/images/archivos/busqueda.png"
											width="35" height="36" title="Buscar Existencia">
										</p:graphicImage>

									</p:commandLink>

									<p:commandLink onclick="PF('verEx').show();" process="@none">

										<p:graphicImage value="/images/archivos/verMas.png" width="35"
											height="36" title="Ver Existencias">
										</p:graphicImage>

									</p:commandLink>

								</h:panelGrid>

								<br />

								<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
									columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

									<p:outputLabel id="lblIdExistencia" for="idExistencia"
										value="Id Existencia: " style="color:white!important" />
									<p:inputText id="idExistencia"
										value="#{movimientoInventarioController.existencia.idExistencia}"
										size="24" disabled="true" />

									<p:outputLabel id="lblNombrePro" for="nombrePro"
										value="Nombre: " style="color:white!important" />
									<p:inputText id="nombrePro"
										value="#{movimientoInventarioController.existencia.producto.nombrePr}"
										size="24" disabled="true" />


								</p:panelGrid>

								<br />

								<div class="ui-fluid">
									<center>
										<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
											columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

											<p:outputLabel id="lblSaldoNeto" for="saldoNeto"
												value="Saldo Neto: " style="color:white!important" />
											<p:inputText id="saldoNeto"
												value="#{movimientoInventarioController.existencia.cantidadE}"
												size="24" disabled="true" />

											<p:outputLabel id="lblUnidadM" for="unidadM"
												value="Unidad de Medida: " style="color:white!important" />
											<p:inputText id="unidadM"
												value="#{movimientoInventarioController.existencia.unidadmedida.siglaUm}"
												size="24" disabled="true" />

											<p:outputLabel id="lblCantidad" for="cantidad"
												value="Cantidad: " style="color:white!important" />
											<p:inputNumber id="cantidad"
												value="#{movimientoInventarioController.nuevoMovimientoInventario.cantidadDmt}"
												size="24" />

											<p:outputLabel id="lblBodega" for="bodega" value="Bodega: "
												style="color:white!important" />
											<p:inputText id="bodega"
												value="#{movimientoInventarioController.existencia.bodega.nombreBg}"
												size="24" disabled="true" />

											<p:outputLabel id="lblEnvase" for="envase" value="Envase: "
												style="color:white!important" />
											<p:inputText id="envase"
												value="#{movimientoInventarioController.nuevoMovimientoInventario.envaseMov}"
												size="24" />

											<p:outputLabel id="lblObservaciones" for="observaciones"
												value="Observaciones: " style="color:white!important" />
											<p:inputText id="observaciones"
												value="#{movimientoInventarioController.nuevoMovimientoInventario.observacionesMov}"
												size="24" />

										</p:panelGrid>
									</center>
								</div>
							</center>
							<br /> <br />


							<center>

								<h:panelGrid columns="2">

									<p:commandLink
										actionListener="#{movimientoInventarioController.agregarMovimiento}"
										process="@this,formIngresarMI"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarMI">

										<center>

											<h:graphicImage value="/images/archivos/guardar.png"
												title="Guardar" style="border:0px solid #CAD6E0;" width="36"
												height="35" />

										</center>

									</p:commandLink>

									<p:commandLink onclick="PF('ingresarMI').hide();"
										process="@none">

										<p:graphicImage value="/images/archivos/atras.png" width="35"
											height="36" title="Atrás">
										</p:graphicImage>

									</p:commandLink>

								</h:panelGrid>

							</center>



						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>



			<!-- **************************  Panel - Ingresar Movimiento Inventario 2  *************************** -->

			<p:dialog id="panelIngresarMI2" resizable="true"
				widgetVar="ingresarMI2" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="35%"
				header="Ingresar Movimiento Inventario">


				<h:form id="formIngresarMI2">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>
							<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
								columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs">


								<p:outputLabel id="lblNombre" for="nombre" value="Nombre: "
									style="color:white!important" />
								<p:inputText id="nombre"
									value="#{normaController.norma.nombreN}" required="true"
									requiredMessage="Debe ingresar el nombre de la norma" size="31">
								</p:inputText>

								<p:outputLabel id="lblDeesc" for="desc" value="Descripción "
									style="color:white!important" />
								<p:inputTextarea id="desc"
									value="#{normaController.norma.descripcionN}" maxlength="100"
									rows="5" cols="30" autoResize="false" />


							</p:panelGrid>
							<br /> <br />


							<center>

								<h:panelGrid columns="2">

									<p:commandLink
										actionListener="#{normaController.modificarNorma}"
										oncomplete="PF('filterNormaTable').filter();"
										process="@this,formIngresarMI2"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formIngresarMI2">

										<center>

											<h:graphicImage value="/images/archivos/guardar.png"
												title="Guardar" style="border:0px solid #CAD6E0;" width="36"
												height="35" />

										</center>

									</p:commandLink>

									<p:commandLink onclick="PF('ingresarMI').hide();"
										process="@none">

										<p:graphicImage value="/images/archivos/atras.png" width="35"
											height="36" title="Atrás">
										</p:graphicImage>

									</p:commandLink>

								</h:panelGrid>

							</center>



						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Existencias *************************** -->
			<p:dialog id="panelListadoEx" resizable="true" widgetVar="listadoEx"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="75%"
				header="Listado de Existencias">


				<h:form id="formListadoEx">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>
							<div class="ui-fluid" align="center">
								<p:dataTable id="tblExistencias"
									value="#{movimientoInventarioController.existencias}"
									var="existencia" widgetVar="filterExistenciasTable"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									filteredValue="#{movimientoInventarioController.filtrarExistencias}"
									resizableColumns="true" rows="5" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15"
									style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
									paginatorPosition="bottom" rowKey="#{existencia.idExistencia}"
									selection="#{movimientoInventarioController.selectExistencia}"
									selectionMode="single">


									<p:column headerText="ID-Existencia"
										filterBy="#{existencia.idExistencia}"
										filterMatchMode="contains">
										<h:outputText value="#{existencia.idExistencia}" />
									</p:column>

									<p:column headerText="Producto"
										filterBy="#{existencia.producto.nombrePr}">
										<h:outputText value="#{existencia.producto.nombrePr}" />
									</p:column>

									<p:column headerText="Grado"
										filterBy="#{existencia.grado.nombreGr}"
										filterMatchMode="contains">
										<h:outputText value="#{existencia.grado.nombreGr}" />
									</p:column>

									<p:column headerText="Concentración"
										filterBy="#{existencia.concentracion.nombreCon}"
										filterMatchMode="contains">
										<h:outputText value="#{existencia.concentracion.nombreCon}" />
									</p:column>

									<p:column headerText="Bodega"
										filterBy="#{existencia.bodega.nombreBg}">
										<h:outputText value="#{existencia.bodega.nombreBg}" />
									</p:column>

									<p:column headerText="Saldo" filterBy="#{existencia.cantidadE}"
										filterMatchMode="contains">
										<h:outputText value="#{existencia.cantidadE}" />
									</p:column>

									<p:column headerText="U.M."
										filterBy="#{existencia.unidadmedida.medidaUm}"
										filterMatchMode="contains">
										<h:outputText value="#{existencia.unidadmedida.siglaUm}" />
									</p:column>

									<p:column headerText="Tipo Producto"
										filterBy="#{existencia.producto.tipoproducto.nombreTprod}">
										<h:outputText
											value="#{existencia.producto.tipoproducto.nombreTprod}" />
									</p:column>

								</p:dataTable>
							</div>
							<br /> <br />

							<center>
								<h:panelGrid columns="1">

									<p:commandLink process="@this,tblExistencias"
										action="#{movimientoInventarioController.seleccionarExistencia()}"
										update="@([id$=messagesForm],[id$=formIngresarMI])"
										onclick="PF('listadoEx').hide();">

										<p:graphicImage value="/images/archivos/aceptar.png"
											width="35" height="36" title="Seleccionar">
										</p:graphicImage>
									</p:commandLink>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Ver Existencia *************************** -->
			<p:dialog id="panelVerExistencia" resizable="true" widgetVar="verEx"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="35%" header="Ver Existencia">


				<h:form id="formVerEx">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border: 0px solid #000000;
	border-style: double;
	border-width: 1px;
	border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>
							<center>

								<h:panelGrid columns="2">

									<p:commandLink
										actionListener="#{normaController.modificarNorma}"
										oncomplete="PF('filterNormaTable').filter();"
										process="@this,formListadoEx"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formListadoEx">

										<center>

											<h:graphicImage value="/images/archivos/guardar.png"
												title="Guardar" style="border:0px solid #CAD6E0;" width="36"
												height="35" />

										</center>

									</p:commandLink>

									<p:commandLink onclick="PF('verEx').hide();" process="@none">

										<p:graphicImage value="/images/archivos/atras.png" width="35"
											height="36" title="Atrás">
										</p:graphicImage>

									</p:commandLink>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>



			<!-- **************************  Panel - Eliminar *************************** -->

			<h:form id="eliminarMI">
				<p:confirmDialog
					message="¿Esta seguro(a) que desea eliminar este Movimiento I."
					header="Eliminar M.I." severity="warn"
					widgetVar="cdEliminarMI">
					<center>

						<p:commandButton value="Aceptar"
							onsuccess="PF('cdEliminarMI').hide();"
							actionListener="#{movimientoInventarioController.eliminarMovimiento}"
							update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarMI" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdEliminarMI').hide();" type="button" />

					</center>

				</p:confirmDialog>


			</h:form>

		</h:body>



		<script type="text/javascript">
			function start(){
			PF('statusDialog').show();
			} 

			function stop(){
			PF('statusDialog').hide();
			}

		</script>

		<!-- **************************  Scroll en dialogo   *************************** -->
		<style type="text/css">
.ui-dialog-content {
	max-width: 1500px !important;
	max-height: 500px !important;
	margin-bottom: 5px !important;
}
</style>

	</ui:define>
</ui:composition>