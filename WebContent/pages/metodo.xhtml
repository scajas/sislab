<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/common.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:v="http://validators.epn.edu.ec.com"
	xmlns:ps="http://primefaces.org/apark">

	<ui:define name="pageTitle">Método</ui:define>
	<ui:define name="body">

		<h:head>

			<script type="text/javascript">
	
		//<![CDATA[
		function printDiv(divName){
			var f =new Date();
			var printContents =document.getElementById(divName).innerHTML;
			var originalContents =document.body.innerHTML;
			document.body.innerHTML=printContents;
			window.print();
			document.body.innerHTML=originalContents;
		}

		//]]>

	</script>
		</h:head>

		<p:ajaxStatus onstart="PF('statusDialog').show()"
			onsuccess="PF('statusDialog').hide()" />
		<p:dialog id="progressImage" widgetVar="statusDialog" modal="true"
			draggable="false" closable="false" resizable="false"
			header="Cargando, por favor espere.">
			<center>
				<h:graphicImage value="/images/archivos/cargando.gif"
					style="border:0px solid #CAD6E0;" width="50" height="50" />
			</center>

		</p:dialog>

		<h:body onload="rc();actualizar()">

			<p:growl id="messagesForm" showDetail="true" sticky="false"
				autoupdate="true" life="3000" />
			<h:form id="formprincipal">

				<p:remoteCommand name="rc"
					action="#{metodoController.limpiarCampos()}" />
				<p:remoteCommand name="actualizar" update="@this" />

				<p:panel>
					<p:fieldset legend="Método"
						style="border-radius: 5px 5px 5px 5px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1
						;width: '90%';">
						<br />
						<br />

						<!-- Boton De Nuevo -->

						<center>
							<p:commandLink process="@this" icon="ui-icon-check"
								onclick="PF('nuevoMetodo').show();">

								<h:graphicImage value="/images/archivos/agregar.png"
									title="Nuevo" style="border:0px solid #CAD6E0;" width="35"
									height="35" />
								<p>
									<strong>Nuevo</strong>
								</p>
							</p:commandLink>

						</center>
						<br />
						<br />

						<!-- **************************  Table Metodos  *************************** -->

						<p:dataTable id="tblMetodo" value="#{metodoController.metodos}"
							var="metodo" widgetVar="filterMetodos"
							filteredValue="#{metodoController.filterMetodos}" rows="10"
							paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
							box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">

							<p:column headerText="ID Metodo" filterBy="#{metodo.idMetodo}"
								filterMatchMode="contains" style="width: 5%"
								filterStyle="width: 50%">
								<h:outputText value="#{metodo.idMetodo}" />
							</p:column>

							<p:column headerText="Servicio"
								filterBy="#{metodo.servicio.nombreS}" filterMatchMode="contains"
								style="width: 15%" filterStyle="width: 80%">
								<h:outputText value="#{metodo.servicio.nombreS}" />
							</p:column>

							<p:column headerText="Método" filterBy="#{metodo.nombreMt}"
								filterMatchMode="contains" style="width: 10%"
								filterStyle="width: 80%">
								<h:outputText value="#{metodo.nombreMt}" />
							</p:column>

							<p:column headerText="Descripción" filterBy="#{metodo.descrMt}"
								style="width: 7%" filterStyle="width: 80%">
								<h:outputText value="#{metodo.descrMt}" />
							</p:column>

							<p:column headerText="Detalle" style="width: 4%">
								<center>
									<p:commandLink update="@this,formVerMetodo"
										process="@this,tblMetodo" icon="ui-icon-check"
										action="#{metodoController.cargarDetalleMet(metodo.idMetodo)}"
										oncomplete="PF('showMetodo').show();"> Método
																				
										<f:setPropertyActionListener
											target="#{metodoController.metodo}" value="#{metodo}">
										</f:setPropertyActionListener>

									</p:commandLink>
								</center>
							</p:column>

							<!-- **************************  Boton Acciones  *************************** -->

							<p:column headerText="Acciones" style="width: 6%">

								<center>
									<p:commandLink update="@this,formEditMetodo"
										process="@this,tblMetodo" icon="ui-icon-check"
										action="#{metodoController.cargarDetalleMetEdit(metodo.idMetodo)}"
										oncomplete="PF('editMetodo').show();">

										<h:graphicImage value="/images/archivos/editar.png"
											title="Modificar" style="border:0px solid #CAD6E0;"
											width="35" height="35" />

										<f:setPropertyActionListener
											target="#{metodoController.metodo}" value="#{metodo}">
										</f:setPropertyActionListener>
									</p:commandLink>

									<!-- **************************  Boton Eliminar   *************************** -->


									<p:commandLink process="@this" icon="ui-icon-check"
										onclick="PF('eliminarMetodo').show();">

										<h:graphicImage value="/images/archivos/basurero.png"
											title="Eliminar" style="border:0px solid #CAD6E0;" width="35"
											height="35" />
										<f:setPropertyActionListener
											target="#{metodoController.metodo}" value="#{metodo}">
										</f:setPropertyActionListener>
									</p:commandLink>
								</center>
							</p:column>

						</p:dataTable>

					</p:fieldset>
				</p:panel>

			</h:form>
			<!-- **************************  Panel Nuevo - Nuevo Método  *************************** -->

			<p:dialog id="panelNuevoMetodo" resizable="true"
				widgetVar="nuevoMetodo" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="145vh"
				height="73vh" header="Ingresar Método">

				<h:form id="formNuevoMetodo">

					<p:accordionPanel>

						<p:tab title="Método">

							<p:fieldset legend="Información Orden Inventario"
								style="border-radius: 10px 10px 10px 10px;
								-moz-border-radius: 10px 10px 10px 10px;
								-webkit-border-radius: 10px 10px 10px 10px;
								border: 0px solid #000000;
								border-style: double;
								border-width: 1px;
								border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

								<div class="ui-fluid">
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
										style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
										layout="grid">

										<p:outputLabel id="nuevoMetodo" for="metodo" value="Método: *"
											style="color:white!important" />
										<p:inputText id="metodo"
											value="#{metodoController.nuevoMetodo.nombreMt}"
											maxlength="100">
										</p:inputText>

										<p:outputLabel id="nuevoServicio" for="servicio"
											value="Servicio: *" style="color:white!important" />

										<p:selectOneMenu id="servicio"
											value="#{metodoController.servicioSelect}" effect="fold"
											filter="true" filterMatchMode="contains">

											<f:selectItem itemLabel="Por favor seleccione"
												itemValue="null" />
											<f:selectItems value="#{metodoController.servicios}"
												itemLabel="#{serv.nombreS}" itemValue="#{serv}" var="serv">
											</f:selectItems>

											<p:ajax event="itemSelect" update="selectedItemText" />
										</p:selectOneMenu>

										<p:outputLabel id="nuevoLab" value="Laboratorio: "
											style="color:white!important" />
										<h:outputText id="selectedItemText"
											value="#{metodoController.servicioSelect.laboratorio.nombreL}" />

										<p:outputLabel id="nuevoDescripcion" for="descripcion"
											value="Descripción: " style="color:white!important" />
										<p:inputTextarea id="descripcion"
											value="#{metodoController.nuevoMetodo.descrMt}"
											maxlength="200" rows="5" cols="30">
										</p:inputTextarea>

										<p:outputLabel id="nuevoCertificado" for="certificado"
											value="Certificado: " style="color:white!important" />
										<p:selectOneMenu id="certificado"
											value="#{metodoController.nuevoMetodo.certificadoMt}"
											size="30" maxlength="10">
											<f:selectItem itemLabel="Seleccione..." itemValue="" />
											<f:selectItem itemLabel="N/A" itemValue="N/A" />
											<f:selectItem itemLabel="Si" itemValue="Si" />
											<f:selectItem itemLabel="No" itemValue="No" />
										</p:selectOneMenu>

									</p:panelGrid>

								</div>
							</p:fieldset>

						</p:tab>
					</p:accordionPanel>

					<br />

					<center>
						<h:panelGrid styleClass="ui-panelgrid-blank">

							<p:commandButton process="@this,formNuevoMetodo"
								icon="fa fa-plus" value="Agregar"
								onclick="PF('nuevaExistencia').show();"
								update="@([id$=messagesForm])">
							</p:commandButton>

						</h:panelGrid>

						<br />
					</center>

					<p:dataTable id="tblExistenciasMetodo"
						value="#{metodoController.nuevoDetalleMetodos}" var="detalleM"
						emptyMessage="No se han encontrado coincidencias ">

						<p:column headerText="ID Existencia">
							<h:outputText
								value="#{metodoController.cambiarDatosExistencia(detalleM.idExistencia).idExistencia}" />
						</p:column>

						<p:column headerText="Producto">
							<h:outputText
								value="#{metodoController.cambiarDatosExistencia(detalleM.idExistencia).producto.nombrePr}" />
						</p:column>

						<p:column headerText="Cantidad">
							<h:outputText value="#{detalleM.cantidadDmt}" />
						</p:column>

						<p:column headerText="Unidad de Medida">
							<h:outputText
								value="#{metodoController.cambiarDatosExistencia(detalleM.idExistencia).unidadmedida.siglaUm}" />
						</p:column>

						<p:column headerText="Acciones">
							<center>
								<!-- **************************  NUEVO -> Boton Editar Temporal   *************************** -->
								<p:commandLink process="tblExistenciasMetodo"
									update="formEditarDetalleTemp" icon="ui-icon-check"
									onclick="PF('editarDetalleTemp').show();">

									<h:graphicImage value="/images/archivos/editar.png"
										title="Modificar" style="border:0px solid #CAD6E0;" width="35"
										height="35" />

									<f:setPropertyActionListener
										target="#{metodoController.detalleMetodo}" value="#{detalleM}">
									</f:setPropertyActionListener>

								</p:commandLink>


								<!-- **************************  NUEVO -> Boton Eliminar Temporal  *************************** -->

								<p:commandLink process="tblExistenciasMetodo"
									icon="ui-icon-check"
									onclick="PF('eliminarDetalleTemp').show();">

									<h:graphicImage value="/images/archivos/basurero.png"
										title="Eliminar" style="border:0px solid #CAD6E0;" width="35"
										height="35" />

									<f:setPropertyActionListener
										target="#{metodoController.detalleMetodo}" value="#{detalleM}">
									</f:setPropertyActionListener>

								</p:commandLink>

							</center>
						</p:column>

					</p:dataTable>


					<center>
						<br />
						<h:panelGrid columns="3">

							<p:commandButton style="width: 150px; margin: 10px"
								value="Guardar" icon="fa fa-save"
								actionListener="#{metodoController.guardarMetodo}"
								oncomplete="PF('filterMetodos').filter();"
								process="@this,formNuevoMetodo,tblExistenciasMetodo"
								update="@this,@([id$=messagesForm],[id$=formprincipal]),formNuevoMetodo">

							</p:commandButton>

							<p:commandButton style="width: 150px; margin: 10px"
								icon="fa fa-bitbucket" value="Limpiar" process="@this"
								actionListener="#{metodoController.limpiarCampos}"
								update="@this,@([id$=messagesForm]),formNuevoMetodo">
							</p:commandButton>

							<p:commandButton style="width: 150px; margin: 10px" value="Atrás"
								icon="fa fa-arrow-left" onclick="PF('nuevoMetodo').hide();"
								process="@none">
							</p:commandButton>

						</h:panelGrid>
					</center>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Nuevo - Agregar Existencias  *************************** -->

			<p:dialog id="panelNuevaExistencia" resizable="true"
				widgetVar="nuevaExistencia" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="110vh"
				height="45vh" header="Ingresar Detalle Método">

				<h:form id="formNuevaExistencia">

					<p:fieldset legend="Detalle Método"
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<center>
							<h:panelGrid columns="2">

								<p:commandButton icon="fa fa-search-plus"
									style="width: 150px; margin: 10px" value="Cargar Existencias"
									onclick="PF('listadoEx').show();">
								</p:commandButton>

							</h:panelGrid>
						</center>
						<br />
						<div class="ui-fluid">

							<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
								columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
								style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
								layout="grid">

								<p:outputLabel id="lblIdExistencia" for="idExistencia"
									value="ID Existencia: " style="color:white!important" />
								<p:outputLabel id="idExistencia"
									value="#{metodoController.existencia.idExistencia}" size="24" />

								<p:outputLabel id="lblNombre" for="nombre" value="Nombre: "
									style="color:white!important" />
								<p:outputLabel id="nombre"
									value="#{metodoController.existencia.producto.nombrePr}"
									size="24" />

								<p:outputLabel id="lblCantidad" for="cantidad"
									value="Cantidad: " style="color:white!important" />
								<p:inputNumber id="cantidad"
									value="#{metodoController.nuevoDetalleMetodo.cantidadDmt}"
									size="24" />

								<p:outputLabel id="lblUnidadM" for="unidadM"
									value="Unidad de Medida: " style="color:white!important" />
								<p:outputLabel id="unidadM"
									value="#{metodoController.existencia.unidadmedida.siglaUm}"
									size="24" />

							</p:panelGrid>

						</div>
						<br />
						<br />

						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{metodoController.agregarDetalleTemp}"
									process="@this,formNuevaExistencia"
									update="@this,@([id$=messagesForm],[id$=formNuevoMetodo]),formNuevaExistencia">

								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('nuevaExistencia').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>

					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Nuevo - Listado Existencias   *************************** -->

			<p:dialog id="panelListadoEx" resizable="true" widgetVar="listadoEx"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="135vh" height="70vh"
				header="Listado de Existencias">

				<h:form id="formListadoEx">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<br />
						<center>
							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Existencias" update="@this,tblExistencias"
								oncomplete="PF('filterExistencias').filter();">
							</p:commandButton>
						</center>
						<br />
						<br />
						<div class="ui-fluid" align="center">

							<p:dataTable id="tblExistencias"
								value="#{metodoController.existencias}" var="existencia"
								widgetVar="filterExistencias"
								emptyMessage="No se pudo encontrar ninguna coincidencia"
								filteredValue="#{metodoController.filterExistencia}" rows="7"
								paginator="true" resizableColumns="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
								rowKey="#{existencia.idExistencia}" selectionMode="single"
								selection="#{metodoController.selectExistencia}">

								<p:column headerText="ID Existencia"
									filterBy="#{existencia.idExistencia}"
									filterMatchMode="contains" style="width: 6%">
									<h:outputText value="#{existencia.idExistencia}" />
								</p:column>

								<p:column headerText="Producto"
									filterBy="#{existencia.producto.nombrePr}"
									filterMatchMode="contains" style="width: 12%">
									<h:outputText value="#{existencia.producto.nombrePr}" />
								</p:column>

								<p:column headerText="U.M."
									filterBy="#{existencia.unidadmedida.siglaUm}"
									filterMatchMode="contains" style="width: 6%">
									<h:outputText value="#{existencia.unidadmedida.siglaUm}" />
								</p:column>

								<p:column headerText="Bodega"
									filterBy="#{existencia.bodega.nombreBg}" style="width: 14%">
									<h:outputText value="#{existencia.bodega.nombreBg}" />
								</p:column>

								<p:column headerText="Grado"
									filterBy="#{existencia.grado.nombreGr}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.grado.nombreGr}" />
								</p:column>

								<p:column headerText="Hidratación"
									filterBy="#{existencia.grado.nombreGr}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.idHidratacion}" />
								</p:column>

								<p:column headerText="Concentración"
									filterBy="#{existencia.concentracion.nombreCon}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.concentracion.nombreCon}" />
								</p:column>

							</p:dataTable>
						</div>
						<br />
						<br />

						<center>

							<p:commandButton icon="fa fa-save" value="Seleccionar"
								process="@this,tblExistencias"
								action="#{metodoController.seleccionarExistencia}"
								update="@([id$=messagesForm],[id$=formNuevaExistencia])">

							</p:commandButton>

						</center>

					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Nuevo - Editar Detalle M. Temp   *************************** -->

			<p:dialog id="panelEditarDetalleM" resizable="true"
				widgetVar="editarDetalleTemp" draggable="false" modal="true"
				showEffect="explode" hideEffect="fade" responsive="true"
				dynamic="true" width="100vh" height="40vh"
				header="Editar Detalle Método">

				<h:form id="formEditarDetalleTemp">

					<p:fieldset legend="Detalle Metodo"
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<center>
							<center>

								<br />

								<div class="ui-fluid">
									<center>
										<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
											columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
											style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
											layout="grid">

											<p:outputLabel id="lblIdExistencia" for="idExistencia"
												value="Id Existencia: " style="color:white!important" />
											<p:outputLabel id="idExistencia"
												value="#{metodoController.detalleMetodo.idExistencia}"
												size="24" />

											<p:outputLabel id="lblNombrePro" for="nombrePro"
												value="Nombre: " style="color:white!important" />
											<p:outputLabel id="nombrePro"
												value="#{metodoController.cambiarDatosExistencia(metodoController.detalleMetodo.idExistencia).producto.nombrePr}"
												size="24" />

											<p:outputLabel id="lblCantidad" for="cantidad"
												value="Cantidad: " style="color:white!important" />
											<p:inputNumber id="cantidad"
												value="#{metodoController.detalleMetodo.cantidadDmt}"
												size="24" required="true"
												requiredMessage="Debe Agregar la Cantidad" />

											<p:outputLabel id="lblUnidadM" for="unidadM"
												value="Unidad de Medida: " style="color:white!important" />
											<p:outputLabel id="unidadM"
												value="#{metodoController.cambiarDatosExistencia(metodoController.detalleMetodo.idExistencia).unidadmedida.siglaUm}"
												size="24" disabled="true" />

										</p:panelGrid>
									</center>
								</div>
							</center>
							<br />

							<center>

								<h:panelGrid columns="2">

									<p:commandButton value="Guardar" icon="fa fa-save"
										style="width: 115px; margin: 10px" process="@form"
										actionListener="#{metodoController.editarTemp}"
										update="@([id$=messagesForm],[id$=tblExistenciasMetodo],formEditarDetalleTemp)">

									</p:commandButton>

									<p:commandButton value="Atrás "
										style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
										onclick="PF('editarDetalleTemp').hide();" process="@none">

									</p:commandButton>

								</h:panelGrid>

							</center>

						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Nuevo - Eliminar Detalle M. Temp   *************************** -->

			<h:form id="eliminarDetalleTemporal">
				<p:confirmDialog
					message="¿Esta seguro(a) que desea eliminar el Detalle Método seleccionado"
					header="Eliminar M.I." severity="info"
					widgetVar="eliminarDetalleTemp">
					<center>

						<p:commandButton value="Aceptar"
							onsuccess="PF('eliminarDetalleTemp').hide();"
							actionListener="#{metodoController.eliminarTemp}"
							update="@this,@([id$=messagesForm],[id$=tblExistenciasMetodo],formNuevoMetodo)" />

						<p:commandButton value="Cancelar"
							onclick="PF('eliminarDetalleTemp').hide();" type="button" />

					</center>
				</p:confirmDialog>

			</h:form>

			<!-- **************************  ◄◄ Panel Editar -  Editar Metodo ►►  *************************** -->

			<p:dialog id="panelEditarMetodo" resizable="false"
				widgetVar="editMetodo" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true"
				header="Editar Método y Detalle Método" width="140vh" height="65vh">

				<h:form id="formEditMetodo">

					<p:fieldset legend="Método"
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<div class="ui-fluid">
							<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
								columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
								layout="grid"
								style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;">

								<p:outputLabel id="lblId" for="editId" value="ID Método: "
									style="color:white!important" />
								<p:outputLabel id="editId"
									value="#{metodoController.metodo.idMetodo}" />

								<p:outputLabel id="lblMetodo" for="editNombre" value="Método: "
									style="color:white!important" />
								<p:inputText id="editNombre"
									value="#{metodoController.metodo.nombreMt}" maxlength="100" />

								<p:outputLabel id="lblServicio" for="editServicio"
									value="Servicio: " style="color:white!important" />
								<p:outputLabel id="editServicio"
									value="#{metodoController.metodo.servicio.nombreS}" />

								<p:outputLabel id="lblDescripcion" for="editDescripcion"
									value="Descripción: " style="color:white!important" />
								<p:inputTextarea id="editDescripcion"
									value="#{metodoController.metodo.descrMt}" maxlength="100"
									rows="5" cols="30" />

								<p:outputLabel id="lblCertificado" for="editCertificado"
									value="Certificado: " style="color:white!important" />
								<p:selectOneMenu id="editCertificado"
									value="#{metodoController.metodo.certificadoMt}" filter="true"
									filterMatchMode="contains" effect="fold">

									<f:selectItem itemLabel="Por favor seleccione" itemValue="" />
									<f:selectItem itemLabel="Seleccione..." itemValue="" />
									<f:selectItem itemLabel="N/A" itemValue="N/A" />
									<f:selectItem itemLabel="Si" itemValue="Si" />
									<f:selectItem itemLabel="No" itemValue="No" />

								</p:selectOneMenu>

							</p:panelGrid>

						</div>
						<br />
						<br />
						<center>
							<h:panelGrid styleClass="ui-panelgrid-blank">

								<p:commandButton process="@this,formEditMetodo"
									icon="fa fa-plus" value="Agregar"
									onclick="PF('nuevaExTemp').show();"
									update="@([id$=messagesForm])">
								</p:commandButton>

							</h:panelGrid>

							<br />
						</center>

						<p:dataTable id="tblDetalleM"
							value="#{metodoController.tempDetalleMetodosEdit}"
							var="detalleDM"
							emptyMessage="No se han encontrado coincidencias ">

							<p:column headerText="ID Existencia">
								<h:outputText
									value="#{metodoController.cambiarDatosExistencia(detalleDM.idExistencia).idExistencia}" />
							</p:column>

							<p:column headerText="Producto">
								<h:outputText
									value="#{metodoController.cambiarDatosExistencia(detalleDM.idExistencia).producto.nombrePr}" />
							</p:column>

							<p:column headerText="Cantidad">
								<h:outputText value="#{detalleDM.cantidadDmt}" />
							</p:column>

							<p:column headerText="Unidad de Medida">
								<h:outputText
									value="#{metodoController.cambiarDatosExistencia(detalleDM.idExistencia).unidadmedida.siglaUm}" />
							</p:column>

							<p:column headerText="Acciones">
								<center>
									<!-- **************************  Editar -> Boton Editar Temporal   *************************** -->

									<p:commandLink process="tblDetalleM" icon="ui-icon-check"
										update="formEditDetalleTemp"
										onclick="PF('editDMTemp').show();">

										<h:graphicImage value="/images/archivos/editar.png"
											title="Modificar" style="border:0px solid #CAD6E0;"
											width="35" height="35" />

										<f:setPropertyActionListener
											target="#{metodoController.tempDetalleMetodoEdit}"
											value="#{detalleDM}">
										</f:setPropertyActionListener>

									</p:commandLink>


									<!-- **************************  Editar -> Boton Eliminar Temporal  *************************** -->

									<p:commandLink process="tblDetalleM" icon="ui-icon-check"
										onclick="PF('eliminarDMTemp').show();">

										<h:graphicImage value="/images/archivos/basurero.png"
											title="Eliminar" style="border:0px solid #CAD6E0;" width="35"
											height="35" />

										<f:setPropertyActionListener
											target="#{metodoController.tempDetalleMetodoEdit}"
											value="#{detalleDM}">
										</f:setPropertyActionListener>

									</p:commandLink>
								</center>
							</p:column>

						</p:dataTable>

						<center>
							<br />
							<h:panelGrid columns="2">

								<p:commandButton value="Modificar" icon="fa fa-edit"
									style="width: 115px; margin: 5px"
									actionListener="#{metodoController.editMetodo}"
									process="@this,formEditMetodo"
									update="@this,@([id$=messagesForm],[id$=formprincipal])"
									oncomplete="PF('filterMetodos').filter();">

								</p:commandButton>

								<p:commandButton value="Atrás " icon="fa fa-arrow-left"
									style="width: 115px; margin: 5px"
									onclick="PF('editMetodo').hide();"
									process="@this,formEditMetodo"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formEditMetodo"
									oncomplete="PF('filterMetodos').filter()">
								</p:commandButton>

							</h:panelGrid>

						</center>

					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Editar -> Agregar Existencia *************************** -->

			<p:dialog id="panelNuevaExistenciaTemp" resizable="true"
				draggable="false" widgetVar="nuevaExTemp" modal="true"
				showEffect="explode" hideEffect="fade" responsive="true"
				dynamic="true" width="110vh" height="45vh"
				header="Ingresar Detalle Método">

				<h:form id="formNuevaExistenciaTemp">

					<p:fieldset legend="Detalle Método"
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<center>
							<h:panelGrid columns="2">

								<p:commandButton icon="fa fa-search-plus"
									style="width: 150px; margin: 10px" value="Cargar Existencias"
									onclick="PF('listadoExTemp').show();">
								</p:commandButton>

							</h:panelGrid>
						</center>
						<br />
						<div class="ui-fluid">

							<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
								columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
								style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
								layout="grid">

								<p:outputLabel id="lblIdExistencia" for="idExistencia"
									value="ID Existencia: " style="color:white!important" />
								<p:outputLabel id="idExistencia"
									value="#{metodoController.existencia.idExistencia}" size="24" />

								<p:outputLabel id="lblNombre" for="nombre" value="Nombre: "
									style="color:white!important" />
								<p:outputLabel id="nombre"
									value="#{metodoController.existencia.producto.nombrePr}"
									size="24" />

								<p:outputLabel id="lblCantidad" for="cantidad"
									value="Cantidad: " style="color:white!important" />
								<p:inputNumber id="cantidad"
									value="#{metodoController.tempDetalleMetodoEdit.cantidadDmt}"
									size="24" />

								<p:outputLabel id="lblUnidadM" for="unidadM"
									value="Unidad de Medida: " style="color:white!important" />
								<p:outputLabel id="unidadM"
									value="#{metodoController.existencia.unidadmedida.siglaUm}"
									size="24" />

							</p:panelGrid>

						</div>
						<br />
						<br />

						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{metodoController.agregarDetalleTempEdit}"
									process="@this,formNuevaExistenciaTemp"
									update="@this,@([id$=messagesForm],[id$=formEditMetodo]),formNuevaExistenciaTemp">

								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('nuevaExTemp').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>

					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Editar -> Listado de Existencias *************************** -->

			<p:dialog id="panelListadoExTemp" resizable="true"
				widgetVar="listadoExTemp" modal="true" showEffect="explode"
				hideEffect="fade" draggable="false" responsive="true" dynamic="true"
				width="135vh" height="70vh" header="Listado de Existencias">

				<h:form id="formListadoExTemp">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<br />
						<center>
							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Existencias" update="@this,tblExistenciasTemp"
								oncomplete="PF('filterExistencias').filter();">
							</p:commandButton>
						</center>
						<br />
						<br />
						<div class="ui-fluid" align="center">

							<p:dataTable id="tblExistenciasTemp"
								value="#{metodoController.existencias}" var="existencia"
								widgetVar="filterExistencias"
								emptyMessage="No se pudo encontrar ninguna coincidencia"
								filteredValue="#{metodoController.filterExistencia}" rows="7"
								paginator="true" resizableColumns="true"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
								rowKey="#{existencia.idExistencia}" selectionMode="single"
								selection="#{metodoController.selectExDMTemp}">

								<p:column headerText="ID Existencia"
									filterBy="#{existencia.idExistencia}"
									filterMatchMode="contains" style="width: 6%">
									<h:outputText value="#{existencia.idExistencia}" />
								</p:column>

								<p:column headerText="Producto"
									filterBy="#{existencia.producto.nombrePr}"
									filterMatchMode="contains" style="width: 12%">
									<h:outputText value="#{existencia.producto.nombrePr}" />
								</p:column>

								<p:column headerText="U.M."
									filterBy="#{existencia.unidadmedida.siglaUm}"
									filterMatchMode="contains" style="width: 6%">
									<h:outputText value="#{existencia.unidadmedida.siglaUm}" />
								</p:column>

								<p:column headerText="Bodega"
									filterBy="#{existencia.bodega.nombreBg}" style="width: 14%">
									<h:outputText value="#{existencia.bodega.nombreBg}" />
								</p:column>

								<p:column headerText="Grado"
									filterBy="#{existencia.grado.nombreGr}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.grado.nombreGr}" />
								</p:column>

								<p:column headerText="Hidratación"
									filterBy="#{existencia.grado.nombreGr}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.idHidratacion}" />
								</p:column>

								<p:column headerText="Concentración"
									filterBy="#{existencia.concentracion.nombreCon}"
									filterMatchMode="contains" style="width: 8%">
									<h:outputText value="#{existencia.concentracion.nombreCon}" />
								</p:column>

							</p:dataTable>
						</div>
						<br />
						<br />

						<center>

							<p:commandButton icon="fa fa-save" value="Seleccionar"
								process="@this,tblExistenciasTemp"
								action="#{metodoController.seleccionarExistenciaEdit}"
								update="@([id$=messagesForm],[id$=formNuevaExistenciaTemp])">

							</p:commandButton>

						</center>

					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Editar->  Editar Detalle M Temporal  *************************** -->

			<p:dialog id="pnlEditarDetalle" resizable="true"
				widgetVar="editDMTemp" draggable="false" modal="true"
				showEffect="explode" hideEffect="fade" responsive="true"
				dynamic="true" width="100vh" height="40vh"
				header="Editar Detalle Método">

				<h:form id="formEditDetalleTemp">

					<p:fieldset legend="Editar Detalle Método"
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<center>
							<br />

							<div class="ui-fluid">
								<center>
									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
										style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
										layout="grid">

										<p:outputLabel id="lblIdExistenciaE" for="idExistenciaE"
											value="Id Existencia: " style="color:white!important" />
										<p:outputLabel id="idExistenciaE"
											value="#{metodoController.tempDetalleMetodoEdit.idExistencia}"
											size="24" />

										<p:outputLabel id="lblNombreProE" for="nombreProE"
											value="Nombre: " style="color:white!important" />
										<p:outputLabel id="nombreProE"
											value="#{metodoController.cambiarDatosExistencia(metodoController.tempDetalleMetodoEdit.idExistencia).producto.nombrePr}"
											size="24" />

										<p:outputLabel id="lblCantidadE" for="cantidadE"
											value="Cantidad: " style="color:white!important" />
										<p:inputNumber id="cantidadE"
											value="#{metodoController.tempDetalleMetodoEdit.cantidadDmt}"
											size="24" required="true"
											requiredMessage="Debe Agregar la Cantidad" />

										<p:outputLabel id="lblUnidadME" for="unidadME"
											value="Unidad de Medida: " style="color:white!important" />
										<p:outputLabel id="unidadME"
											value="#{metodoController.cambiarDatosExistencia(metodoController.tempDetalleMetodoEdit.idExistencia).unidadmedida.siglaUm}"
											size="24" disabled="true" />

									</p:panelGrid>
								</center>
							</div>
						</center>
						<br />

						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Editar" icon="fa fa-edit"
									style="width: 115px; margin: 10px" process="@form"
									actionListener="#{metodoController.editDMTemp}"
									update="@([id$=messagesForm],[id$=tblDetalleM],formEditDetalleTemp)">

								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('editDMTemp').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>


					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel Editar - Eliminar Detalle M. Temp   *************************** -->

			<h:form id="eliminarDMTemp">
				<p:confirmDialog
					message="¿Esta seguro(a) que desea eliminar el Detalle Método seleccionado"
					header="Eliminar Detalle Método" severity="info"
					widgetVar="eliminarDMTemp">
					<center>

						<p:commandButton value="Aceptar"
							onsuccess="PF('eliminarDMTemp').hide();"
							actionListener="#{metodoController.eliminarDMTemp}"
							update="@this,@([id$=messagesForm],[id$=tblDetalleM],formEditDetalleTemp)" />

						<p:commandButton value="Cancelar"
							onclick="PF('eliminarDMTemp').hide();" type="button" />

					</center>
				</p:confirmDialog>

			</h:form>

			<!-- **************************  ◄◄ Panel Ver - Ver Metodo ►►  *************************** -->

			<p:dialog id="panelVerMetodo" resizable="false"
				widgetVar="showMetodo" modal="true" showEffect="explode"
				hideEffect="fade" draggable="false" responsive="true" dynamic="true"
				width="125vh" height="55vh" header="Detalles Método">

				<h:form id="formVerMetodo">

					<p:fieldset legend="Método y Detalle Método"
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<div class="ui-fluid">
							<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
								columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas,pnlGridAjusteDivs"
								style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left;"
								layout="grid">

								<p:outputLabel id="verMetodo" for="metodo" value="Método: "
									style="color:white!important" />
								<p:outputLabel id="metodo"
									value="#{metodoController.metodo.nombreMt}" />

								<p:outputLabel id="verServicio" for="servicio"
									value="Servicio: " style="color:white!important" />
								<p:outputLabel id="servicio"
									value="#{metodoController.metodo.servicio.nombreS}" />

								<p:outputLabel id="verDescripcion" for="descripcion"
									value="Descripción: " style="color:white!important" />
								<p:outputLabel id="descripcion"
									value="#{metodoController.metodo.descrMt}" />

								<p:outputLabel id="verCertificado" for="certificado"
									value="Certificado: " style="color:white!important" />
								<p:outputLabel id="certificado"
									value="#{metodoController.metodo.certificadoMt}" />

							</p:panelGrid>
						</div>

					</p:fieldset>
					<br />
					<br />

					<p:fieldset legend="Detalle Método"
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<div class="ui-fluid">

							<p:panel id="existencia">
								<p:dataTable id="tblVerMetodo"
									value="#{metodoController.tempDetalleMetodos}" var="metodo"
									emptyMessage="No se han encontrado coincidencias">

									<p:column headerText="ID Existencia">
										<h:outputText
											value="#{metodoController.cambiarDatosExistencia(metodo.idExistencia).idExistencia}" />
									</p:column>

									<p:column headerText="Producto">
										<h:outputText
											value="#{metodoController.cambiarDatosExistencia(metodo.idExistencia).producto.nombrePr}" />
									</p:column>

									<p:column headerText="Cantidad">
										<h:outputText value="#{metodo.cantidadDmt}" />
									</p:column>

									<p:column headerText="UM">
										<h:outputText
											value="#{metodoController.cambiarDatosExistencia(metodo.idExistencia).unidadmedida.siglaUm}" />
									</p:column>

								</p:dataTable>
							</p:panel>

						</div>


					</p:fieldset>

					<center>

						<br />

						<center>

							<h:panelGrid columns="1">

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('showMetodo').hide();"
									process="@this,formVerMetodo"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formVerMetodo"
									oncomplete="PF('filterMetodos').filter()">

								</p:commandButton>

							</h:panelGrid>

						</center>
					</center>


				</h:form>
			</p:dialog>

			<!-- **************************  ◄◄ Panel Eliminar -  Eliminar Metodo ►►  *************************** -->

			<h:form id="eliminarMetodo">
				<p:confirmDialog
					message="¿Esta seguro(a) que desea eliminar el Método Seleccionado"
					header="Eliminar Método" severity="info" widgetVar="eliminarMetodo">
					<center>

						<p:commandButton value="Aceptar"
							oncomplete="PF('filterMetodos').filter();"
							onsuccess="PF('eliminarMetodo').hide();"
							actionListener="#{metodoController.eliminarMetodo}"
							update="@([id$=messagesForm],[id$=formprincipal],eliminarMetodo)" />


						<p:commandButton value="Cancelar"
							onclick="PF('eliminarMetodo').hide();" type="button" />

					</center>

				</p:confirmDialog>
			</h:form>

		</h:body>

		<script type="text/javascript">
			function start(){
			PF('statusDialog').show();
			} 

			function stop(){
			PF('statusDialog').hide();
			}

			window.onbeforeunload = function(event) {
				rc();
			    event.returnValue = "";
			};

			PrimeFaces.locales['es'] = {
		            closeText: 'Cerrar',
		            prevText: 'Anterior',
		            nextText: 'Siguiente',
		            monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
		            monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
		            dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
		            dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
		            dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'],
		            weekHeader: 'Semana',
		            firstDayOfWeek: 1,
		            isRTL: false,
		            showMonthAfterYear: false,
		            yearSuffix: '',
		            timeOnlyTitle: 'Sólo hora',
		            timeText: 'Tiempo',
		            hourText: 'Hora',
		            minuteText: 'Minuto',
		            secondText: 'Segundo',
		            currentText: 'Fecha actual',
		            ampm: false,
		            month: 'Mes',
		            week: 'Semana',
		            day: 'Día',
		            allDayText: 'Todo el día'
		        };

		</script>

		<!-- **************************  Scroll en dialogo   *************************** -->
		<style type="text/css">
.ui-dialog-content {
	max-width: 1500px !important;
	max-height: 500px !important;
	margin-bottom: 5px !important;
}
</style>

	</ui:define>
</ui:composition>