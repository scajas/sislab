<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/templates/common.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:v="http://validators.epn.edu.ec.com"
	xmlns:ps="http://primefaces.org/apark"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:rich="http://primefaces.org/ui">


	<ui:define name="pageTitle">Orde Trabajo desde Factura</ui:define>
	<ui:define name="body">

		<h:head>

			<script type="text/javascript">
	
		//<![CDATA[
		function printDiv(divName){
			var f =new Date();
			var printContents =document.getElementById(divName).innerHTML;
			var originalContents =document.body.innerHTML;
			document.body.innerHTML=printContents;
			window.print();
			document.body.innerHTML=originalContents;
		}

		//]]>

	</script>
		</h:head>

		<p:ajaxStatus onstart="PF('statusDialog').show()"
			onsuccess="PF('statusDialog').hide()" />
		<p:dialog id="progressImage" widgetVar="statusDialog" modal="true"
			draggable="false" closable="false" resizable="false"
			header="Cargando, por favor espere.">
			<center>
				<h:graphicImage value="/images/archivos/cargando.gif"
					style="border:0px solid #CAD6E0;" width="50" height="50" />
				<br /> <br />
				<p:commandButton style="width: 125px; margin: 10px"
					icon=" fa fa-arrow-left" onclick="PF('statusDialog').hide();"
					process="@none" value="Cerrar">

				</p:commandButton>
			</center>

		</p:dialog>

		<h:body onload="rc();">

			<p:growl id="messagesForm" showDetail="true" sticky="false"
				autoupdate="true" life="3000" />
			<h:form id="formprincipal">

				<p:remoteCommand name="rc"
					action="#{ordenFacturaController.limpiarTodosCampos()}"
					update="formprincipal" />


				<p:panel>

					<br />

					<!-- Boton De Nuevo -->
					<center>
						<p:commandLink process="@this" icon="ui-icon-check"
							actionListener="#{ordenFacturaController.limpiarTodosCampos}"
							onclick="PF('nuevoOT').show()" update="@this,formAgregarOT">

							<h:graphicImage value="/images/archivos/agregar.png"
								title="Nuevo" style="border:0px solid #CAD6E0;" width="35"
								height="35" />
							<p>
								<strong>Nuevo</strong>
							</p>
						</p:commandLink>

					</center>

					<p:fieldset legend="Buscar Orden"
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
						<center>
							<h:form id="formBuscar">
								<div class="ui-fluid">

									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
										style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left; width:60%"
										layout="grid">

										<p:outputLabel value="Orden Trabajo:" for="idOT"
											style="color:white!important" />
										<p:inputText id="idOT"
											value="#{ordenFacturaController.buscarOrdenTrabajo.idOrden}"
											size="24" placeholder="ejm. DC-OT0001-2010" />

										<p:outputLabel value="Proforma:" for="idPro"
											style="color:white!important" />
										<p:inputText id="idPro"
											value="#{ordenFacturaController.buscarOrdenTrabajo.idFactura}"
											size="24" placeholder="ejm. DC-P0001-2010" />

									</p:panelGrid>

									<br />

									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
										style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.50);text-align: left; width:60%"
										layout="grid">

										<p:outputLabel value="Cliente:" for="cliente"
											style="color:white!important" />
										<p:inputText id="cliente"
											value="#{ordenFacturaController.cliente.nombreCl}" size="24"
											placeholder="Nombre del Cliente" />


									</p:panelGrid>

									<br />

									<p:panelGrid columns="4" styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
										style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left; width:60%"
										layout="grid">

										<p:outputLabel value="Cédula: " for="cedula"
											style="color:white!important" />
										<p:inputText id="cedula"
											value="#{ordenFacturaController.cliente.cedula}" size="24"
											placeholder="ejm. 1750505050" />

										<p:outputLabel value="RUC:" for="ruc"
											style="color:white!important" />
										<p:inputText id="ruc"
											value="#{ordenFacturaController.cliente.rucCl}" size="24"
											placeholder="ejm. 1790883795001" />

										<h:outputLabel value="Fecha desde: "
											style="color:white!important; font-size: 17px" />
										<p:calendar id="fechaInicio" readonlyInput="true"
											value="#{ordenFacturaController.fechaInicio}"
											pattern="dd/MM/yyyy" locale="es"
											onkeypress="return permite(event, 'none')"
											requiredMessage="Fecha Inicial Requerida" navigator="true"
											effect="fadeIn" effectDuration="100" showOn="button"
											size="24">
											<p:ajax event="dateSelect" update="fechaFinal" />
											<p:ajax event="keyup" update="fechaFinal" />
										</p:calendar>

										<h:outputLabel value="Fecha hasta: "
											style="color:white!important; font-size: 17px" />
										<p:calendar id="fechaFinal" readonlyInput="true"
											disabled="#{ordenFacturaController.disabledSelectItem() != true}"
											value="#{ordenFacturaController.fechaFinal}"
											mindate="#{ordenFacturaController.fechaInicio}"
											pattern="dd/MM/yyyy" locale="es" required="true"
											onkeypress="return permite(event, 'none')"
											requiredMessage="Fecha Final Requerida" navigator="true"
											effect="fadeIn" effectDuration="100" showOn="button"
											size="24">

										</p:calendar>
									</p:panelGrid>

									<br /> <br />


									<center>
										<p:commandLink
											actionListener="#{ordenFacturaController.buscarOrdenTrabajos}"
											update="@([id$=tblOrden]),@([id$=messagesForm])"
											process="@this,formBuscar">

											<h:graphicImage value="/images/archivos/busqueda.png"
												class="btn bt-success" title="Buscar"
												style="border:0px solid #CAD6E0;" width="35" height="35 " />

											<p>
												<strong>Buscar</strong>
											</p>
										</p:commandLink>

									</center>

									<br />
								</div>
							</h:form>


						</center>
					</p:fieldset>
					<br />
					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
						<p:dataTable id="tblOrden"
							value="#{ordenFacturaController.listaOrdenTrabajo}" var="ordenT"
							emptyMessage="No se pudo encontrar ninguna coincidencia"
							rows="10" paginator="true"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15"
							style="border: 0;background: 0;width:100%;-webkit-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
						-moz-box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;
						box-shadow: 0px 9px 18px 4px rgba(0,0,0,0.73)!important;"
							paginatorPosition="bottom">

							<f:facet name="header">
								Ordenes de Trabajo desde Factura
							</f:facet>

							<p:column headerText="Id OT">
								<h:outputText value="#{ordenT.idOrden}" />
							</p:column>

							<p:column headerText="Id OT">
								<h:outputText value="#{ordenT.idFactura}" />
							</p:column>

							<p:column headerText="Cliente">
								<h:outputText value="#{ordenT.cliente.nombreCl}" />
							</p:column>

							<p:column headerText="F. Recep.">
								<h:outputText
									value="#{ordenFacturaController.cambioFecha(ordenT.fechaordenOt)}" />
							</p:column>

							<p:column headerText="F. Entrega">
								<h:outputText
									value="#{ordenFacturaController.cambioFecha(ordenT.fechaentregaOt)}" />
							</p:column>

							<p:column headerText="F. Cierre">
								<h:outputText
									value="#{ordenFacturaController.cambioFecha(ordenT.fechaCierre)}" />
							</p:column>

							<p:column headerText="#M">
								<h:outputText value="#{ordenT.numeromuestraOt}" />
							</p:column>

							<p:column headerText="Fecha cierre">
								<p:commandLink update="@this,formEditarFechaCierre"
									process="@this,tblOrden" icon="ui-icon-check"
									action="#{ordenFacturaController.validarEstadoOT(ordenT, 'editarFechaCierre')}">

									<h:outputText value="Fecha Cierre" />

									<f:setPropertyActionListener
										target="#{ordenFacturaController.ordenTrabajo}"
										value="#{ordenT}">
									</f:setPropertyActionListener>
								</p:commandLink>

							</p:column>

							<p:column headerText="Fecha Entrega">
								<p:commandLink update="@this,formEditarFechaEntrega"
									process="@this,tblOrden" icon="ui-icon-check"
									action="#{ordenFacturaController.validarFechaEntregaOT(ordenT, 'editarFechaEntrega')}">

									<h:outputText value="Fecha Entrega" />

									<f:setPropertyActionListener
										target="#{ordenFacturaController.ordenTrabajo}"
										value="#{ordenT}">
									</f:setPropertyActionListener>
								</p:commandLink>

							</p:column>

							<p:column headerText="Ver ordens">
								<center>

									<p:commandLink update="@this,formVerOT"
										process="@this,tblOrden" icon="ui-icon-check"
										actionListener="#{ordenFacturaController.cargarDetalleOT(ordenT.idOrden)}"
										onsuccess="PF('verOT').show();">

										<h:graphicImage value="/images/archivos/verMas.png"
											title="Ver Orden" style="border:0px solid #CAD6E0;"
											width="35" height="35" />

										<f:setPropertyActionListener
											target="#{ordenFacturaController.ordenTrabajo}"
											value="#{ordenT}">
										</f:setPropertyActionListener>
									</p:commandLink>

								</center>


							</p:column>

							<p:column headerText="Acciones">
								<center>

									<!-- **************************  Boton Editar   *************************** -->
									<p:commandLink icon="ui-icon-check" process="@this,tblOrden"
										action="#{ordenFacturaController.cargarDetalleProformaEdit(ordenT, 'editarOT')}"
										update="formEditarOT">

										<h:graphicImage value="/images/archivos/editar.png"
											title="Modificar" style="border:0px solid #CAD6E0;"
											width="35" height="35" />

										<f:setPropertyActionListener
											target="#{ordenFacturaController.ordenTrabajo}"
											value="#{ordenT}">
										</f:setPropertyActionListener>


									</p:commandLink>

								</center>
							</p:column>

						</p:dataTable>
					</p:fieldset>

					<br />
					<br />

				</p:panel>

			</h:form>


			<!-- **************************  Panel - Dialogo de Registrar Nuevo   *************************** -->

			<p:dialog id="panelNuevoOT" resizable="true" widgetVar="nuevoOT"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="150vh" height="73vh"
				header="Agregar Orden de Trabajo">


				<h:form id="formAgregarOT">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


							<!-- Buscar Facturas -->

							<p:accordionPanel>
								<p:tab title="Encabezado Orden Trabajo">
									<center>

										<br />

										<p:commandButton icon="fa fa-search-plus"
											style="border:none;text-align: center; width: 180px;"
											value="Buscar Facturas" process="@this"
											actionListener="#{ordenFacturaController.buscarFacturas}"
											onsuccess="PF('listadoF').show()"
											disabled="#{ordenFacturaController.disabledButtonFac() != true}">
										</p:commandButton>

										<br /> <br />

									</center>

									<!-- Datos de factura cargado -->
									<center>
										<p:fieldset
											style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

											<p:panelGrid columns="4" styleClass="ui-noborder"
												layout="grid" style="border:none;text-align: left">

												<h:outputText for="proforma" value="Proforma: "
													style="font-weight:bold" />
												<h:outputText id="proforma"
													value="#{ordenFacturaController.factura.idProforma}" />

												<h:outputText for="factura" value="Factura: "
													style="font-weight:bold" />
												<h:outputText id="factura"
													value="#{ordenFacturaController.factura.idFactura}" />

											</p:panelGrid>


											<p:panelGrid columns="4" layout="grid"
												styleClass="ui-noborder"
												style="border:none;text-align: left">

												<h:outputText for="cliente" value="Cliente: "
													style="font-weight:bold" />
												<h:outputText id="cliente"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.nombreCl}" />

												<h:outputText for="descCliente" value="Descr. C: "
													style="font-weight:bold" />
												<h:outputText id="descCliente"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.nombreCl}" />

											</p:panelGrid>

											<p:panelGrid columns="4" layout="grid"
												style="border:none;text-align: left">

												<h:outputText for="direccion" value="Dirección: "
													style="font-weight:bold" />
												<h:outputText id="direccion"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.direccionCl}" />

											</p:panelGrid>

											<p:panelGrid columns="4" layout="grid"
												styleClass="ui-noborder"
												style="border:none;text-align: left">

												<h:outputText for="telefono" value="Telefono: "
													style="font-weight:bold" />
												<h:outputText id="telefono"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.telefonoCl}" />

												<h:outputText for="fax" value="Fax: "
													style="font-weight:bold" />
												<h:outputText id="fax"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.faxCl}" />

												<h:outputText for="fecha" value="Fecha: "
													style="font-weight:bold" />
												<h:outputText id="fecha"
													value="#{ordenFacturaController.cambioFecha(ordenFacturaController.nuevoOrdenTrabajo.fechaordenOt)}" />

												<h:outputText for="muestras" value="Nro. Muestras: "
													style="font-weight:bold" />
												<h:outputText id="muestras"
													value="#{ordenFacturaController.nuevoOrdenTrabajo.numeromuestraOt}" />



											</p:panelGrid>


										</p:fieldset>
									</center>

								</p:tab>
								<br />
								<br />

							</p:accordionPanel>

							<!-- Agregar -->

							<br />
							<center>
								<p:commandButton value="Agregar" icon="fa fa-plus"
									title="Agregar Detalle Orden Trabajo"
									style="width: 125px; border-radius: 3px 3px 3px 3px;"
									process="@this"
									actionListener="#{ordenFacturaController.validarSeleccionFactura}"
									update="@this,@([id$=messagesForm]),formDetalleOT">

								</p:commandButton>
							</center>
							<br />
							<center>
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panel id="detallePro" header="Detalle Orden Trabajo">
										<p:dataTable id="tblDetallePro"
											value="#{ordenFacturaController.listaDetalleOrden}"
											var="detalleOT" sortBy="#{detalleOT.idServicio}"
											emptyMessage="No se han registrado detalles de proforma, clic en el boton agregar para registrar.">

											<p:column headerText="Servicio">
												<h:outputText
													value="#{ordenFacturaController.servicio(detalleOT.idServicio).nombreS}" />
											</p:column>

											<p:column headerText="Método">
												<h:outputText
													value="#{ordenFacturaController.metodo(detalleOT.idMetodo)}" />
											</p:column>

											<p:column headerText="Unidad/Laboratorio">
												<h:outputText
													value="#{ordenFacturaController.servicio(detalleOT.idServicio).laboratorio.nombreL}" />
											</p:column>

											<p:column headerText="Responsable">
												<h:outputText value="#{detalleOT.personal.nombresPe}" />
											</p:column>

											<p:column headerText="h/T">
												<h:outputText value="#{detalleOT.horasTrabajo}" />
											</p:column>

											<p:column headerText="F. Inicio">
												<h:outputText
													value="#{ordenFacturaController.cambioFecha(detalleOT.fechaInicioAnalisis)}" />
											</p:column>

											<p:column headerText="F. Fin">
												<h:outputText
													value="#{ordenFacturaController.cambioFecha(detalleOT.fechaFinAnalisis)}" />
											</p:column>


											<p:column headerText="Acciones">
												<center>

													<!-- **************************  Boton Editar   *************************** -->
													<p:commandLink icon="ui-icon-check"
														oncomplete="PF('editarDetalleOT').show();"
														action="#{ordenFacturaController.guardarTempDetalleOT()}"
														actionListener="#{ordenFacturaController.cambiarIdTempPanel(0,0)}"
														update="formEditarDetalleOT">

														<h:graphicImage value="/images/archivos/editar.png"
															title="Modificar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{ordenFacturaController.detalleOrden}"
															value="#{detalleOT}">
														</f:setPropertyActionListener>

													</p:commandLink>

													<!-- **************************  Boton Eliminar   *************************** -->


													<p:commandLink process="@this" icon="ui-icon-check"
														onclick="PF('cdEliminarDetalleOT').show();"
														actionListener="#{ordenFacturaController.cambiarIdTempPanel(0,0)}">

														<h:graphicImage value="/images/archivos/basurero.png"
															title="Eliminar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{ordenFacturaController.detalleOrden}"
															value="#{detalleOT}">
														</f:setPropertyActionListener>

													</p:commandLink>

												</center>
											</p:column>

										</p:dataTable>
									</p:panel>


								</p:fieldset>

								<br />

								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panelGrid layout="grid" columns="2"
										styleClass="ui-panelgrid-blank"
										columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
										style="border: solid;border-width: 1px; border-color: #E6E6E6;text-align: left;">

										<p:outputLabel value="Observaciones: " for="observaciones"
											style="color:white!important" />
										<p:inputText id="observaciones"
											value="#{ordenFacturaController.nuevoOrdenTrabajo.observOt}"
											size="24" />

									</p:panelGrid>

								</p:fieldset>
							</center>

							<center>

								<br /> <br />

								<h:panelGrid columns="3">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Guardar" icon="fa fa-save"
										process="@this,formAgregarOT"
										disabled="#{ordenFacturaController.disabledButton() != true}"
										actionListener="#{ordenFacturaController.guardarOT}"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarOT">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon="fa fa-bitbucket" value="Limpiar"
										actionListener="#{ordenFacturaController.limpiarFormularios()}"
										update="@this,@([id$=messagesForm]),formAgregarOT">
									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left" onclick="PF('nuevoOT').hide();"
										process="@none" value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>


			<!-- **************************  Panel - Agregar Detalle Orden  *************************** -->
			<p:dialog id="panelNuevoDetalleOT" resizable="true"
				widgetVar="detalleOT" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="150vh"
				height="73vh" header="Agregar Detalle Orden">


				<h:form id="formDetalleOT">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<!-- **************************  Sub-Panel - Buscar Servicio   *************************** -->
						<div class="ui-g">
							<div class="ui-g-6">
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
									-moz-border-radius: 10px 10px 10px 10px;
									-webkit-border-radius: 10px 10px 10px 10px;
									border: 0px solid #000000;
									border-style: double;
									border-width: 1px;
									border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
									legend="Servicio">

									<p:dataTable id="tblServicio"
										value="#{ordenFacturaController.servicios}" var="serv"
										widgetVar="filterServiciosTable"
										emptyMessage="No se pudo encontrar ninguna coincidencia"
										filteredValue="#{ordenFacturaController.filtroServicios}"
										rows="5" paginator="true"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
										rowKey="#{serv.idServicio}"
										selection="#{ordenFacturaController.nuevoServicio}"
										selectionMode="single">
										<p:ajax event="rowSelect"
											listener="#{ordenFacturaController.validarDetalleOT}"
											update="@([id$=messagesForm])" />

										<p:column headerText="ID" filterBy="#{serv.idServicio}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.idServicio}" />
										</p:column>

										<p:column headerText="Nombre" filterBy="#{serv.nombreS}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.nombreS}" />
										</p:column>

										<p:column headerText="Laboratorio"
											filterBy="#{serv.laboratorio.nombreL}"
											filterMatchMode="contains">
											<h:outputText value="#{serv.laboratorio.nombreL}" />
										</p:column>

									</p:dataTable>
									<br />

								</p:fieldset>
							</div>

							<!-- **************************  Sub-Panel - Registro General  *************************** -->

							<div class="ui-g-6 ui-g-nopad">
								<div class="ui-g-12">
									<!-- **************************  Sub-Panel - Informacion Servicio   *************************** -->
									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
										-moz-border-radius: 10px 10px 10px 10px;
										-webkit-border-radius: 10px 10px 10px 10px;
										border: 0px solid #000000;
										border-style: double;
										border-width: 1px;
										border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Informacion Servicio">

										<div class="ui-fluid">

											<center>
												<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
													columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs"
													style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left"
													layout="grid">

													<p:outputLabel for="servicio" value="Servicio: "
														style="color:white!important" />
													<p:outputLabel id="servicio"
														value="#{ordenFacturaController.nuevoServicio.nombreS}"
														size="30" maxlength="100" />

													<p:outputLabel for="laboratorio" value="Laboratorio: "
														style="color:white!important" />
													<p:outputLabel id="laboratorio"
														value="#{ordenFacturaController.nuevoServicio.laboratorio.nombreL}"
														size="30" maxlength="100" />

													<p:outputLabel for="metodo" value="Método: "
														style="color:white!important" />
													<p:selectOneMenu id="metodo"
														value="#{ordenFacturaController.nuevoDetalleOrden.idMetodo}">
														<f:selectItem itemLabel="Ninguno..."
															itemValue="#{ordenFacturaController.metodoNA.idMetodo}" />
														<f:selectItems value="#{ordenFacturaController.metodos}"
															itemLabel="#{metodo.nombreMt}"
															itemValue="#{metodo.idMetodo}" var="metodo">
														</f:selectItems>
													</p:selectOneMenu>



												</p:panelGrid>
											</center>
											<br />

										</div>


									</p:fieldset>

									<br />

									<p:fieldset
										style="border-radius: 10px 10px 10px 10px;
										-moz-border-radius: 10px 10px 10px 10px;
										-webkit-border-radius: 10px 10px 10px 10px;
										border: 0px solid #000000;
										border-style: double;
										border-width: 1px;
										border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
										legend="Informacion Personal">

										<div class="ui-fluid">


											<br />
											<center>
												<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
													columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs"
													style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left"
													layout="grid">

													<p:outputLabel for="personal" value="Personal: "
														style="color:white!important" />
													<p:commandLink process="@this"
														actionListener="#{ordenFacturaController.cargarPersonal(0)}"
														onsuccess="PF('listadoPer').show()"
														disabled="#{ordenFacturaController.disabledButtonPer() != true}">
														<center>
															<h:graphicImage value="/images/archivos/busqueda.png"
																class="btn bt-success" title="Buscar"
																style="border:0px solid #CAD6E0;" width="20" height="20" />


															<p>
																Seleccionar Personal: ( <strong> <h:outputText
																		id="personal"
																		value="#{ordenFacturaController.nuevoDetalleOrden.personal.nombresPe}"
																		size="30" maxlength="100" /></strong> )
															</p>
														</center>
													</p:commandLink>

													<p:outputLabel value="Horas/Trabajo: " for="ht"
														style="color:white!important" />
													<p:inputNumber id="ht"
														value="#{ordenFacturaController.nuevoDetalleOrden.horasTrabajo}"
														required="true" emptyValue="zero"
														requiredMessage="Debe ingresar la cantidad" size="30"
														maxlength="100">

													</p:inputNumber>

													<h:outputLabel value="Fecha inicio: "
														style="color:white!important; font-size: 17px" />
													<p:calendar id="fechaInicio" readonlyInput="true"
														value="#{ordenFacturaController.nuevoDetalleOrden.fechaInicioAnalisis}"
														pattern="dd/MM/yyyy" locale="es"
														onkeypress="return permite(event, 'none')"
														requiredMessage="Fecha Inicial Requerida" navigator="true"
														effect="fadeIn" effectDuration="100" showOn="button"
														size="24">

														<p:ajax event="dateSelect" update="fechaFinal"
															listener="#{ordenFacturaController.cambioFechas}" />


													</p:calendar>

													<h:outputLabel value="Fecha fin: "
														style="color:white!important; font-size: 17px" />
													<p:calendar id="fechaFinal" readonlyInput="true"
														disabled="#{ordenFacturaController.disabledDate() != true}"
														value="#{ordenFacturaController.nuevoDetalleOrden.fechaFinAnalisis}"
														mindate="#{ordenFacturaController.nuevoDetalleOrden.fechaInicioAnalisis}"
														pattern="dd/MM/yyyy" locale="es" required="true"
														onkeypress="return permite(event, 'none')"
														requiredMessage="Fecha Final Requerida" navigator="true"
														effect="fadeIn" effectDuration="100" showOn="button"
														size="24">
														<p:ajax event="dateSelect" update="fechaFinal" />
													</p:calendar>

													<p:outputLabel value="Muestra: "
														style="color:white!important" />
													<p:commandLink process="@this"
														actionListener="#{ordenFacturaController.cargarMuestras(0)}"
														onsuccess="PF('listadoM').show()"
														disabled="#{ordenFacturaController.disabledButtonM() != true}">
														<center>
															<h:graphicImage value="/images/archivos/busqueda.png"
																class="btn bt-success" title="Buscar"
																style="border:0px solid #CAD6E0;" width="20" height="20" />

															<p>
																Seleccionar Muestra: ( <strong> <h:outputText
																		id="muestra"
																		value="#{ordenFacturaController.nuevoDetalleOrden.muestra.idMuestra}"
																		size="30" maxlength="100" /></strong> )
															</p>
														</center>
													</p:commandLink>


												</p:panelGrid>
											</center>
											<br />

										</div>


									</p:fieldset>

									<br />


								</div>
							</div>

						</div>

						<br />
						<br />


						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{ordenFacturaController.agregarDetalleOT}"
									process="@this,formDetalleOT"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formDetalleOT"
									onsuccess="PF('filterServiciosTable').filter();">
								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('detalleOT').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>



					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Ver Orden Trabajo  *************************** -->
			<p:dialog id="panelVerOT" resizable="true" widgetVar="verOT"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="140vh" height="73vh"
				header="Orden de Trabajo">


				<h:form id="formVerOT">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">
							<center>
								<div class="ui-g">
									<div class="ui-g-4"></div>

									<div class="ui-g-4">
										<table>
											<tr>
												<td class="EncabezadoTitulo" align="center" colspan="2">
													<p:outputLabel value="ESCUELA POLITÉCNICA NACIONAL"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 15px; " />
												</td>
											</tr>

											<tr>
												<td class="EncabezadoTitulo2" align="center" colspan="2">
													<p:outputLabel
														value="Campús Politécnico J. Rubén Orellana R."
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel
														value="Ladrón de Guevara E11-253 y Andalucia"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="Telf.: 2976 300"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>
											<tr>
												<td class="EncabezadoTitulo3" align="center" colspan="2">
													<p:outputLabel value="P.O. Box: 17-01-2759 / QUITO-ECUADOR"
														style="FONT-WEIGHT: bold; FONT-FAMILY: arial; FONT-SIZE: 13px; " />
												</td>
											</tr>

										</table>
									</div>
									<div class="ui-g-4"></div>
								</div>
								<br /> <br />
							</center>

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Orden Trabajo">

								<center>

									<p:panelGrid columns="4" layout="grid"
										style="border:none; text-align: left">

										<h:outputText for="id" value="Orden: "
											style="font-weight:bold" />
										<h:outputText id="id"
											value="#{ordenFacturaController.ordenTrabajo.idOrden}" />

										<h:outputText for="proforma" value="Proforma: "
											style="font-weight:bold" />
										<h:outputText id="proforma"
											value="#{ordenFacturaController.obtenerFactura(ordenFacturaController.ordenTrabajo.idFactura).idProforma}" />

									</p:panelGrid>

									<p:panelGrid columns="4" layout="grid" styleClass="ui-noborder"
										style="border:none;text-align: left">

										<h:outputText for="cliente" value="Cliente: "
											style="font-weight:bold" />
										<h:outputText id="cliente"
											value="#{ordenFacturaController.ordenTrabajo.cliente.nombreCl}" />

										<h:outputText for="contacto" value="Representante: "
											style="font-weight:bold" />
										<h:outputText id="contacto"
											value="#{ordenFacturaController.ordenTrabajo.cliente.contactoCl}" />

									</p:panelGrid>

									<p:panelGrid columns="4" layout="grid"
										style="border:none; text-align: left">

										<h:outputText for="direccion" value="Dirección: "
											style="font-weight:bold" />
										<h:outputText id="direccion"
											value="#{ordenFacturaController.ordenTrabajo.cliente.direccionCl}" />

									</p:panelGrid>

									<p:panelGrid columns="4" layout="grid" styleClass="ui-noborder"
										style="border:none; text-align: left">

										<h:outputText for="telefono" value="Telefono: "
											style="font-weight:bold" />
										<h:outputText id="telefono"
											value="#{ordenFacturaController.ordenTrabajo.cliente.telefonoCl}" />

										<h:outputText for="fax" value="Fax: " style="font-weight:bold" />
										<h:outputText id="fax"
											value="#{ordenFacturaController.ordenTrabajo.cliente.faxCl}" />

									</p:panelGrid>

									<p:panelGrid columns="4" layout="grid" styleClass="ui-noborder"
										style="border:none; text-align: left">

										<h:outputText for="fechaRec" value="Fecha de recepción: "
											style="font-weight:bold" />
										<h:outputText id="fechaRec"
											value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaordenOt)}" />

										<h:outputText for="fechaEntrega" value="Fecha de Entrega: "
											style="font-weight:bold" />
										<h:outputText id="fechaEntrega"
											value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaentregaOt)}" />

										<h:outputText for="nMuestras" value="Nro. Muestras: "
											style="font-weight:bold" />
										<h:outputText id="nMuestras"
											value="#{ordenFacturaController.ordenTrabajo.numeromuestraOt}" />

										<h:outputText for="fechaCierre" value="Fecha de Cierre: "
											style="font-weight:bold" />
										<h:outputText id="fechaCierre"
											value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaCierre)}" />

									</p:panelGrid>
								</center>
							</p:fieldset>


							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Detalle Orden">


								<p:dataTable id="tblVerDetalleOT" scrollable="true"
									scrollHeight="200"
									value="#{ordenFacturaController.listaDetalleOrdenTemp}"
									var="detalleOT" sortBy="#{detalleOT.muestra.idMuestra}"
									emptyMessage="No se han registrado detalles de proforma.">

									<p:column headerText="Nro" style="width: 4%">
										<center>
											<h:outputText
												value="#{ordenFacturaController.listarNumeroM(detalleOT.muestra.idMuestra)}" />
										</center>
									</p:column>

									<p:column headerText="ID Muestra" style="width: 10%">
										<h:outputText value="#{detalleOT.muestra.idMuestra}" />
									</p:column>

									<p:column headerText="Muestra">
										<h:outputText value="#{detalleOT.muestra.codigoMCliente}" />
									</p:column>

									<p:column headerText="Servicio">
										<h:outputText
											value="#{ordenFacturaController.servicio(detalleOT.idServicio).nombreS}" />
									</p:column>

									<p:column headerText="Método">
										<h:outputText
											value="#{ordenFacturaController.metodo(detalleOT.idMetodo)}" />
									</p:column>

									<p:column headerText="Laboratorio">
										<h:outputText
											value="#{ordenFacturaController.servicio(detalleOT.idServicio).laboratorio.nombreL}" />
									</p:column>

									<p:column headerText="Responsable">
										<h:outputText value="#{detalleOT.personal.nombresPe}" />
									</p:column>

									<p:column headerText="h/T" style="width: 4%">
										<center>
											<h:outputText value="#{detalleOT.horasTrabajo}" />
										</center>
									</p:column>

									<p:column headerText="F. Inicio" style="width: 9%">
										<h:outputText
											value="#{ordenFacturaController.cambioFecha(detalleOT.fechaInicioAnalisis)}" />
									</p:column>

									<p:column headerText="F. Fin" style="width: 9%">
										<h:outputText
											value="#{ordenFacturaController.cambioFecha(detalleOT.fechaFinAnalisis)}" />
									</p:column>
								</p:dataTable>

							</p:fieldset>

							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Responsable">

								<p:dataTable id="tblPersonalTemp"
									value="#{ordenFacturaController.tempPersonalLabs}"
									var="personal"
									emptyMessage="No se pudo encontrar ninguna coincidencia">

									<p:column headerText="Responsable">
										<center>
											<h:outputText value="#{personal.nombresPe}" />
										</center>
									</p:column>

									<p:column headerText="Firma responsable">
										<center>
											<h:outputText value="" />
										</center>
									</p:column>


								</p:dataTable>

							</p:fieldset>

							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

								<p:panelGrid layout="grid" columns="1" style="border:none;">

									<p:outputLabel id="leyenda" value="Leyenda Unidad" size="24" />

								</p:panelGrid>

							</p:fieldset>

							<br />

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Observaciones">

								<p:panelGrid layout="grid" columns="1" style="border:none;">

									<p:outputLabel id="observaciones"
										value="#{ordenFacturaController.ordenTrabajo.observOt}"
										size="24" />

								</p:panelGrid>

							</p:fieldset>


							<center>

								<br /> <br />

								<h:panelGrid columns="2">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Imprimir OT" icon="fa fa-save" process="@this"
										action="#{ordenFacturaController.abrirOT()}">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left" onclick="PF('verOT').hide();"
										process="@none" value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Editar Orden Trabajo   *************************** -->

			<p:dialog id="panelEditarOT" resizable="true" widgetVar="editarOT"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="142vh" height="73vh"
				header="Editar Orden Trabajo">


				<h:form id="formEditarOT">
					<div class="ui-fluid">
						<p:fieldset
							style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

							<!-- Datos de cliente-->

							<p:fieldset
								style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1"
								legend="Editar Orden Trabajo">

								<div class="ui-fluid">
									<center>
										<p:panelGrid columns="4" layout="grid"
											style="border:none; text-align: left">

											<h:outputText for="id" value="Orden: "
												style="font-weight:bold" />
											<h:outputText id="id"
												value="#{ordenFacturaController.ordenTrabajo.idOrden}" />

											<h:outputText for="proforma" value="Proforma: "
												style="font-weight:bold" />
											<h:outputText id="proforma"
												value="#{ordenFacturaController.obtenerFactura(ordenFacturaController.ordenTrabajo.idFactura).idProforma}" />

										</p:panelGrid>

										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-noborder" style="border:none;text-align: left">

											<h:outputText for="cliente" value="Cliente: "
												style="font-weight:bold" />
											<h:outputText id="cliente"
												value="#{ordenFacturaController.ordenTrabajo.cliente.nombreCl}" />

											<h:outputText for="contacto" value="Representante: "
												style="font-weight:bold" />
											<h:outputText id="contacto"
												value="#{ordenFacturaController.ordenTrabajo.cliente.contactoCl}" />

										</p:panelGrid>

										<p:panelGrid columns="4" layout="grid"
											style="border:none; text-align: left">

											<h:outputText for="direccion" value="Dirección: "
												style="font-weight:bold" />
											<h:outputText id="direccion"
												value="#{ordenFacturaController.ordenTrabajo.cliente.direccionCl}" />

										</p:panelGrid>

										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-noborder"
											style="border:none; text-align: left">

											<h:outputText for="telefono" value="Telefono: "
												style="font-weight:bold" />
											<h:outputText id="telefono"
												value="#{ordenFacturaController.ordenTrabajo.cliente.telefonoCl}" />

											<h:outputText for="fax" value="Fax: "
												style="font-weight:bold" />
											<h:outputText id="fax"
												value="#{ordenFacturaController.ordenTrabajo.cliente.faxCl}" />

										</p:panelGrid>

										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-noborder"
											style="border:none; text-align: left">

											<h:outputText for="fechaRec" value="Fecha de recepción: "
												style="font-weight:bold" />
											<h:outputText id="fechaRec"
												value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaordenOt)}" />

											<h:outputText for="fechaEntrega" value="Fecha de Entrega: "
												style="font-weight:bold" />
											<h:outputText id="fechaEntrega"
												value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaentregaOt)}" />

											<h:outputText for="nMuestras" value="Nro. Muestras: "
												style="font-weight:bold" />
											<h:outputText id="nMuestras"
												value="#{ordenFacturaController.ordenTrabajo.numeromuestraOt}" />

											<h:outputText for="fechaCierre" value="Fecha de Cierre: "
												style="font-weight:bold" />
											<h:outputText id="fechaCierre"
												value="#{ordenFacturaController.cambioFecha(ordenFacturaController.ordenTrabajo.fechaCierre)}" />

										</p:panelGrid>

									</center>
								</div>

							</p:fieldset>

							<br />
							<center>
								<p:fieldset
									style="border-radius: 10px 10px 10px 10px;
											-moz-border-radius: 10px 10px 10px 10px;
											-webkit-border-radius: 10px 10px 10px 10px;
											border: 0px solid #000000;
											border-style: double;
											border-width: 1px;
											border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

									<p:panel id="detalleOT" header="Detalle Orden Trabajo">
										<p:dataTable id="tblDetalleOT"
											value="#{ordenFacturaController.listaDetalleOrden}"
											var="detalleOT" sortBy="#{detalleOT.idServicio}"
											emptyMessage="No se han registrado detalles de proforma, clic en el boton agregar para registrar.">


											<p:column headerText="Servicio">
												<h:outputText
													value="#{ordenFacturaController.servicio(detalleOT.idServicio).nombreS}" />
											</p:column>

											<p:column headerText="Método">
												<h:outputText
													value="#{ordenFacturaController.metodo(detalleOT.idMetodo)}" />
											</p:column>

											<p:column headerText="Unidad/Laboratorio">
												<h:outputText
													value="#{ordenFacturaController.servicio(detalleOT.idServicio).laboratorio.nombreL}" />
											</p:column>

											<p:column headerText="Responsable">
												<h:outputText value="#{detalleOT.personal.nombresPe}" />
											</p:column>

											<p:column headerText="h/T">
												<h:outputText value="#{detalleOT.horasTrabajo}" />
											</p:column>

											<p:column headerText="F. Inicio">
												<h:outputText
													value="#{ordenFacturaController.cambioFecha(detalleOT.fechaInicioAnalisis)}" />
											</p:column>

											<p:column headerText="F. Fin">
												<h:outputText
													value="#{ordenFacturaController.cambioFecha(detalleOT.fechaFinAnalisis)}" />
											</p:column>

											<p:column headerText="Acciones">
												<center>

													<!-- **************************  Boton Editar   *************************** -->
													<p:commandLink icon="ui-icon-check"
														oncomplete="PF('editarDetalleOT').show();"
														update="formEditarDetalleOT"
														actionListener="#{ordenFacturaController.cambiarIdTempPanel(1,2)}">

														<h:graphicImage value="/images/archivos/editar.png"
															title="Modificar" style="border:0px solid #CAD6E0;"
															width="35" height="35" />


														<f:setPropertyActionListener
															target="#{ordenFacturaController.detalleOrden}"
															value="#{detalleOT}">
														</f:setPropertyActionListener>

													</p:commandLink>

												</center>
											</p:column>


										</p:dataTable>
									</p:panel>


								</p:fieldset>

								<br />


							</center>

							<center>

								<br /> <br />

								<h:panelGrid columns="2">

									<p:commandButton style="width: 150px; margin: 10px"
										value="Modificar" icon="fa fa-save"
										process="@this,formEditarOT"
										disabled="#{ordenFacturaController.disabledButton() != true}"
										update="@this,@([id$=messagesForm],[id$=formprincipal]),formEditarOT"
										actionListener="#{ordenFacturaController.editarPro}"
										onsuccess="PF('editarOT').hide();">

									</p:commandButton>

									<p:commandButton style="width: 150px; margin: 10px"
										icon=" fa fa-arrow-left"
										action="#{proformaController.limpiarTodosCampos}"
										onclick="PF('editarOT').hide();" process="@none" value="Atras">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</p:fieldset>
					</div>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel -  Editar Detalle Orden Trabajo   *************************** -->
			<p:dialog id="panelEditarDetalleOT" resizable="true"
				widgetVar="editarDetalleOT" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="80vh"
				height="40vh" header="Editar Detalle Proforma">


				<h:form id="formEditarDetalleOT">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
						-moz-border-radius: 10px 10px 10px 10px;
						-webkit-border-radius: 10px 10px 10px 10px;
						border: 0px solid #000000;
						border-style: double;
						border-width: 1px;
						border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<!-- **************************  Sub-Panel - Buscar Servicio   *************************** -->
						<div class="ui-g">

							<!-- **************************  Sub-Panel - Registro General  *************************** -->

							<div class="ui-g-12">
								<!-- **************************  Sub-Panel - Informacion Servicio   *************************** -->


								<div class="ui-fluid">

									<center>
										<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
											columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
											style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left"
											layout="grid">

											<p:outputLabel for="servicio" value="Servicio: "
												style="color:white!important" />
											<p:outputLabel id="servicio"
												value="#{ordenFacturaController.servicio(ordenFacturaController.detalleOrden.idServicio).nombreS}"
												size="30" maxlength="100" />

											<p:outputLabel for="metodo" value="Metodo: "
												style="color:white!important" />
											<p:outputLabel id="metodo"
												value="#{ordenFacturaController.metodo(ordenFacturaController.detalleOrden.idMetodo)}"
												size="30" maxlength="100" />

										</p:panelGrid>
										<br />

										<center>
											<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
												columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs"
												style="-webkit-box-shadow: -0px -0px 1px 0px rgba(0,0,0,0.75);text-align: left"
												layout="grid">

												<p:outputLabel value="Responsable: "
													style="color:white!important" />
												<p:commandLink process="@this"
													actionListener="#{ordenFacturaController.cargarPersonal(1)}"
													onsuccess="PF('listadoPer').show()">
													<center>
														<h:graphicImage value="/images/archivos/busqueda.png"
															class="btn bt-success" title="Buscar"
															style="border:0px solid #CAD6E0;" width="20" height="20" />


														<p>
															Seleccionar Personal: ( <strong> <h:outputText
																	id="personal"
																	value="#{ordenFacturaController.detalleOrden.personal.nombresPe}"
																	size="30" maxlength="100" /></strong> )
														</p>
													</center>
												</p:commandLink>

												<p:outputLabel value="Horas/Trabajo: " for="ht"
													style="color:white!important" />
												<p:inputNumber id="ht"
													value="#{ordenFacturaController.detalleOrden.horasTrabajo}"
													required="true" emptyValue="zero"
													requiredMessage="Debe ingresar la cantidad" size="30"
													maxlength="100">

												</p:inputNumber>

												<h:outputLabel value="Fecha inicio: "
													style="color:white!important; font-size: 17px" />
												<p:calendar id="fechaInicio" readonlyInput="true"
													value="#{ordenFacturaController.detalleOrden.fechaInicioAnalisis}"
													pattern="dd/MM/yyyy" locale="es"
													onkeypress="return permite(event, 'none')"
													requiredMessage="Fecha Inicial Requerida" navigator="true"
													effect="fadeIn" effectDuration="100" showOn="button"
													size="24">
													<p:ajax event="dateSelect" update="fechaFinal" />
													<p:ajax event="keyup" update="fechaFinal" />
												</p:calendar>

												<h:outputLabel value="Fecha fin: "
													style="color:white!important; font-size: 17px" />
												<p:calendar id="fechaFinal" readonlyInput="true"
													disabled="#{ordenFacturaController.disabledDateEdit() != true}"
													value="#{ordenFacturaController.detalleOrden.fechaFinAnalisis}"
													mindate="#{ordenFacturaController.detalleOrden.fechaInicioAnalisis}"
													pattern="dd/MM/yyyy" locale="es" required="true"
													onkeypress="return permite(event, 'none')"
													requiredMessage="Fecha Final Requerida" navigator="true"
													effect="fadeIn" effectDuration="100" showOn="button"
													size="24">

												</p:calendar>

												<p:outputLabel value="Muestra: "
													style="color:white!important" />
												<p:commandLink process="@this"
													actionListener="#{ordenFacturaController.cargarMuestras(1)}"
													onsuccess="PF('listadoM').show()">
													<center>
														<h:graphicImage value="/images/archivos/busqueda.png"
															class="btn bt-success" title="Buscar"
															style="border:0px solid #CAD6E0;" width="20" height="20" />

														<p>
															Seleccionar Muestra: ( <strong> <h:outputText
																	id="muestra"
																	value="#{ordenFacturaController.detalleOrden.muestra.idMuestra}"
																	size="30" maxlength="100" /></strong> )
														</p>
													</center>
												</p:commandLink>

											</p:panelGrid>
										</center>
										<br />



									</center>


								</div>

							</div>
						</div>
						<br />
						<center>

							<h:panelGrid columns="2">

								<p:commandButton value="Guardar" icon="fa fa-save"
									style="width: 115px; margin: 10px"
									actionListener="#{ordenFacturaController.editarDetalleOT}"
									process="@form,formEditarDetalleOT"
									update="@this,@([id$=messagesForm],[id$=formprincipal]),formEditarDetalleOT">
								</p:commandButton>

								<p:commandButton value="Atrás "
									style="width: 115px; margin: 5px" icon="fa fa-arrow-left"
									onclick="PF('editarDetalleOT').hide();" process="@none">

								</p:commandButton>

							</h:panelGrid>

						</center>



					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Clientes ************************** -->
			<p:dialog id="panelListadoCli" resizable="true"
				widgetVar="listadoCli" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="150vh"
				height="73vh" header="Listado de Clientes">


				<h:form id="formListadoCli">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>

							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Clientes" update="@this, tblClientes"
								oncomplete="PF('filterClientesTable').filter();">
							</p:commandButton>

							<br /> <br />

							<div class="ui-fluid" align="center">

								<p:dataTable id="tblClientes"
									value="#{ordenFacturaController.clientes}" var="cliente"
									widgetVar="filterClientesTable"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									filteredValue="#{ordenFacturaController.filtroClientes}"
									rows="7" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
									rowKey="#{cliente.idCliente}"
									selection="#{ordenFacturaController.selectCliente}"
									selectionMode="single">

									<p:column headerText="Cliente" filterBy="#{cliente.nombreCl}">
										<h:outputText value="#{cliente.nombreCl}" />
									</p:column>

									<p:column headerText="RUC" filterBy="#{cliente.rucCl}"
										filterMatchMode="contains">
										<h:outputText value="#{cliente.rucCl}" />
									</p:column>

									<p:column headerText="Cedula" filterBy="#{cliente.cedula}">
										<h:outputText value="#{cliente.cedula}" />
									</p:column>

									<p:column headerText="Teléfono"
										filterBy="#{cliente.telefonoCl}" filterMatchMode="contains">
										<h:outputText value="#{cliente.telefonoCl}" />
									</p:column>

									<p:column headerText="Contacto"
										filterBy="#{cliente.contactoCl}" filterMatchMode="contains">
										<h:outputText value="#{cliente.contactoCl}" />
									</p:column>

								</p:dataTable>
							</div>
							<br /> <br />

							<center>

								<h:panelGrid columns="1">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,tblClientes"
										action="#{ordenFacturaController.seleccionarCliente}"
										update="@([id$=messagesForm],[id$=formAgregarOT])"
										onsuccess="PF('listadoCli').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Clientes ************************** -->
			<p:dialog id="panelListadoF" resizable="true" widgetVar="listadoF"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="150vh" height="73vh"
				header="Listado de Facturas Pagadas">


				<h:form id="formListadoF">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>

							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Facturas" update="@this, tblFacturas"
								oncomplete="PF('filterFacturasTable').filter();">
							</p:commandButton>

							<br /> <br />

							<div class="ui-fluid" align="center">

								<p:dataTable id="tblFacturas"
									value="#{ordenFacturaController.facturas}" var="factura"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									rows="7" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
									rowKey="#{factura.idFactura}"
									selection="#{ordenFacturaController.selectFactura}"
									selectionMode="single">

									<p:column headerText="ID Factura"
										filterBy="#{factura.idFactura}">
										<h:outputText value="#{factura.idFactura}" />
									</p:column>

									<p:column headerText="ID Proforma"
										filterBy="#{factura.idProforma}" filterMatchMode="contains">
										<h:outputText value="#{factura.idProforma}" />
									</p:column>

									<p:column headerText="Fecha" filterBy="#{factura.fechafacF}">
										<h:outputText value="#{factura.fechafacF}" />
									</p:column>

									<p:column headerText="Estado"
										filterBy="#{factura.idEstadoFactura}"
										filterMatchMode="contains">
										<h:outputText
											value="#{ordenFacturaController.estadoF(factura.idEstadoFactura)}" />
									</p:column>

								</p:dataTable>
							</div>
							<br /> <br />

							<center>

								<h:panelGrid columns="1">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,tblFacturas"
										action="#{ordenFacturaController.seleccionarFactura()}"
										update="@([id$=messagesForm],[id$=formAgregarOT])"
										onsuccess="PF('listadoF').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Personal ************************** -->
			<p:dialog id="panelListadoPer" resizable="true"
				widgetVar="listadoPer" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="150vh"
				height="73vh" header="Listado de Personal">


				<h:form id="formListadoPer">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>

							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Servicios" update="@this, tblPersonal"
								oncomplete="PF('filterPersonalTable').filter();">
							</p:commandButton>

							<br /> <br />

							<div class="ui-fluid" align="center">

								<p:dataTable id="tblPersonal"
									value="#{ordenFacturaController.personalLabs}" var="personal"
									widgetVar="filterPersonalTable"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									filteredValue="#{ordenFacturaController.filtroPersonalLabs}"
									rows="8" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
									rowKey="#{personal.idPersonal}"
									selection="#{ordenFacturaController.personalLab}"
									selectionMode="single">

									<p:column headerText="ID" filterBy="#{personal.idPersonal}"
										filterMatchMode="contains">
										<h:outputText value="#{personal.idPersonal}" />
									</p:column>

									<p:column headerText="Nombre Analista"
										filterBy="#{personal.nombresPe}" filterMatchMode="contains">
										<h:outputText value="#{personal.nombresPe}" />
									</p:column>

									<p:column headerText="Laboratorio"
										filterBy="#{personal.idUnidad}" filterMatchMode="contains">
										<h:outputText value="#{personal.idUnidad}" />
									</p:column>


								</p:dataTable>
							</div>
							<br /> <br />

							<center>

								<h:panelGrid columns="1">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,tblPersonal"
										action="#{ordenFacturaController.seleccionarPersonal}"
										update="@([id$=messagesForm])"
										onsuccess="PF('listadoPer').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Listado Muestra ************************** -->
			<p:dialog id="panelListadoM" resizable="true" widgetVar="listadoM"
				modal="true" showEffect="explode" hideEffect="fade"
				responsive="true" dynamic="true" width="150vh" height="73vh"
				header="Listado de Muestras">


				<h:form id="formListadoM">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">


						<br />
						<br />
						<center>

							<p:commandButton process="@this" icon="fa fa-refresh"
								value="Cargar Muestras" update="@this, tblMuestra"
								oncomplete="PF('filterMuestraTable').filter();">
							</p:commandButton>

							<br /> <br />

							<div class="ui-fluid" align="center">

								<p:dataTable id="tblMuestra"
									value="#{ordenFacturaController.muestras}" var="muestra"
									widgetVar="filterMuestraTable"
									emptyMessage="No se pudo encontrar ninguna coincidencia"
									filteredValue="#{ordenFacturaController.filtroMuestras}"
									rows="8" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" paginatorPosition="bottom"
									rowKey="#{muestra.idMuestra}"
									selection="#{ordenFacturaController.muestra}"
									selectionMode="single">

									<p:ajax event="rowSelect"
										listener="#{ordenFacturaController.validarDetalleOTM}"
										update="@([id$=messagesForm]), formListadoM" />

									<p:column headerText="ID Muestra"
										filterBy="#{muestra.idMuestra}" filterMatchMode="contains">
										<h:outputText value="#{muestra.idMuestra}" />
									</p:column>

									<p:column headerText="ID Factura"
										filterBy="#{muestra.idFactura}" filterMatchMode="contains">
										<h:outputText value="#{muestra.idFactura}" />
									</p:column>

									<p:column headerText="Muestra"
										filterBy="#{muestra.codigoMCliente}"
										filterMatchMode="contains">
										<h:outputText value="#{muestra.codigoMCliente}" />
									</p:column>

									<p:column headerText="Descripción Muestra"
										filterBy="#{muestra.descrM}" filterMatchMode="contains">
										<h:outputText value="#{muestra.descrM}" />
									</p:column>

								</p:dataTable>
							</div>
							<br />

							<center>

								<h:panelGrid columns="2">

									<p:commandButton icon="fa fa-save" value="Seleccionar"
										process="@this,tblMuestra"
										action="#{ordenFacturaController.seleccionarMuestra()}"
										update="@([id$=messagesForm]), tblMuestra"
										oncomplete="PF('filterMuestraTable').filter();"
										onsuccess="PF('listadoM').hide()"
										disabled="#{ordenFacturaController.disabledButtonSeleccionM() != true}">

									</p:commandButton>

									<p:commandButton icon="fa fa-save" value="Cancelar"
										process="@this"
										action="#{ordenFacturaController.seleccionarMuestra()}"
										update="@this, tblMuestra"
										oncomplete="PF('filterMuestraTable').filter();"
										onsuccess="PF('listadoM').hide()">

									</p:commandButton>

								</h:panelGrid>

							</center>
						</center>
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Editar Fecha Cierre ************************** -->
			<p:dialog id="panelEditarFechaCierre" resizable="true"
				widgetVar="editarFechaCierre" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="55vh"
				height="35vh" header="Editar Fecha Cierre">


				<h:form id="formEditarFechaCierre">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<br />


						<center>
							<div class="ui-fluid">
								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
									columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

									<p:outputLabel for="orden" value="Id Orden: "
										style="color:white!important" />
									<p:outputLabel id="orden"
										value="#{ordenFacturaController.ordenTrabajo.idOrden}"
										size="30" maxlength="100" />

									<h:outputLabel value="Fecha Cierre: "
										style="color:white!important; font-size: 17px" />
									<p:calendar id="fechaCierre" readonlyInput="true"
										value="#{ordenFacturaController.ordenTrabajo.fechaCierre}"
										maxdate="#{ordenFacturaController.ordenTrabajo.fechaentregaOt}"
										pattern="dd/MM/yyyy" locale="es"
										onkeypress="return permite(event, 'none')"
										requiredMessage="Fecha Requerida" navigator="true"
										effect="fadeIn" effectDuration="100" showOn="button" size="24">

									</p:calendar>


								</p:panelGrid>
							</div>
						</center>

						<br />

						<center>

							<h:panelGrid columns="2">

								<p:commandButton icon="fa fa-save" value="Guardar"
									process="@this,formEditarFechaCierre"
									actionListener="#{ordenFacturaController.editarEstado}"
									update="@([id$=messagesForm],[id$=formprincipal])"
									onsuccess="PF('editarFechaCierre').hide()">

								</p:commandButton>

								<p:commandButton icon="fa fa-close" value="Cancelar"
									onclick="PF('editarFechaCierre').hide()">

								</p:commandButton>

							</h:panelGrid>

						</center>
						<br />
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Editar Fecha Entrega ************************** -->
			<p:dialog id="panelEditarFechaEntrega" resizable="true"
				widgetVar="editarFechaEntrega" modal="true" showEffect="explode"
				hideEffect="fade" responsive="true" dynamic="true" width="55vh"
				height="35vh" header="Editar Fecha Entrega">


				<h:form id="formEditarFechaEntrega">

					<p:fieldset
						style="border-radius: 10px 10px 10px 10px;
							-moz-border-radius: 10px 10px 10px 10px;
							-webkit-border-radius: 10px 10px 10px 10px;
							border: 0px solid #000000;
							border-style: double;
							border-width: 1px;
							border-color: #11B2F1;border-style: double; border-width: 1px; border-color: #11B2F1">

						<br />


						<center>
							<div class="ui-fluid">
								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
									columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas">

									<p:outputLabel for="orden" value="Id Orden: "
										style="color:white!important" />
									<p:outputLabel id="orden"
										value="#{ordenFacturaController.ordenTrabajo.idOrden}"
										size="30" maxlength="100" />

									<h:outputLabel value="Fecha Entrega: "
										style="color:white!important; font-size: 17px" />
									<p:calendar id="fechaEntrega" readonlyInput="true"
										value="#{ordenFacturaController.ordenTrabajo.fechaentregaOt}"
										mindate="#{ordenFacturaController.ordenTrabajo.fechaCierre}"
										pattern="dd/MM/yyyy" locale="es"
										onkeypress="return permite(event, 'none')"
										requiredMessage="Fecha Requerida" navigator="true"
										effect="fadeIn" effectDuration="100" showOn="button" size="24">

									</p:calendar>


								</p:panelGrid>
							</div>
						</center>

						<br />

						<center>

							<h:panelGrid columns="2">

								<p:commandButton icon="fa fa-save" value="Guardar"
									process="@this,formEditarFechaEntrega"
									actionListener="#{ordenFacturaController.editarEstado}"
									update="@([id$=messagesForm],[id$=formprincipal])"
									onsuccess="PF('editarFechaEntrega').hide()">

								</p:commandButton>

								<p:commandButton icon="fa fa-close" value="Cancelar"
									onclick="PF('editarFechaEntrega').hide()">

								</p:commandButton>

							</h:panelGrid>

						</center>
						<br />
					</p:fieldset>
				</h:form>
			</p:dialog>

			<!-- **************************  Panel - Eliminar Detalle OT************************** -->
			<h:form id="formEliminarDetalleOT">
				<p:confirmDialog
					message="Esta seguro(a) que desea eliminar el detalle de orden de trabajo"
					header="Eliminar M.I." severity="warn"
					widgetVar="cdEliminarDetalleOT">
					<center>

						<p:commandButton value="Aceptar"
							onsuccess="PF('cdEliminarDetalleOT').hide();"
							actionListener="#{ordenFacturaController.eliminarDetalleOT}"
							update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarOT" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdEliminarDetalleOT').hide();" type="button" />

					</center>

				</p:confirmDialog>


			</h:form>

			<!-- **************************  Panel - Panel de error ************************** -->
			<h:form id="formError">
				<p:confirmDialog message="La orden ya ha sido cerrada."
					header="Mensaje..." severity="warn" widgetVar="cdPanelError">
					<center>

						<p:commandButton value="Cancelar"
							onclick="PF('cdPanelError').hide();" type="button" />

					</center>

				</p:confirmDialog>

			</h:form>

			<h:form id="formErrorFecha">
				<p:confirmDialog message="Debe de registar la fecha de cierre."
					header="Mensaje..." severity="warn" widgetVar="cdPanelErrorFecha">
					<center>

						<p:commandButton value="Cancelar"
							onclick="PF('cdPanelErrorFecha').hide();" type="button" />

					</center>

				</p:confirmDialog>

			</h:form>

			<!-- **************************  Panel de vizualizacion - Confirmar Nuevo Orden   ************************** -->

			<p:confirmDialog
				message="Esta seguro(a) que desea guardar el orden con los siguientes datos: "
				header="Confirmar Orden Trabajo." severity="warn"
				widgetVar="cdConfirmarOT">

				<center>
					<h:form id="formConfirmarNuevoOT">

						<p:panelGrid columns="2" layout="grid"
							styleClass="ui-panelgrid-blank"
							columnClasses="pnlGridFondoFilas,pnlGridAjusteDivs,pnlGridFondoFilas"
							style="border:none;">

							<p:outputLabel for="cliente" value="Cliente: "
								style="color:white!important" />
							<p:outputLabel id="cliente"
								value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.nombreCl}" />

							<p:outputLabel for="direccion" value="Direccion: "
								style="color:white!important" />
							<p:outputLabel id="direccion"
								value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.direccionCl}" />

							<p:outputLabel for="fax" value="Fax:  "
								style="color:white!important" />
							<p:outputLabel id="fax"
								value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.faxCl}" />

							<p:outputLabel for="telefono" value="Telefono: "
								style="color:white!important" />
							<p:outputLabel id="telefono"
								value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.telefonoCl}" />

							<p:outputLabel for="contacto" value="Contacto: "
								style="color:white!important" />
							<p:outputLabel id="contacto"
								value="#{ordenFacturaController.nuevoOrdenTrabajo.cliente.contactoCl}" />

						</p:panelGrid>

						<br />

						<p:commandButton value="Aceptar"
							onsuccess="PF('cdConfirmarOT').hide();"
							actionListener="#{ordenFacturaController.guardarOT}"
							update="@this,@([id$=messagesForm],[id$=formprincipal]),formAgregarOT" />


						<p:commandButton value="Cancelar"
							onclick="PF('cdConfirmarOT').hide();" type="button" />
					</h:form>
				</center>

			</p:confirmDialog>




		</h:body>

		<script type="text/javascript">
			function start(){
			PF('statusDialog').show();
			} 

			function stop(){
			PF('statusDialog').hide();
			}

			function aiuda(){
			console.log('TIMBREMOS :v');

				}

			window.onbeforeunload = function(event) {
				rc();
			    event.returnValue = "";
			};
			

			PrimeFaces.locales['es'] = {
		            closeText: 'Cerrar',
		            prevText: 'Anterior',
		            nextText: 'Siguiente',
		            monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
		            monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
		            dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
		            dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
		            dayNamesMin: ['D', 'L', 'M', 'X', 'J', 'V', 'S'],
		            weekHeader: 'Semana',
		            firstDayOfWeek: 1,
		            isRTL: false,
		            showMonthAfterYear: false,
		            yearSuffix: '',
		            timeOnlyTitle: 'Sólo hora',
		            timeText: 'Tiempo',
		            hourText: 'Hora',
		            minuteText: 'Minuto',
		            secondText: 'Segundo',
		            currentText: 'Fecha actual',
		            ampm: false,
		            month: 'Mes',
		            week: 'Semana',
		            day: 'Día',
		            allDayText: 'Todo el día'
		        };

		</script>

		<!-- **************************  Scroll en dialogo   *************************** -->
		<style type="text/css">
.ui-dialog-content {
	max-width: 1500px !important;
	max-height: 500px !important;
	margin-bottom: 5px !important;
}

.ui-datatable-scrollable-theadclone {
	visibility: collapse;
}
</style>

	</ui:define>
</ui:composition>